<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Beskrivande statistik | R-anvisningar till Grundläggande statistik</title>
  <meta name="description" content="2 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  
  
  



<meta name="date" content="2024-10-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="datahantering-och-grafer.html"/>
<link rel="next" href="ett-stickprov-av-normalfördelad-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R-anvisningar</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduktion</a></li>
<li class="chapter" data-level="" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html"><i class="fa fa-check"></i>Installation av R och RStudio</a>
<ul>
<li class="chapter" data-level="0.1" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#inledning"><i class="fa fa-check"></i><b>0.1</b> Inledning</a></li>
<li class="chapter" data-level="0.2" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#installation-av-r"><i class="fa fa-check"></i><b>0.2</b> Installation av R</a></li>
<li class="chapter" data-level="0.3" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#installation-av-rstudio"><i class="fa fa-check"></i><b>0.3</b> Installation av RStudio</a></li>
<li class="chapter" data-level="0.4" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#gränssnittet-i-rstudio"><i class="fa fa-check"></i><b>0.4</b> Gränssnittet i RStudio</a></li>
<li class="chapter" data-level="0.5" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#paket-i-r"><i class="fa fa-check"></i><b>0.5</b> Paket i R</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html"><i class="fa fa-check"></i><b>1</b> Datahantering och grafer</a>
<ul>
<li class="chapter" data-level="1.1" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#uppstart-och-orientering"><i class="fa fa-check"></i><b>1.1</b> Uppstart och orientering</a></li>
<li class="chapter" data-level="1.2" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#packages-från-cran"><i class="fa fa-check"></i><b>1.2</b> <em>Packages</em> från CRAN</a></li>
<li class="chapter" data-level="1.3" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#objekt-och-funktioner"><i class="fa fa-check"></i><b>1.3</b> Objekt och funktioner</a></li>
<li class="chapter" data-level="1.4" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#sekvenser-av-funktioner"><i class="fa fa-check"></i><b>1.4</b> Sekvenser av funktioner</a></li>
<li class="chapter" data-level="1.5" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#datainskrivning"><i class="fa fa-check"></i><b>1.5</b> Datainskrivning</a></li>
<li class="chapter" data-level="1.6" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#urval-ur-en-tabell-med-select-och-filter"><i class="fa fa-check"></i><b>1.6</b> Urval ur en tabell med <code>select</code> och <code>filter</code></a></li>
<li class="chapter" data-level="1.7" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#grafer-med-ggplot2"><i class="fa fa-check"></i><b>1.7</b> Grafer med <code>ggplot2</code></a></li>
<li class="chapter" data-level="1.8" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#ai-uppgift-i"><i class="fa fa-check"></i><b>1.8</b> AI-uppgift I</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html"><i class="fa fa-check"></i><b>2</b> Beskrivande statistik</a>
<ul>
<li class="chapter" data-level="2.1" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#repetition-från-datorövning-1"><i class="fa fa-check"></i><b>2.1</b> Repetition från datorövning 1</a></li>
<li class="chapter" data-level="2.2" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#import-av-data-från-en-excelfil"><i class="fa fa-check"></i><b>2.2</b> Import av data från en Excelfil</a></li>
<li class="chapter" data-level="2.3" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#ändra-och-skapa-nya-kolumner-med-mutate"><i class="fa fa-check"></i><b>2.3</b> Ändra och skapa nya kolumner med <code>mutate</code></a></li>
<li class="chapter" data-level="2.4" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#sammanfattande-lägesmått"><i class="fa fa-check"></i><b>2.4</b> Sammanfattande lägesmått</a></li>
<li class="chapter" data-level="2.5" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#sammanfattande-spridningsmått"><i class="fa fa-check"></i><b>2.5</b> Sammanfattande spridningsmått</a></li>
<li class="chapter" data-level="2.6" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#ordna-upp-beskrivande-statistik-och-exportera"><i class="fa fa-check"></i><b>2.6</b> Ordna upp beskrivande statistik och exportera</a></li>
<li class="chapter" data-level="2.7" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#kumulativt-medelvärde"><i class="fa fa-check"></i><b>2.7</b> Kumulativt medelvärde</a></li>
<li class="chapter" data-level="2.8" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#tredimensionella-grafer-med-plotly"><i class="fa fa-check"></i><b>2.8</b> Tredimensionella grafer med <code>plotly</code></a></li>
<li class="chapter" data-level="2.9" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#ai-uppgift-ii"><i class="fa fa-check"></i><b>2.9</b> AI-uppgift II</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html"><i class="fa fa-check"></i><b>3</b> Ett stickprov av normalfördelad data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#repetition-från-datorövning-2"><i class="fa fa-check"></i><b>3.1</b> Repetition från datorövning 2</a></li>
<li class="chapter" data-level="3.2" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#test-av-medelvärde-för-normalfördelad-data"><i class="fa fa-check"></i><b>3.2</b> Test av medelvärde för normalfördelad data</a></li>
<li class="chapter" data-level="3.3" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#konfidensintervall-för-normalfördelad-data"><i class="fa fa-check"></i><b>3.3</b> Konfidensintervall för normalfördelad data</a></li>
<li class="chapter" data-level="3.4" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#normalfördelad-data"><i class="fa fa-check"></i><b>3.4</b> Normalfördelad data</a></li>
<li class="chapter" data-level="3.5" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#centrala-gränsvärdesatsen"><i class="fa fa-check"></i><b>3.5</b> Centrala gränsvärdesatsen</a></li>
<li class="chapter" data-level="3.6" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#ai-uppgift-iii"><i class="fa fa-check"></i><b>3.6</b> AI-uppgift III</a></li>
<li class="chapter" data-level="3.7" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#bonus.-simuleringar-för-t-test-och-konfidensintervall"><i class="fa fa-check"></i><b>3.7</b> Bonus. Simuleringar för t-test och konfidensintervall</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html"><i class="fa fa-check"></i><b>4</b> Ett stickprov av icke-normalfördelad data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#repetition-av-datorövning-3"><i class="fa fa-check"></i><b>4.1</b> Repetition av datorövning 3</a></li>
<li class="chapter" data-level="4.2" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#proportioner-från-binär-data"><i class="fa fa-check"></i><b>4.2</b> Proportioner från binär data</a></li>
<li class="chapter" data-level="4.3" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#konfidensintervall-för-proportioner"><i class="fa fa-check"></i><b>4.3</b> Konfidensintervall för proportioner</a></li>
<li class="chapter" data-level="4.4" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#chi-två-test-för-goodness-of-fit"><i class="fa fa-check"></i><b>4.4</b> Chi-två-test för goodness-of-fit</a></li>
<li class="chapter" data-level="4.5" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#chi-två-test-när-någon-parameter-skattas-från-datan"><i class="fa fa-check"></i><b>4.5</b> Chi-två-test när någon parameter skattas från datan</a></li>
<li class="chapter" data-level="4.6" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#bonus.-interaktiva-kartor-med-leaflet"><i class="fa fa-check"></i><b>4.6</b> Bonus. Interaktiva kartor med leaflet</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html"><i class="fa fa-check"></i><b>5</b> Test för två stickprov</a>
<ul>
<li class="chapter" data-level="5.1" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#repetition-av-datorövning-4"><i class="fa fa-check"></i><b>5.1</b> Repetition av datorövning 4</a></li>
<li class="chapter" data-level="5.2" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#två-stickprov-och-normalfördelad-data"><i class="fa fa-check"></i><b>5.2</b> Två stickprov och normalfördelad data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#t-test-för-två-matchade-stickprov"><i class="fa fa-check"></i><b>5.2.1</b> t-test för två matchade stickprov</a></li>
<li class="chapter" data-level="5.2.2" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#t-test-för-två-oberoende-stickprov"><i class="fa fa-check"></i><b>5.2.2</b> t-test för två oberoende stickprov</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#z-test-och-konfidensintervall-för-två-proportioner"><i class="fa fa-check"></i><b>5.3</b> z-test och konfidensintervall för två proportioner</a></li>
<li class="chapter" data-level="5.4" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#chi-två-test-för-korstabeller"><i class="fa fa-check"></i><b>5.4</b> Chi-två-test för korstabeller</a></li>
<li class="chapter" data-level="5.5" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#bonus.-bilder-i-r"><i class="fa fa-check"></i><b>5.5</b> Bonus. Bilder i R</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="variansanalys.html"><a href="variansanalys.html"><i class="fa fa-check"></i><b>6</b> Variansanalys</a>
<ul>
<li class="chapter" data-level="6.1" data-path="variansanalys.html"><a href="variansanalys.html#repetition-av-datorövning-5"><i class="fa fa-check"></i><b>6.1</b> Repetition av datorövning 5</a></li>
<li class="chapter" data-level="6.2" data-path="variansanalys.html"><a href="variansanalys.html#allmänt"><i class="fa fa-check"></i><b>6.2</b> Allmänt</a></li>
<li class="chapter" data-level="6.3" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-en-faktor"><i class="fa fa-check"></i><b>6.3</b> Variansanalys. En faktor</a></li>
<li class="chapter" data-level="6.4" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-en-faktor-med-block"><i class="fa fa-check"></i><b>6.4</b> Variansanalys. En faktor med block</a></li>
<li class="chapter" data-level="6.5" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-två-faktorer-med-block"><i class="fa fa-check"></i><b>6.5</b> Variansanalys. Två faktorer med block</a></li>
<li class="chapter" data-level="6.6" data-path="variansanalys.html"><a href="variansanalys.html#modellantaganden-och-residualer"><i class="fa fa-check"></i><b>6.6</b> Modellantaganden och residualer</a></li>
<li class="chapter" data-level="6.7" data-path="variansanalys.html"><a href="variansanalys.html#bonus.-statistik-för-ekologi"><i class="fa fa-check"></i><b>6.7</b> Bonus. Statistik för ekologi</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html"><i class="fa fa-check"></i><b>7</b> Regression och korrelation</a>
<ul>
<li class="chapter" data-level="7.1" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#repetition-av-datorövning-6"><i class="fa fa-check"></i><b>7.1</b> Repetition av datorövning 6</a></li>
<li class="chapter" data-level="7.2" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#regression"><i class="fa fa-check"></i><b>7.2</b> Regression</a></li>
<li class="chapter" data-level="7.3" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#korrelation"><i class="fa fa-check"></i><b>7.3</b> Korrelation</a></li>
<li class="chapter" data-level="7.4" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#bonus.-skrapa-data-från-webbsidor"><i class="fa fa-check"></i><b>7.4</b> Bonus. Skrapa data från webbsidor</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R-anvisningar till <em>Grundläggande statistik</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="beskrivande-statistik" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Beskrivande statistik<a href="beskrivande-statistik.html#beskrivande-statistik" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Datorövning 2 handlar om beräkning av beskrivande statistik i R. Efter övningen ska vi kunna</p>
<ul>
<li>Importera data från en excelfil,</li>
<li>Beräkna lämpliga lägesmått för en variabel,</li>
<li>Beräkna lämpliga spridningsmått för en variabel,</li>
<li>Konstruera grafer som jämför två eller flera gruppers läge och spridning.</li>
</ul>
<div id="repetition-från-datorövning-1" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Repetition från datorövning 1<a href="beskrivande-statistik.html#repetition-från-datorövning-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>När man arbetar i R är det klokt att använda ett avancerat gränssnitt som RStudio och att skriva sin kod i ett separat skript. I RStudio kan man starta ett nytt skript genom <em>Ctrl + Shift + N</em>.</p>
<p>Mycket funktionalitet i R ligger i tilläggspaket (<em>Packages</em>). Paket måste installeras första gången de används och laddas varje session de används, t.ex.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="beskrivande-statistik.html#cb63-1" tabindex="-1"></a><span class="co"># install.packages(&quot;tidyverse&quot;) # Installera tidyverse</span></span>
<span id="cb63-2"><a href="beskrivande-statistik.html#cb63-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)              <span class="co"># Ladda ett paket</span></span></code></pre></div>
<p>Objekt skapas med <em>assign</em>-pilen <code>&lt;-</code>. Det är ett sätt att importera data till R. Det är dock vanligare importera från en extern fil. Mer om det senare.</p>
<p>Vi arbetar nästan alltid med data på tabellformat där variablerna är kolumner och observationerna rader. I gapminder-datan ges raderna av ett land för ett visst år.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="beskrivande-statistik.html#cb64-1" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb64-2"><a href="beskrivande-statistik.html#cb64-2" tabindex="-1"></a>gapminder                       <span class="co"># Skriv ut objektet gapminder</span></span></code></pre></div>
<p>Funktioner agerar på objekt och ger något utfall. Här nedan beräknas medelvärdet av livslängd med funktionen <code>mean()</code>. Dollartecknet används för att ange en specifik kolumn i dataobjektet. Funktioner styrs av möjliga argument - här används <code>na.rm</code> för att ange att saknade värden inte ska tas med i beräkningen</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="beskrivande-statistik.html#cb65-1" tabindex="-1"></a><span class="fu">mean</span>(gapminder<span class="sc">$</span>lifeExp, <span class="at">na.rm =</span> T) <span class="co"># Beräkna medel av lifeExp</span></span></code></pre></div>
<pre><code>## [1] 59.47444</code></pre>
<p>Funktionerna <code>filter()</code> och <code>select()</code> kan användas för att välja kolumner och rader. Funktioner kan länkas samman med en pipe <code>%&gt;%</code> för att skapa sekvenser av funktioner. Man kan tänka på pipen som <em>och sen</em>.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="beskrivande-statistik.html#cb67-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb67-2"><a href="beskrivande-statistik.html#cb67-2" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Norway&quot;</span>, year <span class="sc">&gt;</span> <span class="dv">1972</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-3"><a href="beskrivande-statistik.html#cb67-3" tabindex="-1"></a>  <span class="fu">select</span>(country, lifeExp)</span></code></pre></div>
<p>Slutligen tittade vi på grafer med ggplot2-paketet. En ggplot byggs upp med tre grundelar: data, geometrier (grafens objekt och former), och <em>aesthetics</em> (utseende och placering av geometrierna). I ett enkelt spridningsdiagram är data två numeriska variabler, geometrierna är punkter, och punkternas placering ges av en x-koordinat och en y-koordinat. Ytterligare <em>aesthetics</em> kan vara punkternas färger (<code>color</code>) och storlek (<code>size</code>).</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="beskrivande-statistik.html#cb68-1" tabindex="-1"></a>dat_small <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>)</span>
<span id="cb68-2"><a href="beskrivande-statistik.html#cb68-2" tabindex="-1"></a><span class="fu">ggplot</span>(dat_small, <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, </span>
<span id="cb68-3"><a href="beskrivande-statistik.html#cb68-3" tabindex="-1"></a>                      <span class="at">size =</span> pop, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb68-4"><a href="beskrivande-statistik.html#cb68-4" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
</div>
<div id="import-av-data-från-en-excelfil" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Import av data från en Excelfil<a href="beskrivande-statistik.html#import-av-data-från-en-excelfil" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Inom vetenskapen är Excel det vanligaste filformatet för mindre datamängder. Till den här delen ska vi återigen arbeta med data från <em>Gapminder</em>.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-23" class="exercise"><strong>Uppgift 2.1  (Excelfil från Canvas) </strong></span>Hitta excelfilen <em>Gapminder.xlsx</em> på Canvas och ladda ner den. Hitta mappen som filen laddats ned till.</p>
</div>
<p>I R kan man läsa in data från en Excel-fil med funktionen <code>read_excel()</code> från paketet <code>readxl</code>. Som argument till funktionen sätts filens sökväg - dess placering på hårddisken. Stycket nedan importerar från en excelfil som ligger på hårddisken <em>C:</em> i mappen <em>Downloads</em>, under <em>User_name</em>, under <em>Users</em>.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="beskrivande-statistik.html#cb69-1" tabindex="-1"></a><span class="fu">library</span>(readxl)  <span class="co"># Ladda readxl</span></span></code></pre></div>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="beskrivande-statistik.html#cb70-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;C:/Users/Name/Downloads/Gapminder.xlsx&quot;</span>)</span>
<span id="cb70-2"><a href="beskrivande-statistik.html#cb70-2" tabindex="-1"></a><span class="co"># Läs in från en lokal excelfil</span></span>
<span id="cb70-3"><a href="beskrivande-statistik.html#cb70-3" tabindex="-1"></a>gapminder</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-24" class="exercise"><strong>Uppgift 2.2  (Importera från excelfil) </strong></span>Var ligger den nedladdade filen <em>Gapminder.xlsx</em>? Gör lämplig ändring i koden ovan för att läsa in data från den filen. Notera att R använder högerlutande snedstreck <code>/</code>, så om en kopierad sökväg har vänster-snedstreck måste de ändras. Kontrollera att datan blivit korrekt inläst genom att köra objektnamnet <code>gapminder</code>.</p>
</div>
<p>En R-session har alltid en grundmapp, ett <em>Working directory</em>. Man kan se vilken mapp det är genom att köra</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="beskrivande-statistik.html#cb71-1" tabindex="-1"></a><span class="fu">getwd</span>() <span class="co"># Ange working directory</span></span></code></pre></div>
<p>En filsökväg kan anges antingen som en fullständig sökväg, som ovan, eller relativt <em>working directory</em>. Om man till exempel har en fil <em>Gapminder.xlsx</em> som ligger i en mapp <em>Data</em> som i sin tur ligger i <em>working directory</em>, kan man importera data från filen med</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="beskrivande-statistik.html#cb72-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;Data/Gapminder.xlsx&quot;</span>)</span>
<span id="cb72-2"><a href="beskrivande-statistik.html#cb72-2" tabindex="-1"></a><span class="co"># Läs in från en lokal excelfil (relativt wd)</span></span>
<span id="cb72-3"><a href="beskrivande-statistik.html#cb72-3" tabindex="-1"></a>gapminder </span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-25" class="exercise"><strong>Uppgift 2.3  (Working directory) </strong></span>Identifiera <em>working directory</em> för din nuvarande Rs-session genom att köra <code>getwd()</code>.</p>
</div>
<p>RStudio har också en inbyggd funktionalitet för att importera data. Man kan hitta den genom att gå till <em>Environment</em>-fliken och sedan <em>Import Dataset</em>. Det kan vara en bra hjälp, i synnerhet om man vill sätta datatyp för någon specifik kolumn.</p>
<p>Om du inte har tillgång till Canvas kan Gapminder-datan alternativt hämtas från paketet Gapminder.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="beskrivande-statistik.html#cb73-1" tabindex="-1"></a><span class="co"># install.packages(&quot;gapminder&quot;)</span></span>
<span id="cb73-2"><a href="beskrivande-statistik.html#cb73-2" tabindex="-1"></a><span class="fu">library</span>(gapminder)             </span>
<span id="cb73-3"><a href="beskrivande-statistik.html#cb73-3" tabindex="-1"></a>gapminder                      </span></code></pre></div>
</div>
<div id="ändra-och-skapa-nya-kolumner-med-mutate" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Ändra och skapa nya kolumner med <code>mutate</code><a href="beskrivande-statistik.html#ändra-och-skapa-nya-kolumner-med-mutate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Variabler kan omräknas och nya variabler kan skapas med <code>mutate</code>-funktionen. I gapminder-datan finns bnp per capita. Om man vill ha nationell BNP kan man skapa en ny kolumn och beräkna den som bnp per capita gånger populationen.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="beskrivande-statistik.html#cb74-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>             <span class="co"># Ta datan, och sen</span></span>
<span id="cb74-2"><a href="beskrivande-statistik.html#cb74-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp =</span> gdpPercap <span class="sc">*</span> pop)        <span class="co"># Beräkna bnp</span></span></code></pre></div>
<p>Den inledande delen med <code>gapminder &lt;-</code> gör så att utfallet av beräkningen sparas i objektet <code>gapminder</code>.
Vi kan skriva ut objektet och se resultatet av beräkningen:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="beskrivande-statistik.html#cb75-1" tabindex="-1"></a>gapminder</span></code></pre></div>
<p>Om man vill skapa en kolumn med mellanrum i namnet måste man skriva namnet inom <em>backticks</em> ` för att ange att namnet ska tolkas som en enhet. Jag rekommenderar att undvika mellanrum i kolumnnamn och istället använda stora bokstäver eller understreck för ett nytt ord (<code>NationalGDP</code> eller <code>National_GDP</code>).</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="beskrivande-statistik.html#cb76-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="beskrivande-statistik.html#cb76-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">National GDP</span><span class="st">`</span> <span class="ot">=</span> gdpPercap <span class="sc">*</span> pop)</span>
<span id="cb76-3"><a href="beskrivande-statistik.html#cb76-3" tabindex="-1"></a>gapminder</span></code></pre></div>
</div>
<div id="sammanfattande-lägesmått" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Sammanfattande lägesmått<a href="beskrivande-statistik.html#sammanfattande-lägesmått" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Den importerade datan anger medellivslängd, populationsstorlek och bnp per capita per land och år. Vi kan börja med att producera en bubbelgraf över datan - en av de presentationer Gapminder ofta använder. En bubbelgraf är ett spridningsdiagram där punktens storlek beror på en tredje variabel.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="beskrivande-statistik.html#cb77-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, </span>
<span id="cb77-2"><a href="beskrivande-statistik.html#cb77-2" tabindex="-1"></a>                      <span class="at">size =</span> pop, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb77-3"><a href="beskrivande-statistik.html#cb77-3" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb77-4"><a href="beskrivande-statistik.html#cb77-4" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> year)</span></code></pre></div>
<p>En interaktiv version kan vara bra om man vill identifiera någon specifik punkt.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="beskrivande-statistik.html#cb78-1" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">size =</span> pop, </span>
<span id="cb78-2"><a href="beskrivande-statistik.html#cb78-2" tabindex="-1"></a>                           <span class="at">color =</span> continent, <span class="at">text =</span> country)) <span class="sc">+</span></span>
<span id="cb78-3"><a href="beskrivande-statistik.html#cb78-3" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb78-4"><a href="beskrivande-statistik.html#cb78-4" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> year)</span>
<span id="cb78-5"><a href="beskrivande-statistik.html#cb78-5" tabindex="-1"></a></span>
<span id="cb78-6"><a href="beskrivande-statistik.html#cb78-6" tabindex="-1"></a><span class="co"># install.packages(&quot;plotly&quot;)  # Kör om ej installerat tidigare</span></span>
<span id="cb78-7"><a href="beskrivande-statistik.html#cb78-7" tabindex="-1"></a><span class="fu">library</span>(plotly)               <span class="co"># Ladda paketet plotly</span></span>
<span id="cb78-8"><a href="beskrivande-statistik.html#cb78-8" tabindex="-1"></a><span class="fu">ggplotly</span>(g)                   <span class="co"># Interaktiv graf g</span></span></code></pre></div>
<p>Under föreläsningen såg vi exempel på två lägesmått: medelvärdet (egentligen det <em>aritmetiska</em> medelvärdet) och medianen. De har bägge enkla funktioner i R: <code>mean()</code> respektive <code>median()</code>. Vi plockar ut en variabel ur datan och beräknar bägge.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="beskrivande-statistik.html#cb79-1" tabindex="-1"></a>gapminder<span class="sc">$</span>gdpPercap         <span class="co"># Vektorn med data</span></span>
<span id="cb79-2"><a href="beskrivande-statistik.html#cb79-2" tabindex="-1"></a><span class="fu">mean</span>(gapminder<span class="sc">$</span>gdpPercap)   <span class="co"># Beräkna medelvärdet</span></span>
<span id="cb79-3"><a href="beskrivande-statistik.html#cb79-3" tabindex="-1"></a><span class="fu">median</span>(gapminder<span class="sc">$</span>gdpPercap) <span class="co"># Beräkna medianen</span></span></code></pre></div>
<p>Samma sak kan göras med en pipe <code>%&gt;%</code> och <code>summarise()</code>.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="beskrivande-statistik.html#cb80-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb80-2"><a href="beskrivande-statistik.html#cb80-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap),</span>
<span id="cb80-3"><a href="beskrivande-statistik.html#cb80-3" tabindex="-1"></a>            <span class="at">Median =</span> <span class="fu">median</span>(gdpPercap))</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-26" class="exercise"><strong>Uppgift 2.4  (Lägesmått av livslängd) </strong></span>Gör lämpliga ändringar i exemplet ovan för att beräkna lägesmått för medellivslängd (<code>lifeExp</code>).</p>
</div>
<p>Den andra lösningen, med en pipe och <code>summarise()</code>, kan enkelt utvecklas med ett <code>group_by()</code>-steg för att beräkna medel och median per någon grupp, t.ex. per år.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="beskrivande-statistik.html#cb81-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span>                           <span class="co"># Ta datan, och sen</span></span>
<span id="cb81-2"><a href="beskrivande-statistik.html#cb81-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span>                    <span class="co"># gruppera efter år, och</span></span>
<span id="cb81-3"><a href="beskrivande-statistik.html#cb81-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap),     <span class="co"># beräkna medelvärde och</span></span>
<span id="cb81-4"><a href="beskrivande-statistik.html#cb81-4" tabindex="-1"></a>            <span class="at">Median =</span> <span class="fu">median</span>(gdpPercap)) <span class="co"># medianen av gdpPercap</span></span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-27" class="exercise"><strong>Uppgift 2.5  (Lägesmått per kontinent) </strong></span>Gör lämpliga ändringar i exemplet ovan för att beräkna lägesmått per kontinent. Vad måste läggas till för att också beräkna maximum och minimum per kontinent (funktionerna <code>max()</code> och <code>min()</code>)?</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-28" class="exercise"><strong>Uppgift 2.6  (Upprepade mätningar) </strong></span>Finns det några problem med att beräkna medelvärde per kontinent på den här datan?</p>
</div>
<p>I vetenskapliga publikationer redovisas medelvärden ofta med ett stapeldiagram. Som exempel ges staplar för medelvärdet av bnp per kontinent för 2007.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="beskrivande-statistik.html#cb82-1" tabindex="-1"></a>dat_gdp_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>       <span class="co"># Ta datan, och sen</span></span>
<span id="cb82-2"><a href="beskrivande-statistik.html#cb82-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>          <span class="co"># filtrera för 2007, och sen</span></span>
<span id="cb82-3"><a href="beskrivande-statistik.html#cb82-3" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span>           <span class="co"># gruppera kontinenter, och</span></span>
<span id="cb82-4"><a href="beskrivande-statistik.html#cb82-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap)) <span class="co"># beräkna medelvärdet</span></span>
<span id="cb82-5"><a href="beskrivande-statistik.html#cb82-5" tabindex="-1"></a></span>
<span id="cb82-6"><a href="beskrivande-statistik.html#cb82-6" tabindex="-1"></a><span class="fu">ggplot</span>(dat_gdp_2007, <span class="fu">aes</span>(continent, Mean)) <span class="sc">+</span></span>
<span id="cb82-7"><a href="beskrivande-statistik.html#cb82-7" tabindex="-1"></a>  <span class="fu">geom_col</span>()                  <span class="co"># Illustrera med kolumner (columns)</span></span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-29" class="exercise"><strong>Uppgift 2.7  (Graf för livslängd) </strong></span>Gör om stapeldiagrammet. Denna gång med livslängd (<code>lifeExp</code>) istället för bnp per capita (<code>gdpPercap</code>).</p>
</div>
</div>
<div id="sammanfattande-spridningsmått" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Sammanfattande spridningsmått<a href="beskrivande-statistik.html#sammanfattande-spridningsmått" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Under föreläsningarna såg vi några mått på spridning: varians, standardavvikelse och kvartilavstånd (IQR, <em>inter-quartile range</em>). De har alla motsvarande funktioner i R (<code>var()</code>, <code>sd()</code>, och <code>IQR()</code>) som kan användas på samma sätt som funktionerna för lägesmått.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="beskrivande-statistik.html#cb83-1" tabindex="-1"></a>gapminder<span class="sc">$</span>gdpPercap      <span class="co"># Vektorn med data</span></span>
<span id="cb83-2"><a href="beskrivande-statistik.html#cb83-2" tabindex="-1"></a></span>
<span id="cb83-3"><a href="beskrivande-statistik.html#cb83-3" tabindex="-1"></a><span class="fu">var</span>(gapminder<span class="sc">$</span>gdpPercap) <span class="co"># Beräkna varians</span></span>
<span id="cb83-4"><a href="beskrivande-statistik.html#cb83-4" tabindex="-1"></a><span class="fu">sd</span>(gapminder<span class="sc">$</span>gdpPercap)  <span class="co"># Beräkna standardavvikelse</span></span>
<span id="cb83-5"><a href="beskrivande-statistik.html#cb83-5" tabindex="-1"></a><span class="fu">IQR</span>(gapminder<span class="sc">$</span>gdpPercap) <span class="co"># Beräkna kvartilavstånd</span></span></code></pre></div>
<p>Alternativt med en pipe och <code>summarise()</code>.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="beskrivande-statistik.html#cb84-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span>                       <span class="co"># Ta datan, och</span></span>
<span id="cb84-2"><a href="beskrivande-statistik.html#cb84-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Var =</span> <span class="fu">var</span>(gdpPercap),   <span class="co"># beräkna varians,</span></span>
<span id="cb84-3"><a href="beskrivande-statistik.html#cb84-3" tabindex="-1"></a>            <span class="at">Sd =</span> <span class="fu">sd</span>(gdpPercap),     <span class="co"># standardavvikelse,</span></span>
<span id="cb84-4"><a href="beskrivande-statistik.html#cb84-4" tabindex="-1"></a>            <span class="at">IQR =</span> <span class="fu">IQR</span>(gdpPercap))   <span class="co"># och kvartilavstånd</span></span></code></pre></div>
<p>Lösningen med pipe och <code>summarise()</code> kan som tidigare utvecklas med <code>group_by()</code>.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="beskrivande-statistik.html#cb85-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="beskrivande-statistik.html#cb85-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb85-3"><a href="beskrivande-statistik.html#cb85-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Varians =</span> <span class="fu">var</span>(gdpPercap),</span>
<span id="cb85-4"><a href="beskrivande-statistik.html#cb85-4" tabindex="-1"></a>            <span class="at">Standardavvikelse =</span> <span class="fu">sd</span>(gdpPercap),</span>
<span id="cb85-5"><a href="beskrivande-statistik.html#cb85-5" tabindex="-1"></a>            Kvartilavstånd <span class="ot">=</span> <span class="fu">IQR</span>(gdpPercap))</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-30" class="exercise"><strong>Uppgift 2.8  (Graf för livslängd) </strong></span>Gör lämpliga ändringar i det sista exempel för att istället beräkna spridningsmått för livslängd.</p>
</div>
<p>Vi avslutar med tre vanliga illustrationer av vetenskaplig data - ett linjediagram med felstaplar, ett stapeldiagram med felstaplar, och ett lådagram. För linjediagrammet beräknar vi medelvärdet och spridningsmått för bnp över år och kontinent. Som spridningsmått använder vi standard error (sv. <em>medelfel</em>), vilket beräknas som standardavvikelse delat på roten ur antalet observationer. Funktionen <code>n()</code> ger antalet observationer per kontinent och år.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="beskrivande-statistik.html#cb86-1" tabindex="-1"></a>dat_year_continent <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb86-2"><a href="beskrivande-statistik.html#cb86-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year, continent) <span class="sc">%&gt;%</span></span>
<span id="cb86-3"><a href="beskrivande-statistik.html#cb86-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap),</span>
<span id="cb86-4"><a href="beskrivande-statistik.html#cb86-4" tabindex="-1"></a>            <span class="at">SE =</span> <span class="fu">sd</span>(gdpPercap) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">n</span>()))</span>
<span id="cb86-5"><a href="beskrivande-statistik.html#cb86-5" tabindex="-1"></a>dat_year_continent</span></code></pre></div>
<p>Med <code>ggplot2</code> kan vi bygga ett linjediagram med <code>geom_line()</code> och lägga till felstaplar med <code>geom_errorbar()</code>. Den senare behöver <code>aes()</code>-argument för <code>ymin</code> och <code>ymax</code> - nedre och övre del av felstapeln. Vi sätter dem till medelvärdet minus respektive plus ett medelfel.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="beskrivande-statistik.html#cb87-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_year_continent, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> Mean, </span>
<span id="cb87-2"><a href="beskrivande-statistik.html#cb87-2" tabindex="-1"></a>                               <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb87-3"><a href="beskrivande-statistik.html#cb87-3" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb87-4"><a href="beskrivande-statistik.html#cb87-4" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SE, <span class="at">ymax =</span> Mean <span class="sc">+</span> SE))</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-31" class="exercise"><strong>Uppgift 2.9  (Bredd) </strong></span>Felstaplarna från <code>geom_errorbar()</code> har väldigt breda ändar. Använd hjälpsidan för geomet <code>?geom_errorbar</code>, i synnerhet exemplen längst ned, och se om det går att ändra bredden.</p>
</div>
<p>En graf med staplar och felstaplar kan konstrueras på ett liknande sätt. Följande exempel visar staplar över livslängd per kontinent. Felstapeln ges av standardavvikelsen.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="beskrivande-statistik.html#cb88-1" tabindex="-1"></a>dat_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>          <span class="co"># Ta datan, och sen</span></span>
<span id="cb88-2"><a href="beskrivande-statistik.html#cb88-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>        <span class="co"># filtrera på år, och sen</span></span>
<span id="cb88-3"><a href="beskrivande-statistik.html#cb88-3" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span>         <span class="co"># gruppera efter kontinent,</span></span>
<span id="cb88-4"><a href="beskrivande-statistik.html#cb88-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(lifeExp), <span class="co"># summera med medelvärde,</span></span>
<span id="cb88-5"><a href="beskrivande-statistik.html#cb88-5" tabindex="-1"></a>            <span class="at">SD =</span> <span class="fu">sd</span>(lifeExp))     <span class="co"># och standardavvikelse</span></span>
<span id="cb88-6"><a href="beskrivande-statistik.html#cb88-6" tabindex="-1"></a>dat_2007</span></code></pre></div>
<p>Vi bygger en ggplot med <code>geom_col()</code> och <code>geom_errorbar()</code>. Felstapels konstruktion kan anges i en notis med funktionen <code>labs()</code>.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="beskrivande-statistik.html#cb89-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_2007, <span class="fu">aes</span>(continent, Mean, <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb89-2"><a href="beskrivande-statistik.html#cb89-2" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span>                                            </span>
<span id="cb89-3"><a href="beskrivande-statistik.html#cb89-3" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SD, <span class="at">ymax =</span> Mean <span class="sc">+</span> SD)) <span class="sc">+</span></span>
<span id="cb89-4"><a href="beskrivande-statistik.html#cb89-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Average life expectancy by continent, 2007&quot;</span>,</span>
<span id="cb89-5"><a href="beskrivande-statistik.html#cb89-5" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Errorbars given by mean +/- standard deviation.</span></span>
<span id="cb89-6"><a href="beskrivande-statistik.html#cb89-6" tabindex="-1"></a><span class="st">       Source: Gapminder&quot;</span>)</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-32" class="exercise"><strong>Uppgift 2.10  (Staplar för 1982) </strong></span>Gör lämpliga ändringar i exempel ovan för att konstruera ett stapeldiagram med felstaplar för året 1982 och variabeln medellivslängd.</p>
</div>
<p>Ett lådagram anger fördelningen av en variabel genom att illustrera minimum, maximum och kvartiler. Kvartiler är mått som delar en datamängd i fyra lika stora delar (så att en fjärdedel ligger under första kvartilen, en fjärdedel mellan första och andra kvartil, och så vidare). Med <code>ggplot2</code> kan vi bygga ett lådagram med <code>geom_boxplot()</code>. Exempel ger en låda per år och kontinent.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="beskrivande-statistik.html#cb90-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(year, lifeExp, <span class="at">fill =</span> continent, </span>
<span id="cb90-2"><a href="beskrivande-statistik.html#cb90-2" tabindex="-1"></a>                      <span class="at">group =</span> year)) <span class="sc">+</span></span>
<span id="cb90-3"><a href="beskrivande-statistik.html#cb90-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span>                                                     </span>
<span id="cb90-4"><a href="beskrivande-statistik.html#cb90-4" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> continent)                                              </span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-33" class="exercise"><strong>Uppgift 2.11  (Group-argumentet) </strong></span>I lådagrammet används argumentet <code>group</code>. Vad gör det? Vad händer om man tar bort det?</p>
</div>
</div>
<div id="ordna-upp-beskrivande-statistik-och-exportera" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Ordna upp beskrivande statistik och exportera<a href="beskrivande-statistik.html#ordna-upp-beskrivande-statistik-och-exportera" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Efter att ha beräknat någon beskrivande statistik kan det vara bra att titta på hur resultaten kan snyggas upp och exporteras i något lämpligt format. Ta den tabell med medelvärden vi producerade i ett tidigare exempel.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="beskrivande-statistik.html#cb91-1" tabindex="-1"></a>dat_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>         <span class="co"># Ta datan, och sen</span></span>
<span id="cb91-2"><a href="beskrivande-statistik.html#cb91-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>        <span class="co"># filtrera på år, och sen</span></span>
<span id="cb91-3"><a href="beskrivande-statistik.html#cb91-3" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span>         <span class="co"># gruppera efter kontinent,</span></span>
<span id="cb91-4"><a href="beskrivande-statistik.html#cb91-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(lifeExp), <span class="co"># summera med medelvärde,</span></span>
<span id="cb91-5"><a href="beskrivande-statistik.html#cb91-5" tabindex="-1"></a>            <span class="at">SD =</span> <span class="fu">sd</span>(lifeExp))     <span class="co"># och standardavvikelse</span></span>
<span id="cb91-6"><a href="beskrivande-statistik.html#cb91-6" tabindex="-1"></a>dat_2007</span></code></pre></div>
<p>Objekt kan exporteras från R på liknande som det importeras - med särskilda exportfunktioner (<em>write</em>-funktioner) beroende på filtyp. För att exportera till en csv-fil man man använda <code>write_csv()</code>. Ingående argument är det objekt man vill exportera och den fil man vill exportera till. R ger ingen varning om man skriver över en existerande fil, så var lite försiktiga här.</p>
<p>Precis som vid import använder R <em>working directory</em> om inget annat anges. Följande exporterar objektet <code>dat_2007</code> till en csv-fil <em>Exporterad data från R.csv</em> i <em>working directory</em>.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="beskrivande-statistik.html#cb92-1" tabindex="-1"></a><span class="fu">getwd</span>()                          <span class="co"># Se nuvarande working directory</span></span>
<span id="cb92-2"><a href="beskrivande-statistik.html#cb92-2" tabindex="-1"></a><span class="fu">write_csv</span>(dat_2007, <span class="st">&quot;Exporterad data från R.csv&quot;</span>) <span class="co"># Exportera data</span></span></code></pre></div>
<p>Därifrån skulle man kunna öppna filen i något kalkylprogram, snygga till layouten, och sedan klippa in i ett textdokument.</p>
</div>
<div id="kumulativt-medelvärde" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Kumulativt medelvärde<a href="beskrivande-statistik.html#kumulativt-medelvärde" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Om man har data som av någon anledning samlas in i sekvens kan det vara intressant att beräkna och illustrera den med ett <em>kumulativt medelvärde</em>. En serie med kumulativa medelvärden beräknas genom att för varje nytt värde ta medelvärden av de värden man hittills samlat in - vid tio värden tar man medelvärdet av de tio, vid elva värden medelvärdet av de elva, och så vidare.</p>
<p>Med de tärningsvärden vi hade innan kan vi beräkna ett kumulativt medelvärde genom att först beräkna summan med <code>cumsum()</code> och sedan dela på antalet kast. För att förenkla beräkningen av antalen tar vi fram sekvensen med antal kast i ett <code>mutate()</code>-steg.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="beskrivande-statistik.html#cb93-1" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Utfall =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb93-2"><a href="beskrivande-statistik.html#cb93-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Kast =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>())                           </span>
<span id="cb93-3"><a href="beskrivande-statistik.html#cb93-3" tabindex="-1"></a>dat_dice</span>
<span id="cb93-4"><a href="beskrivande-statistik.html#cb93-4" tabindex="-1"></a></span>
<span id="cb93-5"><a href="beskrivande-statistik.html#cb93-5" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> dat_dice <span class="sc">%&gt;%</span></span>
<span id="cb93-6"><a href="beskrivande-statistik.html#cb93-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">kumulativ_summa =</span> <span class="fu">cumsum</span>(Utfall),  </span>
<span id="cb93-7"><a href="beskrivande-statistik.html#cb93-7" tabindex="-1"></a>         kumulativt_medelvärde <span class="ot">=</span> kumulativ_summa <span class="sc">/</span> Kast)</span>
<span id="cb93-8"><a href="beskrivande-statistik.html#cb93-8" tabindex="-1"></a>dat_dice</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-34" class="exercise"><strong>Uppgift 2.12  (Kumulativt medelvärde) </strong></span>Vad ska läggas till för att stycket nedan ska ge en linjegraf över medelvärdet?</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="beskrivande-statistik.html#cb94-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_dice, <span class="fu">aes</span>(<span class="at">x =</span> Kast, <span class="at">y =</span> ___)) <span class="sc">+</span></span>
<span id="cb94-2"><a href="beskrivande-statistik.html#cb94-2" tabindex="-1"></a>  <span class="fu">___</span>()</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-35" class="exercise"><strong>Uppgift 2.13  (Fler tärningskast) </strong></span>Kasta din tärning ytterligare några gånger, gärna på en mjuk yta. Fyll i dina utfall och gör grafen från föregående uppgift. Kan man se en tendens för medelvärdet att minska i varians vid fler kast? Svänger kurvan in mot något specifikt värde?</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="beskrivande-statistik.html#cb95-1" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Utfall =</span> <span class="fu">c</span>(___)) <span class="sc">%&gt;%</span> </span>
<span id="cb95-2"><a href="beskrivande-statistik.html#cb95-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Kast =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>(),                                 </span>
<span id="cb95-3"><a href="beskrivande-statistik.html#cb95-3" tabindex="-1"></a>         <span class="at">kumulativ_summa =</span> <span class="fu">cumsum</span>(Utfall),           </span>
<span id="cb95-4"><a href="beskrivande-statistik.html#cb95-4" tabindex="-1"></a>         kumulativt_medelvärde <span class="ot">=</span> kumulativ_summa <span class="sc">/</span> Kast)</span>
<span id="cb95-5"><a href="beskrivande-statistik.html#cb95-5" tabindex="-1"></a>dat_dice</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-36" class="exercise"><strong>Uppgift 2.14  (Kumulativ frekvens) </strong></span>Om man vill titta på andelen gånger ett visst utfall inträffat talar man om <em>kumulativ frekvens</em> snarare än <em>kumulativt medelvärde</em>. Använd stycket nedan för att titta på andelen gånger utfallet varit en etta (ett <em>positivt</em> utfall, i begreppets kliniska mening). Om ett inte är ett möjligt utfall på din tärning, ändra ettan till något mer lämpligt.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="beskrivande-statistik.html#cb96-1" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Utfall =</span> <span class="fu">c</span>(___)) <span class="sc">%&gt;%</span> </span>
<span id="cb96-2"><a href="beskrivande-statistik.html#cb96-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Kast =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>(),</span>
<span id="cb96-3"><a href="beskrivande-statistik.html#cb96-3" tabindex="-1"></a>         <span class="at">positivt_utfall =</span> Utfall <span class="sc">==</span> <span class="dv">1</span>,              </span>
<span id="cb96-4"><a href="beskrivande-statistik.html#cb96-4" tabindex="-1"></a>         <span class="at">kumulativt_antal =</span> <span class="fu">cumsum</span>(positivt_utfall),</span>
<span id="cb96-5"><a href="beskrivande-statistik.html#cb96-5" tabindex="-1"></a>         <span class="at">kumulativ_frekvens =</span> kumulativt_antal <span class="sc">/</span> Kast)</span>
<span id="cb96-6"><a href="beskrivande-statistik.html#cb96-6" tabindex="-1"></a>dat_dice</span>
<span id="cb96-7"><a href="beskrivande-statistik.html#cb96-7" tabindex="-1"></a></span>
<span id="cb96-8"><a href="beskrivande-statistik.html#cb96-8" tabindex="-1"></a><span class="fu">ggplot</span>(dat_dice, <span class="fu">aes</span>(<span class="at">x =</span> Kast, <span class="at">y =</span> kumulativ_frekvens)) <span class="sc">+</span></span>
<span id="cb96-9"><a href="beskrivande-statistik.html#cb96-9" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
</div>
</div>
<div id="tredimensionella-grafer-med-plotly" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Tredimensionella grafer med <code>plotly</code><a href="beskrivande-statistik.html#tredimensionella-grafer-med-plotly" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>De två avslutande avsnitten är mindre viktiga och kan läsas i mån av tid.</p>
<p>Paketet <code>plotly</code> kan användas för att göra interaktiva graf och grafer med tre dimensioner. Börja med att ladda paketet.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="beskrivande-statistik.html#cb97-1" tabindex="-1"></a><span class="fu">library</span>(plotly)</span></code></pre></div>
<p>Vi börjar med ett enkelt exempel på en 3d-graf med lite skapad data.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="beskrivande-statistik.html#cb98-1" tabindex="-1"></a>dat_ex <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Var1 =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">Var2 =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb98-2"><a href="beskrivande-statistik.html#cb98-2" tabindex="-1"></a>                     <span class="at">Var3 =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>), <span class="at">Type =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>))</span>
<span id="cb98-3"><a href="beskrivande-statistik.html#cb98-3" tabindex="-1"></a>dat_ex</span>
<span id="cb98-4"><a href="beskrivande-statistik.html#cb98-4" tabindex="-1"></a></span>
<span id="cb98-5"><a href="beskrivande-statistik.html#cb98-5" tabindex="-1"></a><span class="fu">plot_ly</span>(dat_ex, <span class="at">x =</span> <span class="sc">~</span>Var1, <span class="at">y =</span> <span class="sc">~</span>Var2, </span>
<span id="cb98-6"><a href="beskrivande-statistik.html#cb98-6" tabindex="-1"></a>        <span class="at">z =</span> <span class="sc">~</span>Var3, <span class="at">color =</span> <span class="sc">~</span>Type) <span class="sc">%&gt;%</span></span>
<span id="cb98-7"><a href="beskrivande-statistik.html#cb98-7" tabindex="-1"></a>  <span class="fu">add_markers</span>()</span></code></pre></div>
<p>Om grafen inte kommer upp direkt kan det fungera att trycka på den lilla ikonen med ett fönster och en pil i <em>Viewer</em>-fliken. Grafen ska då öppnas i en webbläsare.</p>
<p>Syntaxen till <code>plot_ly()</code> är inte helt olik <code>ggplot()</code>. Först anges datan, därefter argument för x- y-, och z-koordinater. Notera tilde-tecknet <code>~</code> före variabelnamnen. Eventuell färg sätts med <code>color</code>. Efter det lägger man till punkter (här <em>markers</em>) med en pipe in i <code>add_markers()</code>. Vi vill göra en liknande graf med gapminder-datan, men får börja med att filtrera på ett visst år.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-37" class="exercise"><strong>Uppgift 2.15  (Filtrera för år) </strong></span>Vad måste läggas till i funktionen nedan för att filtrera för data där året är 2007?</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="beskrivande-statistik.html#cb99-1" tabindex="-1"></a>dat_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="beskrivande-statistik.html#cb99-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> ___)</span></code></pre></div>
</div>
<p>Vi kan nu konstruera en 3d-graf med datan.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-38" class="exercise"><strong>Uppgift 2.16  (Gapminder i 3d) </strong></span>Vad måste läggas till i funktionen nedan för en 3d-graf med befolkningsmängd (<code>pop</code>) på x-axeln, livslängd (<code>lifeExp</code>) på y-axeln, bnp per capita (<code>gdpPercap</code>) på z-axeln, och färg efter kontinent (<code>continent</code>)? För att kunna identifiera specifika länder kan man också sätta argumentet <code>text</code>.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="beskrivande-statistik.html#cb100-1" tabindex="-1"></a><span class="fu">plot_ly</span>(data_2007, <span class="at">x =</span> <span class="sc">~</span>pop, <span class="at">y =</span> <span class="sc">~</span>___, <span class="at">z =</span> <span class="sc">~</span>___, </span>
<span id="cb100-2"><a href="beskrivande-statistik.html#cb100-2" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>continent, <span class="at">text =</span> <span class="sc">~</span>country) <span class="sc">%&gt;%</span> </span>
<span id="cb100-3"><a href="beskrivande-statistik.html#cb100-3" tabindex="-1"></a>  <span class="fu">add_markers</span>()</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-39" class="exercise"><strong>Uppgift 2.17  (Log-transformationer) </strong></span>Inom statistiken är det vanligt att transformera variabler för att ta bort extremeffekter och visa på specifika dataegenskaper. En vanlig transform är att <em>logaritmera</em> ett värde, vilket innebär att man istället för att använda det ursprungliga värdet använder exponenten i någon bas (ofta basen tio). Ta till exempel värdet 10000, dess tio-logaritm är 4, eftersom 10 upphöjt i 4 är 10000. Logaritmer är vanliga vid data med extremvärden.</p>
<p>Grafen i uppgiften ovan präglas mycket av skillnader i bnp och befolkningsstorlek. Testa att tio-logaritmera variablerna och se om det blir en mer eller mindre överskådlig graf. Logaritmen kan göras genom att byta den ursprungliga variabeln mot en variabel transformerad med <code>log10()</code>. Fyll i stycket nedan.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="beskrivande-statistik.html#cb101-1" tabindex="-1"></a><span class="fu">plot_ly</span>(dat_2007, <span class="at">x =</span> <span class="sc">~</span><span class="fu">log10</span>(pop), <span class="at">y =</span> <span class="sc">~</span><span class="fu">log10</span>(___), </span>
<span id="cb101-2"><a href="beskrivande-statistik.html#cb101-2" tabindex="-1"></a>        <span class="at">z =</span> <span class="sc">~</span>___, <span class="at">color =</span> <span class="sc">~</span>___, <span class="at">text =</span> <span class="sc">~</span>country) <span class="sc">%&gt;%</span> </span>
<span id="cb101-3"><a href="beskrivande-statistik.html#cb101-3" tabindex="-1"></a>  <span class="fu">add_markers</span>()</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-40" class="exercise"><strong>Uppgift 2.18  (Följa ett land) </strong></span>Likt en ggplot kan man lägga till graf-element. Här använder man dock en pipe för lägga till ett nytt element. Fyll i kodstycket nedan. Vad, om något, har lagts till i grafen?</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="beskrivande-statistik.html#cb102-1" tabindex="-1"></a><span class="fu">plot_ly</span>(dat_2007, <span class="at">x =</span> <span class="sc">~</span><span class="fu">log10</span>(pop), <span class="at">y =</span> <span class="sc">~</span><span class="fu">log10</span>(___), </span>
<span id="cb102-2"><a href="beskrivande-statistik.html#cb102-2" tabindex="-1"></a>        <span class="at">z =</span> <span class="sc">~</span>___, <span class="at">color =</span> <span class="sc">~</span>continent, <span class="at">text =</span> <span class="sc">~</span>country) <span class="sc">%&gt;%</span> </span>
<span id="cb102-3"><a href="beskrivande-statistik.html#cb102-3" tabindex="-1"></a>  <span class="fu">add_markers</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb102-4"><a href="beskrivande-statistik.html#cb102-4" tabindex="-1"></a>  <span class="fu">add_lines</span>(<span class="at">data =</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Costa Rica&quot;</span>))</span></code></pre></div>
</div>
</div>
<div id="ai-uppgift-ii" class="section level2 hasAnchor" number="2.9">
<h2><span class="header-section-number">2.9</span> AI-uppgift II<a href="beskrivande-statistik.html#ai-uppgift-ii" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="exercise">
<p><span id="exr:unlabeled-div-41" class="exercise"><strong>Uppgift 2.19  (Standardavvikelse från gapminder-datan) </strong></span>Använd en chatbot (såsom Microsofts co-pilot eller OpenAIs ChatGPT) för att få kod som beräknar standardavvikelsen av medellivslängd från gapminder-datan. Fråga också om tolkning av standardavvikelsen och om det finns några specifika tolkningsproblem för just den här gapminder-datan.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-42" class="exercise"><strong>Uppgift 2.20  (3d-graf återigen) </strong></span>Använd en chatbot för att få kod som skapar en 3d-graf lik den vi skapade ovan. Se om det går att utveckla grafen ytterligare, t.ex. med en linje som går ner till grafens <em>botten</em>, eller linjer som kopplar samma länder till kontinentens medelvärde.</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="datahantering-och-grafer.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ett-stickprov-av-normalfördelad-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-anvisningar.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
