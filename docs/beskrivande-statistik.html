<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapitel 2 Beskrivande statistik | R-anvisningar till Grundläggande statistik</title>
  <meta name="description" content="Kapitel 2 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapitel 2 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapitel 2 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  
  
  



<meta name="date" content="2024-10-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="datahantering-och-grafer.html"/>
<link rel="next" href="slumpvariabler.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R-anvisningar</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduktion</a></li>
<li class="chapter" data-level="" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html"><i class="fa fa-check"></i>Installation av R och RStudio</a>
<ul>
<li class="chapter" data-level="0.1" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#inledning"><i class="fa fa-check"></i><b>0.1</b> Inledning</a></li>
<li class="chapter" data-level="0.2" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#installation-av-r"><i class="fa fa-check"></i><b>0.2</b> Installation av R</a></li>
<li class="chapter" data-level="0.3" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#installation-av-rstudio"><i class="fa fa-check"></i><b>0.3</b> Installation av RStudio</a></li>
<li class="chapter" data-level="0.4" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#gränssnittet-i-rstudio"><i class="fa fa-check"></i><b>0.4</b> Gränssnittet i RStudio</a></li>
<li class="chapter" data-level="0.5" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#paket-i-r"><i class="fa fa-check"></i><b>0.5</b> Paket i R</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html"><i class="fa fa-check"></i><b>1</b> Datahantering och grafer</a>
<ul>
<li class="chapter" data-level="1.1" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#uppstart-och-orientering"><i class="fa fa-check"></i><b>1.1</b> Uppstart och orientering</a></li>
<li class="chapter" data-level="1.2" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#packages-från-cran"><i class="fa fa-check"></i><b>1.2</b> <em>Packages</em> från CRAN</a></li>
<li class="chapter" data-level="1.3" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#objekt-och-funktioner"><i class="fa fa-check"></i><b>1.3</b> Objekt och funktioner</a></li>
<li class="chapter" data-level="1.4" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#sekvenser-av-funktioner"><i class="fa fa-check"></i><b>1.4</b> Sekvenser av funktioner</a></li>
<li class="chapter" data-level="1.5" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#datainskrivning-och-dataimport-från-web"><i class="fa fa-check"></i><b>1.5</b> Datainskrivning och dataimport från web</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#inskrivning-av-data"><i class="fa fa-check"></i><b>1.5.1</b> Inskrivning av data</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#urval-ur-en-tabell-med-select-och-filter"><i class="fa fa-check"></i><b>1.6</b> Urval ur en tabell med <code>select</code> och <code>filter</code></a></li>
<li class="chapter" data-level="1.7" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#grafer-med-ggplot2"><i class="fa fa-check"></i><b>1.7</b> Grafer med <code>ggplot2</code></a></li>
<li class="chapter" data-level="1.8" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#ai-uppgift-i"><i class="fa fa-check"></i><b>1.8</b> AI-uppgift I</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html"><i class="fa fa-check"></i><b>2</b> Beskrivande statistik</a>
<ul>
<li class="chapter" data-level="2.1" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#repetition-från-datorövning-1"><i class="fa fa-check"></i><b>2.1</b> Repetition från datorövning 1</a></li>
<li class="chapter" data-level="2.2" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#import-av-data-från-en-excelfil"><i class="fa fa-check"></i><b>2.2</b> Import av data från en Excelfil</a></li>
<li class="chapter" data-level="2.3" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#ändra-och-skapa-nya-kolumner-med-mutate"><i class="fa fa-check"></i><b>2.3</b> Ändra och skapa nya kolumner med <code>mutate</code></a></li>
<li class="chapter" data-level="2.4" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#sammanfattande-lägesmått"><i class="fa fa-check"></i><b>2.4</b> Sammanfattande lägesmått</a></li>
<li class="chapter" data-level="2.5" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#sammanfattande-spridningsmått"><i class="fa fa-check"></i><b>2.5</b> Sammanfattande spridningsmått</a></li>
<li class="chapter" data-level="2.6" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#ordna-upp-beskrivande-statistik-och-exportera"><i class="fa fa-check"></i><b>2.6</b> Ordna upp beskrivande statistik och exportera</a></li>
<li class="chapter" data-level="2.7" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#kumulativt-medelvärde"><i class="fa fa-check"></i><b>2.7</b> Kumulativt medelvärde</a></li>
<li class="chapter" data-level="2.8" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#darwin-exempel"><i class="fa fa-check"></i><b>2.8</b> Darwin-exempel</a></li>
<li class="chapter" data-level="2.9" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#bonus.-tredimensionella-grafer-med-plotly"><i class="fa fa-check"></i><b>2.9</b> Bonus. Tredimensionella grafer med <code>plotly</code></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="slumpvariabler.html"><a href="slumpvariabler.html"><i class="fa fa-check"></i><b>3</b> Slumpvariabler</a>
<ul>
<li class="chapter" data-level="3.1" data-path="slumpvariabler.html"><a href="slumpvariabler.html#repetition-från-datorövning-2"><i class="fa fa-check"></i><b>3.1</b> Repetition från datorövning 2</a></li>
<li class="chapter" data-level="3.2" data-path="slumpvariabler.html"><a href="slumpvariabler.html#särskilda-diskreta-fördelningar-binomialfördelning"><i class="fa fa-check"></i><b>3.2</b> Särskilda diskreta fördelningar: binomialfördelning</a></li>
<li class="chapter" data-level="3.3" data-path="slumpvariabler.html"><a href="slumpvariabler.html#särskilda-diskreta-fördelningar-poissonfördelning"><i class="fa fa-check"></i><b>3.3</b> Särskilda diskreta fördelningar: poissonfördelning</a></li>
<li class="chapter" data-level="3.4" data-path="slumpvariabler.html"><a href="slumpvariabler.html#kontinuerliga-fördelningar-i-allmänhet"><i class="fa fa-check"></i><b>3.4</b> Kontinuerliga fördelningar i allmänhet</a></li>
<li class="chapter" data-level="3.5" data-path="slumpvariabler.html"><a href="slumpvariabler.html#särskilda-kontinuerliga-fördelningar-normalfördelningen"><i class="fa fa-check"></i><b>3.5</b> Särskilda kontinuerliga fördelningar: normalfördelningen</a></li>
<li class="chapter" data-level="3.6" data-path="slumpvariabler.html"><a href="slumpvariabler.html#bonus.-summan-av-två-slumpvariabler-med-slumptal"><i class="fa fa-check"></i><b>3.6</b> Bonus. Summan av två slumpvariabler med slumptal</a></li>
<li class="chapter" data-level="3.7" data-path="slumpvariabler.html"><a href="slumpvariabler.html#bonus.-cirkelns-area-från-slumptal"><i class="fa fa-check"></i><b>3.7</b> Bonus. Cirkelns area från slumptal</a></li>
<li class="chapter" data-level="3.8" data-path="slumpvariabler.html"><a href="slumpvariabler.html#bonus.-slump-och-ordning---sierpinski-triangeln"><i class="fa fa-check"></i><b>3.8</b> Bonus. Slump och ordning - Sierpinski-triangeln</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html"><i class="fa fa-check"></i><b>4</b> Ett stickprov av normalfördelad data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#repetition-av-datorövning-3"><i class="fa fa-check"></i><b>4.1</b> Repetition av datorövning 3</a></li>
<li class="chapter" data-level="4.2" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#test-av-medelvärde-för-normalfördelad-data"><i class="fa fa-check"></i><b>4.2</b> Test av medelvärde för normalfördelad data</a></li>
<li class="chapter" data-level="4.3" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#konfidensintervall-för-normalfördelad-data"><i class="fa fa-check"></i><b>4.3</b> Konfidensintervall för normalfördelad data</a></li>
<li class="chapter" data-level="4.4" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#normalfördelad-data-och-centrala-gränsvärdesatsen"><i class="fa fa-check"></i><b>4.4</b> Normalfördelad data och centrala gränsvärdesatsen</a></li>
<li class="chapter" data-level="4.5" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#centrala-gränsvärdesatsen"><i class="fa fa-check"></i><b>4.5</b> Centrala gränsvärdesatsen</a></li>
<li class="chapter" data-level="4.6" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#bonus.-simuleringar-för-t-test-och-konfidensintervall"><i class="fa fa-check"></i><b>4.6</b> Bonus. Simuleringar för t-test och konfidensintervall</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html"><i class="fa fa-check"></i><b>5</b> Ett stickprov av icke-normalfördelad data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#repetition-av-datorövning-4"><i class="fa fa-check"></i><b>5.1</b> Repetition av datorövning 4</a></li>
<li class="chapter" data-level="5.2" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#proportioner-från-binär-data"><i class="fa fa-check"></i><b>5.2</b> Proportioner från binär data</a></li>
<li class="chapter" data-level="5.3" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#konfidensintervall-för-proportioner"><i class="fa fa-check"></i><b>5.3</b> Konfidensintervall för proportioner</a></li>
<li class="chapter" data-level="5.4" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#chi-två-test-för-goodness-of-fit"><i class="fa fa-check"></i><b>5.4</b> Chi-två-test för goodness-of-fit</a></li>
<li class="chapter" data-level="5.5" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#chi-två-test-när-någon-parameter-skattas-från-datan"><i class="fa fa-check"></i><b>5.5</b> Chi-två-test när någon parameter skattas från datan</a></li>
<li class="chapter" data-level="5.6" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#bonus.-interaktiva-kartor-med-leaflet"><i class="fa fa-check"></i><b>5.6</b> Bonus. Interaktiva kartor med leaflet</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html"><i class="fa fa-check"></i><b>6</b> Test för två stickprov</a>
<ul>
<li class="chapter" data-level="6.1" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#repetition-av-datorövning-5"><i class="fa fa-check"></i><b>6.1</b> Repetition av datorövning 5</a></li>
<li class="chapter" data-level="6.2" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#två-stickprov-och-normalfördelad-data"><i class="fa fa-check"></i><b>6.2</b> Två stickprov och normalfördelad data</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#t-test-för-två-matchade-stickprov"><i class="fa fa-check"></i><b>6.2.1</b> t-test för två matchade stickprov</a></li>
<li class="chapter" data-level="6.2.2" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#t-test-för-två-oberoende-stickprov"><i class="fa fa-check"></i><b>6.2.2</b> t-test för två oberoende stickprov</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#z-test-och-konfidensintervall-för-två-proportioner"><i class="fa fa-check"></i><b>6.3</b> z-test och konfidensintervall för två proportioner</a></li>
<li class="chapter" data-level="6.4" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#chi-två-test-för-korstabeller"><i class="fa fa-check"></i><b>6.4</b> Chi-två-test för korstabeller</a></li>
<li class="chapter" data-level="6.5" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#bonus.-bilder-i-r"><i class="fa fa-check"></i><b>6.5</b> Bonus. Bilder i R</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="variansanalys.html"><a href="variansanalys.html"><i class="fa fa-check"></i><b>7</b> Variansanalys</a>
<ul>
<li class="chapter" data-level="7.1" data-path="variansanalys.html"><a href="variansanalys.html#repetition-av-datorövning-6"><i class="fa fa-check"></i><b>7.1</b> Repetition av datorövning 6</a></li>
<li class="chapter" data-level="7.2" data-path="variansanalys.html"><a href="variansanalys.html#allmänt"><i class="fa fa-check"></i><b>7.2</b> Allmänt</a></li>
<li class="chapter" data-level="7.3" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-en-faktor"><i class="fa fa-check"></i><b>7.3</b> Variansanalys. En faktor</a></li>
<li class="chapter" data-level="7.4" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-en-faktor-med-block"><i class="fa fa-check"></i><b>7.4</b> Variansanalys. En faktor med block</a></li>
<li class="chapter" data-level="7.5" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-två-faktorer-med-block"><i class="fa fa-check"></i><b>7.5</b> Variansanalys. Två faktorer med block</a></li>
<li class="chapter" data-level="7.6" data-path="variansanalys.html"><a href="variansanalys.html#modellantaganden-och-residualer"><i class="fa fa-check"></i><b>7.6</b> Modellantaganden och residualer</a></li>
<li class="chapter" data-level="7.7" data-path="variansanalys.html"><a href="variansanalys.html#bonus.-statistik-för-ekologi"><i class="fa fa-check"></i><b>7.7</b> Bonus. Statistik för ekologi</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html"><i class="fa fa-check"></i><b>8</b> Regression och korrelation</a>
<ul>
<li class="chapter" data-level="8.1" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#repetition-av-datorövning-7"><i class="fa fa-check"></i><b>8.1</b> Repetition av datorövning 7</a></li>
<li class="chapter" data-level="8.2" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#regression"><i class="fa fa-check"></i><b>8.2</b> Regression</a></li>
<li class="chapter" data-level="8.3" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#korrelation"><i class="fa fa-check"></i><b>8.3</b> Korrelation</a></li>
<li class="chapter" data-level="8.4" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#bonus.-skrapa-data-från-webbsidor"><i class="fa fa-check"></i><b>8.4</b> Bonus. Skrapa data från webbsidor</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R-anvisningar till <em>Grundläggande statistik</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="beskrivande-statistik" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Kapitel 2</span> Beskrivande statistik<a href="beskrivande-statistik.html#beskrivande-statistik" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Datorövning 2 handlar om beräkning av beskrivande statistik i R. Efter övningen ska vi kunna</p>
<ul>
<li><p>Importera data från en excelfil,</p></li>
<li><p>Beräkna lämpliga lägesmått för en variabel,</p></li>
<li><p>Beräkna lämpliga spridningsmått för en variabel,</p></li>
<li><p>Konstruera grafer som jämför två eller flera gruppers läge och spridning.</p></li>
</ul>
<div id="repetition-från-datorövning-1" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Repetition från datorövning 1<a href="beskrivande-statistik.html#repetition-från-datorövning-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>När man arbetar i R är det klokt att använda ett avancerat gränssnitt som RStudio och att skriva sin kod i ett separat skript. I RStudio kan man starta ett nytt skript genom <em>Ctrl + Shift + N</em>.</p>
<p>Mycket funktionalitet i R ligger i tilläggspaket (<em>Packages</em>). Paket måste installeras första gången de används och laddas varje session de används, t.ex.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="beskrivande-statistik.html#cb63-1" tabindex="-1"></a><span class="co"># install.packages(&quot;tidyverse&quot;)        # Installera tidyverse (behövs ej om redan gjort)</span></span>
<span id="cb63-2"><a href="beskrivande-statistik.html#cb63-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)                     <span class="co"># Ger ett felmeddelande om paketet inte installerats</span></span></code></pre></div>
<p>Data läses in med import-funktioner där valet av funktion beror på typen av fil. Importerad data sparas som ett objekt i R genom <em>assign</em>-pilen <code>&lt;-</code>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="beskrivande-statistik.html#cb64-1" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/adamflr/ST0060/main/Data/Spotify_data.csv&quot;</span>)</span>
<span id="cb64-2"><a href="beskrivande-statistik.html#cb64-2" tabindex="-1"></a>dat                                              <span class="co"># Skriv ut objektet dat</span></span></code></pre></div>
<pre><code>## # A tibble: 89,105 × 24
##    artist_name album_name  track_number track_name album_type album_release_date
##    &lt;chr&gt;       &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;             
##  1 100 gecs    1000 gecs …            1 money mac… album      2020-07-10        
##  2 100 gecs    1000 gecs …            2 ringtone … album      2020-07-10        
##  3 100 gecs    1000 gecs …            3 745 stick… album      2020-07-10        
##  4 100 gecs    1000 gecs …            4 gec 2 Ü (… album      2020-07-10        
##  5 100 gecs    1000 gecs …            5 hand crus… album      2020-07-10        
##  6 100 gecs    1000 gecs …            6 800db clo… album      2020-07-10        
##  7 100 gecs    1000 gecs …            7 stupid ho… album      2020-07-10        
##  8 100 gecs    1000 gecs …            8 ringtone … album      2020-07-10        
##  9 100 gecs    1000 gecs …            9 xXXi_wud_… album      2020-07-10        
## 10 100 gecs    1000 gecs …           10 745 stick… album      2020-07-10        
## # ℹ 89,095 more rows
## # ℹ 18 more variables: album_release_year &lt;dbl&gt;, danceability &lt;dbl&gt;,
## #   energy &lt;dbl&gt;, key &lt;dbl&gt;, loudness &lt;dbl&gt;, mode &lt;dbl&gt;, speechiness &lt;dbl&gt;,
## #   acousticness &lt;dbl&gt;, instrumentalness &lt;dbl&gt;, liveness &lt;dbl&gt;, valence &lt;dbl&gt;,
## #   tempo &lt;dbl&gt;, time_signature &lt;dbl&gt;, explicit &lt;lgl&gt;, type &lt;chr&gt;,
## #   key_name &lt;chr&gt;, mode_name &lt;chr&gt;, key_mode &lt;chr&gt;</code></pre>
<p>Funktioner agerar på objekt och ger något utfall. Här beräknas medeltempot med funktionen <code>mean()</code>. Dollartecknet används för att ange en specifik kolumn i dataobjektet. Funktioner styrs av möjliga argument - här används <code>na.rm</code> för att ange att saknade värden inte ska tas med i beräkningen</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="beskrivande-statistik.html#cb66-1" tabindex="-1"></a><span class="fu">mean</span>(dat<span class="sc">$</span>tempo, <span class="at">na.rm =</span> T)                       <span class="co"># Beräkna medelvärdet av kolumnen tempo i datan dat</span></span></code></pre></div>
<pre><code>## [1] 119.0461</code></pre>
<p>Funktionerna <code>filter()</code> och <code>select()</code> kan användas för att välja kolumner och rader. Funktioner kan länkas samman med en pipe <code>%&gt;%</code> för att skapa sekvenser av funktioner. Man kan tänka på pipen som <em>och sen</em>.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="beskrivande-statistik.html#cb68-1" tabindex="-1"></a>dat <span class="sc">%&gt;%</span>                                                    <span class="co"># Ta datan, och sen</span></span>
<span id="cb68-2"><a href="beskrivande-statistik.html#cb68-2" tabindex="-1"></a>  <span class="fu">filter</span>(artist_name <span class="sc">==</span> <span class="st">&quot;Tame Impala&quot;</span>, tempo <span class="sc">&gt;</span> <span class="dv">170</span>) <span class="sc">%&gt;%</span>    <span class="co"># ta ut rader där artisten är Tame Impala och tempot är större än 170, och sen</span></span>
<span id="cb68-3"><a href="beskrivande-statistik.html#cb68-3" tabindex="-1"></a>  <span class="fu">select</span>(artist_name, track_name, tempo)                   <span class="co"># ta ut kolumnerna artist_name, track_name och tempo</span></span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##    artist_name track_name                                         tempo
##    &lt;chr&gt;       &lt;chr&gt;                                              &lt;dbl&gt;
##  1 Tame Impala Lost In Yesterday                                   183.
##  2 Tame Impala Yes I&#39;m Changing                                    180.
##  3 Tame Impala Led Zeppelin                                        184.
##  4 Tame Impala No Choice                                           180.
##  5 Tame Impala Borderline - Blood Orange Remix                     174.
##  6 Tame Impala Borderline - Blood Orange Remix                     174.
##  7 Tame Impala Guilty Conscience - Tame Impala Remix Extended      192.
##  8 Tame Impala Guilty Conscience - Tame Impala Remix               192.
##  9 Tame Impala Guilty Conscience - Tame Impala Remix Instrumental  192.
## 10 Tame Impala Guilty Conscience - Tame Impala Remix               192.</code></pre>
<p>Slutligen tittade vi på grafer med ggplot2-paketet. En ggplot byggs upp med tre grundelar: data, geometrier (grafens objekt och former), och <em>aesthetics</em> (utseende och placering av geometrierna). I ett enkelt spridningsdiagram är data två numeriska variabler, geometrierna är punkter, och punkternas placering ges av en x-koordinat och en y-koordinat. Ytterligare <em>aesthetics</em> kan vara punkternas färger (<code>color</code>) och storlek (<code>size</code>).</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="beskrivande-statistik.html#cb70-1" tabindex="-1"></a>dat_small <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(artist_name <span class="sc">==</span> <span class="st">&quot;The Weeknd&quot;</span>)                            <span class="co"># Skapa en mindre datamängd genom att filtrera på en artist</span></span>
<span id="cb70-2"><a href="beskrivande-statistik.html#cb70-2" tabindex="-1"></a></span>
<span id="cb70-3"><a href="beskrivande-statistik.html#cb70-3" tabindex="-1"></a><span class="fu">ggplot</span>(dat_small, <span class="fu">aes</span>(tempo, danceability, <span class="at">size =</span> valence, <span class="at">color =</span> mode_name)) <span class="sc">+</span>    <span class="co"># Koppla grafegenskaper och variabler</span></span>
<span id="cb70-4"><a href="beskrivande-statistik.html#cb70-4" tabindex="-1"></a>  <span class="fu">geom_point</span>()                                                                      <span class="co"># Illustrera med punkter</span></span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-59-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="import-av-data-från-en-excelfil" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Import av data från en Excelfil<a href="beskrivande-statistik.html#import-av-data-från-en-excelfil" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Inom vetenskapen är Excel det vanligaste filformatet för mindre datamängder. Till den här delen ska vi arbeta med data från <em>Gapminder</em>, en stiftelse som sprider information om socio-ekonomisk utveckling och global hälsa.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-22" class="exercise"><strong>Uppgift 2.1  (Excelfil från Canvas) </strong></span>Hitta excelfilen <em>Gapminder.xlsx</em> på Canvas och ladda ner den. Hitta mappen som filen laddats ned till.</p>
</div>
<p>I R kan man läsa in data från en Excel-fil med funktionen <code>read_excel()</code> från paketet <code>readxl</code>. Som argument till funktionen sätts filens sökväg - dess placering på hårddisken. Stycket nedan importerar från en excelfil som ligger på hårddisken <em>C:</em> i mappen <em>Downloads</em>, under <em>User_name</em>, under <em>Users</em>.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="beskrivande-statistik.html#cb71-1" tabindex="-1"></a><span class="fu">library</span>(readxl)                                                           <span class="co"># Ladda readxl</span></span></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="beskrivande-statistik.html#cb72-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;C:/Users/User_name/Downloads/Gapminder.xlsx&quot;</span>)    <span class="co"># Läs in från en lokal excelfil</span></span>
<span id="cb72-2"><a href="beskrivande-statistik.html#cb72-2" tabindex="-1"></a>gapminder                                                                 <span class="co"># Skriv ut objektet gapminder</span></span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-23" class="exercise"><strong>Uppgift 2.2  (Importera från excelfil) </strong></span>Var ligger den nedladdade filen <em>Gapminder.xlsx</em>? Gör lämplig ändring i koden ovan för att läsa in data från den filen. Notera att R använder högerlutande snedstreck <code>/</code>, så om en kopierad sökväg har vänster-snedstreck måste de ändras. Kontrollera att datan blivit korrekt inläst genom att köra objektnamnet <code>gapminder</code>.</p>
</div>
<p>En R-session har alltid en grundmapp, ett <em>Working directory</em>. Man kan se vilken mapp det är genom att köra</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="beskrivande-statistik.html#cb73-1" tabindex="-1"></a><span class="fu">getwd</span>()                                <span class="co"># Ange working directory</span></span></code></pre></div>
<p>En filsökväg kan anges antingen som en fullständig sökväg, som ovan, eller relativt <em>working directory</em>. Om man till exempel har en fil <em>Gapminder.xlsx</em> som ligger i en mapp <em>Data</em> som i sin tur ligger i <em>working directory</em>, kan man importera data från filen med</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="beskrivande-statistik.html#cb74-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;Data/Gapminder.xlsx&quot;</span>)             <span class="co"># Läs in från en lokal excelfil (relativt wd)</span></span>
<span id="cb74-2"><a href="beskrivande-statistik.html#cb74-2" tabindex="-1"></a>gapminder                                                  <span class="co"># Skriv ut objektet gapminder</span></span></code></pre></div>
<pre><code>## # A tibble: 1,704 × 6
##    country     continent  year lifeExp      pop gdpPercap
##    &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.
## # ℹ 1,694 more rows</code></pre>
<div class="exercise">
<p><span id="exr:unlabeled-div-24" class="exercise"><strong>Uppgift 2.3  (Working directory) </strong></span>Identifiera <em>working directory</em> för din nuvarande Rs-session genom att köra <code>getwd()</code>.</p>
</div>
<p>RStudio har också en inbyggd funktionalitet för att importera data. Man kan hitta den genom att gå till <em>Environment</em>-fliken och sedan <em>Import Dataset</em>. Det kan vara en bra hjälp, i synnerhet om man vill sätta datatyp för någon specifik kolumn.</p>
<p>Om du inte har tillgång till Canvas kan Gapminder-datan alternativt hämtas från paketet Gapminder.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="beskrivande-statistik.html#cb76-1" tabindex="-1"></a><span class="co"># install.packages(&quot;gapminder&quot;)        # Installera paketet gapminder (behövs ej om redan gjort)</span></span>
<span id="cb76-2"><a href="beskrivande-statistik.html#cb76-2" tabindex="-1"></a><span class="fu">library</span>(gapminder)                     <span class="co"># Ladda gapminder</span></span>
<span id="cb76-3"><a href="beskrivande-statistik.html#cb76-3" tabindex="-1"></a>gapminder                              <span class="co"># Skriv ut objektet gapminder</span></span></code></pre></div>
</div>
<div id="ändra-och-skapa-nya-kolumner-med-mutate" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Ändra och skapa nya kolumner med <code>mutate</code><a href="beskrivande-statistik.html#ändra-och-skapa-nya-kolumner-med-mutate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Variabler kan omräknas och nya variabler kan skapas med <code>mutate</code>-funktionen. I gapminder-datan finns bnp per capita. Om man vill ha nationell BNP kan man skapa en ny kolumn och beräkna den som bnp per capita gånger populationen.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="beskrivande-statistik.html#cb77-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>             <span class="co"># Ta datan, och sen</span></span>
<span id="cb77-2"><a href="beskrivande-statistik.html#cb77-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp =</span> gdpPercap <span class="sc">*</span> pop)        <span class="co"># Beräkna en ny kolumn som bnp per capita (bnpPercap) gånger befolkningen (pop)</span></span></code></pre></div>
<p>Den inledande delen med <code>gapminder &lt;-</code> gör så att utfallet av beräkningen sparas i objektet <code>gapminder</code>.
Vi kan skriva ut objektet och se resultatet av beräkningen:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="beskrivande-statistik.html#cb78-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">select</span>(gdpPercap, pop, gdp)        <span class="co"># Ta datan och sen välj tre kolumner</span></span></code></pre></div>
<pre><code>## # A tibble: 1,704 × 3
##    gdpPercap      pop          gdp
##        &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt;
##  1      779.  8425333  6567086330.
##  2      821.  9240934  7585448670.
##  3      853. 10267083  8758855797.
##  4      836. 11537966  9648014150.
##  5      740. 13079460  9678553274.
##  6      786. 14880372 11697659231.
##  7      978. 12881816 12598563401.
##  8      852. 13867957 11820990309.
##  9      649. 16317921 10595901589.
## 10      635. 22227415 14121995875.
## # ℹ 1,694 more rows</code></pre>
<p>Om man vill skapa en kolumn med mellanrum i namnet måste man skriva namnet inom <em>backticks</em> ` för att ange att namnet ska tolkas som en enhet. Jag rekommenderar att undvika mellanrum i kolumnnamn och istället använda stora bokstäver eller understreck för ett nytt ord (<code>NationalGDP</code> eller <code>National_GDP</code>).</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="beskrivande-statistik.html#cb80-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="beskrivande-statistik.html#cb80-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">National GDP</span><span class="st">`</span> <span class="ot">=</span> gdpPercap <span class="sc">*</span> pop)</span></code></pre></div>
<pre><code>## # A tibble: 1,704 × 8
##    country     continent  year lifeExp      pop gdpPercap     gdp `National GDP`
##    &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;          &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779. 6.57e 9    6567086330.
##  2 Afghanistan Asia       1957    30.3  9240934      821. 7.59e 9    7585448670.
##  3 Afghanistan Asia       1962    32.0 10267083      853. 8.76e 9    8758855797.
##  4 Afghanistan Asia       1967    34.0 11537966      836. 9.65e 9    9648014150.
##  5 Afghanistan Asia       1972    36.1 13079460      740. 9.68e 9    9678553274.
##  6 Afghanistan Asia       1977    38.4 14880372      786. 1.17e10   11697659231.
##  7 Afghanistan Asia       1982    39.9 12881816      978. 1.26e10   12598563401.
##  8 Afghanistan Asia       1987    40.8 13867957      852. 1.18e10   11820990309.
##  9 Afghanistan Asia       1992    41.7 16317921      649. 1.06e10   10595901589.
## 10 Afghanistan Asia       1997    41.8 22227415      635. 1.41e10   14121995875.
## # ℹ 1,694 more rows</code></pre>
</div>
<div id="sammanfattande-lägesmått" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Sammanfattande lägesmått<a href="beskrivande-statistik.html#sammanfattande-lägesmått" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Den importerade datan ger medellivslängd, populationsstorlek och bnp per capita per land och år. Vi kan börja med att producera en bubbelgraf över datan - en av de presentationer Gapminder ofta använder. En bubbelgraf är ett spridningsdiagram där punktens storlek beror på en tredje variabel.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="beskrivande-statistik.html#cb82-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(gdpPercap, lifeExp, <span class="at">size =</span> pop, <span class="at">color =</span> continent)) <span class="sc">+</span>    <span class="co"># Koppla grafens egenskaper till kolumner</span></span>
<span id="cb82-2"><a href="beskrivande-statistik.html#cb82-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span>                                                               <span class="co"># Illustrera med punkter</span></span>
<span id="cb82-3"><a href="beskrivande-statistik.html#cb82-3" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> year)                                                           <span class="co"># Skapa småfönster efter år</span></span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-68-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>En interaktiv version kan vara bra om man vill identifiera någon specifik punkt.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="beskrivande-statistik.html#cb83-1" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(gdpPercap, lifeExp, <span class="at">size =</span> pop, <span class="at">color =</span> continent, <span class="at">text =</span> country)) <span class="sc">+</span></span>
<span id="cb83-2"><a href="beskrivande-statistik.html#cb83-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb83-3"><a href="beskrivande-statistik.html#cb83-3" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> year)</span>
<span id="cb83-4"><a href="beskrivande-statistik.html#cb83-4" tabindex="-1"></a></span>
<span id="cb83-5"><a href="beskrivande-statistik.html#cb83-5" tabindex="-1"></a><span class="co"># install.packages(&quot;plotly&quot;)</span></span>
<span id="cb83-6"><a href="beskrivande-statistik.html#cb83-6" tabindex="-1"></a><span class="fu">library</span>(plotly)                        <span class="co"># Ladda paketet plotly</span></span>
<span id="cb83-7"><a href="beskrivande-statistik.html#cb83-7" tabindex="-1"></a><span class="fu">ggplotly</span>(g)                            <span class="co"># Ta fram en interaktiv version av grafen g</span></span></code></pre></div>
<p>Under föreläsningen såg vi exempel på två lägesmått: medelvärdet (egentligen det <em>aritmetiska</em> medelvärdet) och medianen. De har bägge enkla funktioner i R: <code>mean()</code> respektive <code>median()</code>. Vi plockar ut en variabel ur datan och beräknar bägge.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="beskrivande-statistik.html#cb84-1" tabindex="-1"></a>gdpPercap <span class="ot">&lt;-</span> gapminder<span class="sc">$</span>gdpPercap       <span class="co"># Skapa en vektor gdpPercap genom att ta ut kolumnen från gapminder</span></span>
<span id="cb84-2"><a href="beskrivande-statistik.html#cb84-2" tabindex="-1"></a><span class="fu">mean</span>(gdpPercap)                        <span class="co"># Beräkna medelvärdet av gdpPercap</span></span></code></pre></div>
<pre><code>## [1] 7215.327</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="beskrivande-statistik.html#cb86-1" tabindex="-1"></a><span class="fu">median</span>(gdpPercap)                      <span class="co"># Beräkna medianen av gdpPercap</span></span></code></pre></div>
<pre><code>## [1] 3531.847</code></pre>
<p>Samma sak kan göras med en pipe <code>%&gt;%</code> och <code>summarise()</code>.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="beskrivande-statistik.html#cb88-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span>                                    <span class="co"># Ta datan, och sen</span></span>
<span id="cb88-2"><a href="beskrivande-statistik.html#cb88-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap),              <span class="co"># summera med medelvärdet av gdpPercap och</span></span>
<span id="cb88-3"><a href="beskrivande-statistik.html#cb88-3" tabindex="-1"></a>            <span class="at">Median =</span> <span class="fu">median</span>(gdpPercap))          <span class="co"># med medianen av gdpPercap</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##    Mean Median
##   &lt;dbl&gt;  &lt;dbl&gt;
## 1 7215.  3532.</code></pre>
<div class="exercise">
<p><span id="exr:unlabeled-div-25" class="exercise"><strong>Uppgift 2.4  (Lägesmått av livslängd) </strong></span>Gör lämpliga ändringar i exemplet ovan för att beräkna lägesmått för medellivslängd (<code>lifeExp</code>).</p>
</div>
<p>Den andra lösningen, med en pipe och <code>summarise()</code>, kan enkelt utvecklas med ett <code>group_by()</code>-steg för att beräkna medel och median per någon grupp, t.ex. per år.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="beskrivande-statistik.html#cb90-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span>                                    <span class="co"># Ta datan, och sen</span></span>
<span id="cb90-2"><a href="beskrivande-statistik.html#cb90-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span>                             <span class="co"># gruppera efter år, och sen</span></span>
<span id="cb90-3"><a href="beskrivande-statistik.html#cb90-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap),              <span class="co"># summera med medelvärdet av gdpPercap och</span></span>
<span id="cb90-4"><a href="beskrivande-statistik.html#cb90-4" tabindex="-1"></a>            <span class="at">Median =</span> <span class="fu">median</span>(gdpPercap))          <span class="co"># med medianen av gdpPercap</span></span></code></pre></div>
<pre><code>## # A tibble: 12 × 3
##     year   Mean Median
##    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1  1952  3725.  1969.
##  2  1957  4299.  2173.
##  3  1962  4726.  2335.
##  4  1967  5484.  2678.
##  5  1972  6770.  3339.
##  6  1977  7313.  3799.
##  7  1982  7519.  4216.
##  8  1987  7901.  4280.
##  9  1992  8159.  4386.
## 10  1997  9090.  4782.
## 11  2002  9918.  5320.
## 12  2007 11680.  6124.</code></pre>
<div class="exercise">
<p><span id="exr:unlabeled-div-26" class="exercise"><strong>Uppgift 2.5  (Lägesmått per kontinent) </strong></span>Gör lämpliga ändringar i exemplet ovan för att beräkna lägesmått per kontinent. Vad måste läggas till för att också beräkna maximum och minimum per kontinent (funktionerna <code>max()</code> och <code>min()</code>)?</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-27" class="exercise"><strong>Uppgift 2.6  (Upprepade mätningar) </strong></span>Finns det några problem med att beräkna medelvärde per kontinent på den här datan? (Jag kan se minst två.)</p>
</div>
<p>I vetenskapliga publikationer redovisas medelvärden ofta med ett stapeldiagram. Som exempel ges staplar för medelvärdet av bnp per kontinent för 2007.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="beskrivande-statistik.html#cb92-1" tabindex="-1"></a>dat_gdp_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>                    <span class="co"># Ta datan, och sen</span></span>
<span id="cb92-2"><a href="beskrivande-statistik.html#cb92-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>                       <span class="co"># filtrera för 2007, och sen</span></span>
<span id="cb92-3"><a href="beskrivande-statistik.html#cb92-3" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span>                        <span class="co"># gruppera efter kontinent, och sen</span></span>
<span id="cb92-4"><a href="beskrivande-statistik.html#cb92-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap))              <span class="co"># summera med medelvärdet av gdpPercap</span></span>
<span id="cb92-5"><a href="beskrivande-statistik.html#cb92-5" tabindex="-1"></a></span>
<span id="cb92-6"><a href="beskrivande-statistik.html#cb92-6" tabindex="-1"></a><span class="fu">ggplot</span>(dat_gdp_2007, <span class="fu">aes</span>(continent, Mean)) <span class="sc">+</span>     <span class="co"># Skapa en ggplot med continent på x-axeln och Mean på y-axeln</span></span>
<span id="cb92-7"><a href="beskrivande-statistik.html#cb92-7" tabindex="-1"></a>  <span class="fu">geom_col</span>()                                     <span class="co"># Illustrera med kolumner (columns)</span></span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-73-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>För att få lite mer information kan man lägga till de individuella punkterna.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="beskrivande-statistik.html#cb93-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_gdp_2007, <span class="fu">aes</span>(continent, Mean)) <span class="sc">+</span></span>
<span id="cb93-2"><a href="beskrivande-statistik.html#cb93-2" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb93-3"><a href="beskrivande-statistik.html#cb93-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(continent, gdpPercap), <span class="at">data =</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>))</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-74-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Eftersom <code>geom_point()</code> här bygger på annan data än kolumnerna från <code>geom_col()</code> anger vi en ny <code>aes()</code>-funktionen och sätter argumentet <code>data</code>.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-28" class="exercise"><strong>Uppgift 2.7  (Graf för livslängd) </strong></span>Gör om stapeldiagrammet. Denna gång med livslängd (<code>lifeExp</code>) istället för bnp per capita (<code>gdpPercap</code>).</p>
</div>
</div>
<div id="sammanfattande-spridningsmått" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Sammanfattande spridningsmått<a href="beskrivande-statistik.html#sammanfattande-spridningsmått" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Under föreläsningarna såg vi några mått på spridning: varians, standardavvikelse och kvartilavstånd (IQR, <em>inter-quartile range</em>). De har alla motsvarande funktioner i R (<code>var()</code>, <code>sd()</code>, och <code>IQR()</code>) som kan användas på samma sätt som funktionerna för lägesmått.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="beskrivande-statistik.html#cb94-1" tabindex="-1"></a>gdpPercap <span class="ot">&lt;-</span> gapminder<span class="sc">$</span>gdpPercap                 <span class="co"># Skapa en vektor gdpPercap genom att ta ut kolumnen från gapminder</span></span>
<span id="cb94-2"><a href="beskrivande-statistik.html#cb94-2" tabindex="-1"></a></span>
<span id="cb94-3"><a href="beskrivande-statistik.html#cb94-3" tabindex="-1"></a><span class="fu">var</span>(gdpPercap)                                   <span class="co"># Beräkna variansen av gdpPercap</span></span></code></pre></div>
<pre><code>## [1] 97169410</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="beskrivande-statistik.html#cb96-1" tabindex="-1"></a><span class="fu">sd</span>(gdpPercap)                                    <span class="co"># Beräkna standardavvikelsen av gdpPercap</span></span></code></pre></div>
<pre><code>## [1] 9857.455</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="beskrivande-statistik.html#cb98-1" tabindex="-1"></a><span class="fu">IQR</span>(gdpPercap)                                   <span class="co"># Beräkna kvartilavståndet av gdpPercap</span></span></code></pre></div>
<pre><code>## [1] 8123.402</code></pre>
<p>Alternativt med en pipe och <code>summarise()</code>.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="beskrivande-statistik.html#cb100-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span>                                    <span class="co"># Ta datan, och sen</span></span>
<span id="cb100-2"><a href="beskrivande-statistik.html#cb100-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Varians =</span> <span class="fu">var</span>(gdpPercap),            <span class="co"># summera med varians,</span></span>
<span id="cb100-3"><a href="beskrivande-statistik.html#cb100-3" tabindex="-1"></a>            <span class="at">Standardavvikelse =</span> <span class="fu">sd</span>(gdpPercap),   <span class="co"># standardavvikelse,</span></span>
<span id="cb100-4"><a href="beskrivande-statistik.html#cb100-4" tabindex="-1"></a>            Kvartilavstånd <span class="ot">=</span> <span class="fu">IQR</span>(gdpPercap))     <span class="co"># och kvartilavstånd</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##     Varians Standardavvikelse Kvartilavstånd
##       &lt;dbl&gt;             &lt;dbl&gt;          &lt;dbl&gt;
## 1 97169410.             9857.          8123.</code></pre>
<p>Lösningen med pipe och <code>summarise()</code> kan som tidigare utvecklas med <code>group_by()</code>.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="beskrivande-statistik.html#cb102-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span>                                    <span class="co"># Ta datan, och sen</span></span>
<span id="cb102-2"><a href="beskrivande-statistik.html#cb102-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span>                             <span class="co"># gruppera efter år, och sen</span></span>
<span id="cb102-3"><a href="beskrivande-statistik.html#cb102-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Varians =</span> <span class="fu">var</span>(gdpPercap),            <span class="co"># summera med varians,</span></span>
<span id="cb102-4"><a href="beskrivande-statistik.html#cb102-4" tabindex="-1"></a>            <span class="at">Standardavvikelse =</span> <span class="fu">sd</span>(gdpPercap),   <span class="co"># standardavvikelse,</span></span>
<span id="cb102-5"><a href="beskrivande-statistik.html#cb102-5" tabindex="-1"></a>            Kvartilavstånd <span class="ot">=</span> <span class="fu">IQR</span>(gdpPercap))     <span class="co"># och kvartilavstånd</span></span></code></pre></div>
<pre><code>## # A tibble: 12 × 4
##     year    Varians Standardavvikelse Kvartilavstånd
##    &lt;dbl&gt;      &lt;dbl&gt;             &lt;dbl&gt;          &lt;dbl&gt;
##  1  1952  86882249.             9321.          3049.
##  2  1957  97410232.             9870.          3946.
##  3  1962  75123173.             8667.          4650.
##  4  1967  65534132.             8095.          5925.
##  5  1972 112665135.            10614.          8252.
##  6  1977  69931225.             8362.          9847.
##  7  1982  59812359.             7734.         10985.
##  8  1987  68695607.             8288.         10667.
##  9  1992  81574244.             9032.          9414.
## 10  1997 103459275.            10171.         10656.
## 11  2002 124414278.            11154.         11950.
## 12  2007 165377988.            12860.         16384.</code></pre>
<div class="exercise">
<p><span id="exr:unlabeled-div-29" class="exercise"><strong>Uppgift 2.8  (Graf för livslängd) </strong></span>Gör lämpliga ändringar i det sista exempel för att istället beräkna spridningsmått för livslängd.</p>
</div>
<p>Vi avslutar med tre vanliga illustrationer av vetenskaplig data - ett linjediagram med felstaplar, ett stapeldiagram med felstaplar, och ett lådagram. För linjediagrammet beräknar vi medelvärdet och spridningsmått för bnp över år och kontinent. Som spridningsmått använder vi <em>medelfelet</em>, vilket beräknas som standardavvikelse delat på roten ur antalet observationer.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="beskrivande-statistik.html#cb104-1" tabindex="-1"></a>dat_sum <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>                         <span class="co"># Ta datan, och sen</span></span>
<span id="cb104-2"><a href="beskrivande-statistik.html#cb104-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year, continent) <span class="sc">%&gt;%</span>                  <span class="co"># grupper efter år och kontinent, och sen</span></span>
<span id="cb104-3"><a href="beskrivande-statistik.html#cb104-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap),              <span class="co"># summera med medelvärde</span></span>
<span id="cb104-4"><a href="beskrivande-statistik.html#cb104-4" tabindex="-1"></a>            <span class="at">SE =</span> <span class="fu">sd</span>(gdpPercap) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">n</span>()))      <span class="co"># och medelfel (standardavvikelsen delat på roten ur n)</span></span>
<span id="cb104-5"><a href="beskrivande-statistik.html#cb104-5" tabindex="-1"></a>dat_sum</span></code></pre></div>
<pre><code>## # A tibble: 60 × 4
## # Groups:   year [12]
##     year continent   Mean    SE
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;
##  1  1952 Africa     1253.  136.
##  2  1952 Americas   4079.  600.
##  3  1952 Asia       5195. 3244.
##  4  1952 Europe     5661.  569.
##  5  1952 Oceania   10298.  258.
##  6  1957 Africa     1385.  157.
##  7  1957 Americas   4616.  662.
##  8  1957 Asia       5788. 3396.
##  9  1957 Europe     6963.  671.
## 10  1957 Oceania   11599.  649.
## # ℹ 50 more rows</code></pre>
<p>Med <code>ggplot2</code> kan vi bygga ett linjediagram med <code>geom_line()</code> och lägga till felstaplar med <code>geom_errorbar()</code>. Den senare behöver <code>aes()</code>-argument för <code>ymin</code> och <code>ymax</code> - nedre och övre del av felstapeln. Vi sätter dem till medelvärdet minus respektive plus ett medelfel.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="beskrivande-statistik.html#cb106-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_sum, <span class="fu">aes</span>(year, Mean, <span class="at">color =</span> continent)) <span class="sc">+</span>      <span class="co"># Skapa en ggplot från datan dat_sum med year som x-axel, Mean som y-axel och färg efter kontinent</span></span>
<span id="cb106-2"><a href="beskrivande-statistik.html#cb106-2" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span>                                            <span class="co"># Illustrera med linjer</span></span>
<span id="cb106-3"><a href="beskrivande-statistik.html#cb106-3" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SE, <span class="at">ymax =</span> Mean <span class="sc">+</span> SE))   <span class="co"># Illustrera med felstaplar</span></span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-79-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="exercise">
<p><span id="exr:unlabeled-div-30" class="exercise"><strong>Uppgift 2.9  (Bredd) </strong></span>Felstaplarna från <code>geom_errorbar()</code> har väldigt breda ändar. Använd hjälpsidan för geomet <code>?geom_errorbar</code>, i synnerhet exemplen längst ned, och se om det går att ändra bredden.</p>
</div>
<p>En graf med staplar och felstaplar kan konstrueras på ett likande sätt. Följande exempel visar staplar över livslängd per kontinent. Felstapeln ges av standardavvikelsen.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="beskrivande-statistik.html#cb107-1" tabindex="-1"></a>dat_sum <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>                         <span class="co"># Ta datan, och sen</span></span>
<span id="cb107-2"><a href="beskrivande-statistik.html#cb107-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>                       <span class="co"># filtrera på år, och sen</span></span>
<span id="cb107-3"><a href="beskrivande-statistik.html#cb107-3" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span>                        <span class="co"># gruppera efter kontinent, och sen</span></span>
<span id="cb107-4"><a href="beskrivande-statistik.html#cb107-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(lifeExp),                <span class="co"># summera med medelvärde,</span></span>
<span id="cb107-5"><a href="beskrivande-statistik.html#cb107-5" tabindex="-1"></a>            <span class="at">SD =</span> <span class="fu">sd</span>(lifeExp))                    <span class="co"># och standardavvikelse</span></span>
<span id="cb107-6"><a href="beskrivande-statistik.html#cb107-6" tabindex="-1"></a>dat_sum</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   continent  Mean    SD
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1 Africa     54.8 9.63 
## 2 Americas   73.6 4.44 
## 3 Asia       70.7 7.96 
## 4 Europe     77.6 2.98 
## 5 Oceania    80.7 0.729</code></pre>
<p>Vi bygger en ggplot med <code>geom_col()</code> och <code>geom_errorbar()</code>. Felstapels konstruktion kan anges i en notis med funktionen <code>labs()</code>.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="beskrivande-statistik.html#cb109-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_sum, <span class="fu">aes</span>(continent, Mean, <span class="at">fill =</span> continent)) <span class="sc">+</span>          <span class="co"># Skapa en ggplot med continent och Mean på axlarna och ifylld färg given av kontinent</span></span>
<span id="cb109-2"><a href="beskrivande-statistik.html#cb109-2" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span>                                                      <span class="co"># Illustrera med kolumner</span></span>
<span id="cb109-3"><a href="beskrivande-statistik.html#cb109-3" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SD, <span class="at">ymax =</span> Mean <span class="sc">+</span> SD)) <span class="sc">+</span>         <span class="co"># Illustrera med felstaplar</span></span>
<span id="cb109-4"><a href="beskrivande-statistik.html#cb109-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Average life expectancy by continent, 2007&quot;</span>,       <span class="co"># Ange titel och förklarande text</span></span>
<span id="cb109-5"><a href="beskrivande-statistik.html#cb109-5" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Errorbars given by mean +/- standard deviation.</span></span>
<span id="cb109-6"><a href="beskrivande-statistik.html#cb109-6" tabindex="-1"></a><span class="st">       Source: Gapminder&quot;</span>)</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-81-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="exercise">
<p><span id="exr:unlabeled-div-31" class="exercise"><strong>Uppgift 2.10  (Staplar för 1982) </strong></span>Gör lämpliga ändringar i exempel ovan för att konstruera ett stapeldiagram med felstaplar för året 1982 och variabeln gdpPercap.</p>
</div>
<p>Ett lådagram anger fördelningen av en variabel genom att illustrera minimum, maximum och kvartiler. Kvartiler är mått som delar en datamängd i fyra lika stora delar (så att en fjärdedel ligger under första kvartilen, en fjärdedel mellan första och andra kvartil, och så vidare). Med <code>ggplot2</code> kan vi bygga ett lådagram med <code>geom_boxplot()</code>. Exempel ger en låda per år och kontinent.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="beskrivande-statistik.html#cb110-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(year, lifeExp, <span class="at">fill =</span> continent, <span class="at">group =</span> year)) <span class="sc">+</span>        <span class="co"># Skapa en ggplot med år och lifeExp på axlarna, kontinent som ifylld färg, och gruppera efter år</span></span>
<span id="cb110-2"><a href="beskrivande-statistik.html#cb110-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span>                                                             <span class="co"># Illustrera med lådagram</span></span>
<span id="cb110-3"><a href="beskrivande-statistik.html#cb110-3" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> continent)                                                      <span class="co"># Småfönster efter kontinent</span></span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-82-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="exercise">
<p><span id="exr:unlabeled-div-32" class="exercise"><strong>Uppgift 2.11  (Group-argumentet) </strong></span>I lådagrammet används argumentet <code>group</code>. Vad gör det? Vad händer om man tar bort det?</p>
</div>
<p>Om man vill ha med både data på observationsnivån och summerad data i en graf kan man ange olika data till olika geom. Vi kan t.ex. lägga till en markör för medelvärdet i en boxplot.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="beskrivande-statistik.html#cb111-1" tabindex="-1"></a>gapminder_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>)</span>
<span id="cb111-2"><a href="beskrivande-statistik.html#cb111-2" tabindex="-1"></a>gapminder_agg <span class="ot">&lt;-</span> gapminder_2007 <span class="sc">%&gt;%</span> </span>
<span id="cb111-3"><a href="beskrivande-statistik.html#cb111-3" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span> </span>
<span id="cb111-4"><a href="beskrivande-statistik.html#cb111-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">lifeExp =</span> <span class="fu">mean</span>(lifeExp))</span>
<span id="cb111-5"><a href="beskrivande-statistik.html#cb111-5" tabindex="-1"></a>gapminder_agg</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   continent lifeExp
##   &lt;chr&gt;       &lt;dbl&gt;
## 1 Africa       54.8
## 2 Americas     73.6
## 3 Asia         70.7
## 4 Europe       77.6
## 5 Oceania      80.7</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="beskrivande-statistik.html#cb113-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb113-2"><a href="beskrivande-statistik.html#cb113-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(lifeExp, continent), <span class="at">data =</span> gapminder_2007) <span class="sc">+</span></span>
<span id="cb113-3"><a href="beskrivande-statistik.html#cb113-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(lifeExp, continent), <span class="at">data =</span> gapminder_agg, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;X&quot;</span>, <span class="at">size =</span> <span class="dv">6</span>)</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-83-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Här byggs boxarna med datan gapminder och punkterna med den aggregerade datan.</p>
<p>Möjligheten att sätta data inom en <code>geom_()</code>-funktion kan blandas med <code>filter()</code> för att visa olika data i olika geom. Här ges ett spridningsdiagram över bnp och medellivslängd per land, och linjeserier (<code>geom_path()</code>) över tid för två specifika länder. Geom <code>geom_point()</code> är alltså på flera länder vid en tid, medan <code>geom_path()</code> är över tid för ett land.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="beskrivande-statistik.html#cb114-1" tabindex="-1"></a>gapminder_eu <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">&quot;Europe&quot;</span>)</span>
<span id="cb114-2"><a href="beskrivande-statistik.html#cb114-2" tabindex="-1"></a></span>
<span id="cb114-3"><a href="beskrivande-statistik.html#cb114-3" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder_eu, <span class="fu">aes</span>(gdpPercap, lifeExp, <span class="at">group =</span> country, <span class="at">label =</span> country)) <span class="sc">+</span></span>
<span id="cb114-4"><a href="beskrivande-statistik.html#cb114-4" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> gapminder_eu <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>)) <span class="sc">+</span></span>
<span id="cb114-5"><a href="beskrivande-statistik.html#cb114-5" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">data =</span> gapminder_eu <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Sweden&quot;</span>), <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb114-6"><a href="beskrivande-statistik.html#cb114-6" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">data =</span> gapminder_eu <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Poland&quot;</span>), <span class="at">alpha =</span> <span class="fl">0.3</span>)</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-84-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="ordna-upp-beskrivande-statistik-och-exportera" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Ordna upp beskrivande statistik och exportera<a href="beskrivande-statistik.html#ordna-upp-beskrivande-statistik-och-exportera" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Efter att ha beräknat någon beskrivande statistik kan det vara bra att titta på hur resultaten kan snyggas upp och exporteras i något lämpligt format. Ta den tabell med medelvärden vi producerade i ett tidigare exempel.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="beskrivande-statistik.html#cb115-1" tabindex="-1"></a>dat_sum <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>                         <span class="co"># Ta datan, och sen</span></span>
<span id="cb115-2"><a href="beskrivande-statistik.html#cb115-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>                       <span class="co"># filtrera på år, och sen</span></span>
<span id="cb115-3"><a href="beskrivande-statistik.html#cb115-3" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span>                        <span class="co"># gruppera efter kontinent, och sen</span></span>
<span id="cb115-4"><a href="beskrivande-statistik.html#cb115-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(lifeExp),                <span class="co"># summera med medelvärde,</span></span>
<span id="cb115-5"><a href="beskrivande-statistik.html#cb115-5" tabindex="-1"></a>            <span class="at">SD =</span> <span class="fu">sd</span>(lifeExp))                    <span class="co"># och standardavvikelse</span></span>
<span id="cb115-6"><a href="beskrivande-statistik.html#cb115-6" tabindex="-1"></a>dat_sum</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   continent  Mean    SD
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1 Africa     54.8 9.63 
## 2 Americas   73.6 4.44 
## 3 Asia       70.7 7.96 
## 4 Europe     77.6 2.98 
## 5 Oceania    80.7 0.729</code></pre>
<p>Ett vanligt skrivsätt för medelvärde och standardavvikelse är som <em>m ± sd</em>. Vi kan använda funktionen <code>paste()</code> för att slå ihop kolumner till en sammanhängande text.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="beskrivande-statistik.html#cb117-1" tabindex="-1"></a>dat_sum <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="beskrivande-statistik.html#cb117-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mean_plus_minus_sd =</span> <span class="fu">paste</span>(Mean, <span class="st">&quot;±&quot;</span>, SD))        <span class="co"># Skapa en ny kolumn genom att slå ihop Mean och SD</span></span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   continent  Mean    SD mean_plus_minus_sd                 
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                              
## 1 Africa     54.8 9.63  54.8060384615385 ± 9.63078067196179
## 2 Americas   73.6 4.44  73.60812 ± 4.44094763085538        
## 3 Asia       70.7 7.96  70.7284848484849 ± 7.96372447069057
## 4 Europe     77.6 2.98  77.6486 ± 2.9798126601609          
## 5 Oceania    80.7 0.729 80.7195 ± 0.729027091403335</code></pre>
<p>Vi måste avrunda medelvärdet och standardavvikelsen först. Det kan man göra med <code>round()</code>, vars argument är den variabel man vill avrunda och antalet decimaler man vill avrunda till.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="beskrivande-statistik.html#cb119-1" tabindex="-1"></a>dat_sum <span class="ot">&lt;-</span> dat_sum <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a href="beskrivande-statistik.html#cb119-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mean_plus_minus_sd =</span> <span class="fu">paste</span>(<span class="fu">round</span>(Mean, <span class="dv">1</span>), <span class="st">&quot;±&quot;</span>, <span class="fu">round</span>(SD, <span class="dv">1</span>)))        <span class="co"># Skapa en ny kolumn med avrundade värden</span></span>
<span id="cb119-3"><a href="beskrivande-statistik.html#cb119-3" tabindex="-1"></a>dat_sum</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   continent  Mean    SD mean_plus_minus_sd
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;             
## 1 Africa     54.8 9.63  54.8 ± 9.6        
## 2 Americas   73.6 4.44  73.6 ± 4.4        
## 3 Asia       70.7 7.96  70.7 ± 8          
## 4 Europe     77.6 2.98  77.6 ± 3          
## 5 Oceania    80.7 0.729 80.7 ± 0.7</code></pre>
<div class="exercise">
<p><span id="exr:unlabeled-div-33" class="exercise"><strong>Uppgift 2.12  (Tappade nollor) </strong></span>Utfallet ovan är nära men inte heller riktigt vad som behövs. I de fall där funktionen avrundat till en nolla har decimal tappats. Hur kan man visa en avslutande nolla? Följande tråd på StackOverflow besvarar samma fråga.</p>
<p><a href="https://stackoverflow.com/questions/42105336/how-to-round-a-number-and-make-it-show-zeros" class="uri">https://stackoverflow.com/questions/42105336/how-to-round-a-number-and-make-it-show-zeros</a></p>
<p>Försök använda kod därifrån för att lägga till en avslutande nolla.</p>
</div>
<p>Objekt kan exporteras från R på liknande som det importeras - med särskilda exportfunktioner (<em>write</em>-funktioner) beroende på filtyp. För att exportera till en csv-fil man man använda <code>write_csv()</code>. Ingående argument är det objekt man vill exportera och den fil man vill exportera till. R ger ingen varning om man skriver över en existerande fil, så var lite försiktiga här.</p>
<p>Precis som vid import använda R <em>working directory</em> om inget annat anges. Följande exporterar objektet <code>dat_sum</code> till en csv-fil <em>Exporterad data från R.csv</em> i <em>working directory</em>.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="beskrivande-statistik.html#cb121-1" tabindex="-1"></a><span class="fu">getwd</span>()                                                    <span class="co"># Se nuvarande working directory</span></span>
<span id="cb121-2"><a href="beskrivande-statistik.html#cb121-2" tabindex="-1"></a><span class="fu">write_csv</span>(dat_sum, <span class="st">&quot;Exporterad data från R.csv&quot;</span>)           <span class="co"># Skriv datan till en csv-fil.</span></span></code></pre></div>
<p>Därifrån skulle man kunna öppna filen i något kalkylprogram, snygga till layouten, och sedan klippa in i ett textdokument.</p>
</div>
<div id="kumulativt-medelvärde" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Kumulativt medelvärde<a href="beskrivande-statistik.html#kumulativt-medelvärde" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Om man har data som av någon anledning samlas in i sekvens kan det vara intressant att beräkna och illustrera den med ett <em>kumulativt medelvärde</em>. En serie med kumulativa medelvärden beräknas genom att för varje nytt värde ta medelvärden av de värden man hittills samlat in - vid tio värden tar man medelvärdet av de tio, vid elva värden medelvärdet av de elva, och så vidare.</p>
<p>Med de tärningsvärden vi hade innan kan vi beräkna ett kumulativt medelvärde genom att först beräkna summan med <code>cumsum()</code> och sedan dela på antalet kast. För att förenkla beräkningen av antalen tar vi fram sekvensen med antal kast i ett <code>mutate()</code>-steg.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="beskrivande-statistik.html#cb122-1" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Utfall =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>)) <span class="sc">%&gt;%</span>               <span class="co"># Skapa data med kolumnen Utfall, och sen</span></span>
<span id="cb122-2"><a href="beskrivande-statistik.html#cb122-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Kast =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>())                                          <span class="co"># skapa en kolumn med antal kast från 1 löpande</span></span>
<span id="cb122-3"><a href="beskrivande-statistik.html#cb122-3" tabindex="-1"></a>dat_dice</span></code></pre></div>
<pre><code>##   Utfall Kast
## 1      6    1
## 2      3    2
## 3      2    3
## 4      3    4
## 5      5    5</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="beskrivande-statistik.html#cb124-1" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> dat_dice <span class="sc">%&gt;%</span>                                        <span class="co"># Ta datan, och sen</span></span>
<span id="cb124-2"><a href="beskrivande-statistik.html#cb124-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Kumulativ summa</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">cumsum</span>(Utfall),                    <span class="co"># skapa en kolumn som ger den kumulativa summan och</span></span>
<span id="cb124-3"><a href="beskrivande-statistik.html#cb124-3" tabindex="-1"></a>         <span class="st">`</span><span class="at">Kumulativt medelvärde</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Kumulativ summa</span><span class="st">`</span> <span class="sc">/</span> Kast)    <span class="co"># dela den kumulativa summan med antalet kast</span></span>
<span id="cb124-4"><a href="beskrivande-statistik.html#cb124-4" tabindex="-1"></a>dat_dice</span></code></pre></div>
<pre><code>##   Utfall Kast Kumulativ summa Kumulativt medelvärde
## 1      6    1               6              6.000000
## 2      3    2               9              4.500000
## 3      2    3              11              3.666667
## 4      3    4              14              3.500000
## 5      5    5              19              3.800000</code></pre>
<p>Om beräkning inte är uppenbar här, ta någon minut för att förstå den.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-34" class="exercise"><strong>Uppgift 2.13  (Kumulativt medelvärde) </strong></span>Vad ska läggas till för att stycket nedan ska ge en linjegraf över medelvärdet?</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="beskrivande-statistik.html#cb126-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_dice, <span class="fu">aes</span>(<span class="at">x =</span> Kast, <span class="at">y =</span> ___)) <span class="sc">+</span></span>
<span id="cb126-2"><a href="beskrivande-statistik.html#cb126-2" tabindex="-1"></a>  <span class="fu">___</span>()</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-35" class="exercise"><strong>Uppgift 2.14  (Fler tärningskast) </strong></span>Kasta din tärning ytterligare några gånger, gärna på en mjuk yta. Fyll i dina utfall och gör grafen från föregående uppgift. Kan man se en tendens för medelvärdet att minska i varians vid fler kast?</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="beskrivande-statistik.html#cb127-1" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Utfall =</span> <span class="fu">c</span>(___)) <span class="sc">%&gt;%</span> </span>
<span id="cb127-2"><a href="beskrivande-statistik.html#cb127-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Kast =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>(),                                          <span class="co"># Lägg till värden från 1 till n</span></span>
<span id="cb127-3"><a href="beskrivande-statistik.html#cb127-3" tabindex="-1"></a>         <span class="st">`</span><span class="at">Kumulativ summa</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">cumsum</span>(Utfall),                    <span class="co"># Beräkna kumulativ summa av utfall</span></span>
<span id="cb127-4"><a href="beskrivande-statistik.html#cb127-4" tabindex="-1"></a>         <span class="st">`</span><span class="at">Kumulativt medelvärde</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Kumulativ summa</span><span class="st">`</span> <span class="sc">/</span> Kast)    <span class="co"># Dela summan på antal för relativt medel</span></span>
<span id="cb127-5"><a href="beskrivande-statistik.html#cb127-5" tabindex="-1"></a>dat_dice</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-36" class="exercise"><strong>Uppgift 2.15  (Kumulativ frekvens) </strong></span>Om man vill titta på andelen gånger ett visst utfall inträffat talar man om <em>kumulativ frekvens</em> snarare än <em>kumulativt medelvärde</em>. Använd stycket nedan för att titta på andelen gånger utfallet varit en etta (ett <em>positivt</em> utfall, i begreppets kliniska mening). Om ett inte är ett möjligt utfall på din tärning, ändra ettan till något mer lämpligt.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="beskrivande-statistik.html#cb128-1" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Utfall =</span> <span class="fu">c</span>(___)) <span class="sc">%&gt;%</span> </span>
<span id="cb128-2"><a href="beskrivande-statistik.html#cb128-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Kast =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>(),</span>
<span id="cb128-3"><a href="beskrivande-statistik.html#cb128-3" tabindex="-1"></a>         <span class="st">`</span><span class="at">Positivt utfall</span><span class="st">`</span> <span class="ot">=</span> Utfall <span class="sc">==</span> <span class="dv">1</span>,                       <span class="co"># Skapa en variabel som anger om utfall var ett eller ej</span></span>
<span id="cb128-4"><a href="beskrivande-statistik.html#cb128-4" tabindex="-1"></a>         <span class="st">`</span><span class="at">Kumulativt antal</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">cumsum</span>(<span class="st">`</span><span class="at">Positivt utfall</span><span class="st">`</span>),</span>
<span id="cb128-5"><a href="beskrivande-statistik.html#cb128-5" tabindex="-1"></a>         <span class="st">`</span><span class="at">Kumulativ frekvens</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Kumulativt antal</span><span class="st">`</span> <span class="sc">/</span> Kast)</span>
<span id="cb128-6"><a href="beskrivande-statistik.html#cb128-6" tabindex="-1"></a>dat_dice</span>
<span id="cb128-7"><a href="beskrivande-statistik.html#cb128-7" tabindex="-1"></a></span>
<span id="cb128-8"><a href="beskrivande-statistik.html#cb128-8" tabindex="-1"></a><span class="fu">ggplot</span>(dat_dice, <span class="fu">aes</span>(<span class="at">x =</span> Kast, <span class="at">y =</span> <span class="st">`</span><span class="at">Kumulativ frekvens</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb128-9"><a href="beskrivande-statistik.html#cb128-9" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
</div>
</div>
<div id="darwin-exempel" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Darwin-exempel<a href="beskrivande-statistik.html#darwin-exempel" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>På kursen Canvas-sida finns en excelfil <em>Uppgiftdata.xlsx</em> som innehåller data för de flesta räkneupgifter på kursen. I den här delen ska vi titta på datan i fliken <em>Darwin</em> som innehåller en jämförelse i planthöjd mellan kors- och självbefruktade plantor.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-37" class="exercise"><strong>Uppgift 2.16  (Ladda ner uppgiftsdata) </strong></span>Ladda ner filen med uppgiftsdata till din lokala hårddisk.</p>
</div>
<p>Vi såg tidigare hur en excelfil kan läsas in med <code>read_excel()</code>. Ett argument den funktionen kan ta är <code>sheet</code>, som styr vilken flik som ska läsas in. Som tidigare måste man ange var på datorn excel-filen ligger.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-38" class="exercise"><strong>Uppgift 2.17  (Läs in Darwin-datan) </strong></span>Gör lämpliga ändringar i koden nedan för att läsa in fliken <em>Darwin</em>.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="beskrivande-statistik.html#cb129-1" tabindex="-1"></a>dat_darwin <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;Data/Uppgiftsdata.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;___&quot;</span>)         <span class="co"># Läs in data från fliken Darwin</span></span>
<span id="cb129-2"><a href="beskrivande-statistik.html#cb129-2" tabindex="-1"></a>dat_darwin <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">30</span>)                                              <span class="co"># Skriv ut datan (högst 30 rader)</span></span></code></pre></div>
</div>
<p>När data är inläst kan man sammanfatta den med medelvärde, standardavvikelse och medelfel (där medelfelet ges av standardavvikelsen delad på roten ur antalet observationer).</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-39" class="exercise"><strong>Uppgift 2.18  (Sammanfatta Darwin-datan) </strong></span>Fyll i koden nedan för att beräkna medelvärde, standardavvikelse, antal observationer och medelfel. Gör beräkningen per grupp (<code>Metod</code>)</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="beskrivande-statistik.html#cb130-1" tabindex="-1"></a>dat_sum <span class="ot">&lt;-</span> dat_darwin <span class="sc">%&gt;%</span>                                                 <span class="co"># Ta datan, och sen</span></span>
<span id="cb130-2"><a href="beskrivande-statistik.html#cb130-2" tabindex="-1"></a>  <span class="fu">group_by</span>(___) <span class="sc">%&gt;%</span>                                                       <span class="co"># gruppera efter Metod, och sen</span></span>
<span id="cb130-3"><a href="beskrivande-statistik.html#cb130-3" tabindex="-1"></a>  <span class="fu">summarise</span>(Medelvärde <span class="ot">=</span> <span class="fu">mean</span>(___),                                       <span class="co"># beräkna medelvärde,</span></span>
<span id="cb130-4"><a href="beskrivande-statistik.html#cb130-4" tabindex="-1"></a>            <span class="at">Standardavvikelse =</span> <span class="fu">___</span>(Utfall),                              <span class="co"># beräkna standardavvikelse,</span></span>
<span id="cb130-5"><a href="beskrivande-statistik.html#cb130-5" tabindex="-1"></a>            <span class="st">`</span><span class="at">Antal observationer</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">n</span>(),                                  <span class="co"># beräkna antal observationer,</span></span>
<span id="cb130-6"><a href="beskrivande-statistik.html#cb130-6" tabindex="-1"></a>            <span class="at">Medelfel =</span> Standardavvikelse <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="st">`</span><span class="at">Antal observationer</span><span class="st">`</span>))   <span class="co"># beräkna medelfel.</span></span>
<span id="cb130-7"><a href="beskrivande-statistik.html#cb130-7" tabindex="-1"></a>dat_sum</span></code></pre></div>
</div>
<p>Slutligen kan vi presentera de sammanfattande måtten med en lämplig graf. Ett vanligt val är ett stapeldiagram med felstaplar för medelfelen.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-40" class="exercise"><strong>Uppgift 2.19  (Illustrera Darwin-datan) </strong></span>Fyll i koden nedan för att skapa ett stapeldiagram med felstaplar av de sammanfattande måtten i objektet som skapades i uppgiften ovan. Felstaplarna styrs med argumenten <code>ymin</code> och <code>ymax</code>. Dess ska sättas till medelvärdet minus ett medelfel respektive medelvärdet plus ett medelfel. Välj lämpliga värden för staplarnas bredd. Välj en lämplig färg för staplarnas kant och inre del. Se <code>colors()</code> för en lista över färger, eller använd hex-koder som <code>"#ff00ff"</code>.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="beskrivande-statistik.html#cb131-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_sum, <span class="fu">aes</span>(Metod, Medelvärde)) <span class="sc">+</span></span>
<span id="cb131-2"><a href="beskrivande-statistik.html#cb131-2" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> ___, <span class="at">fill =</span> ___, <span class="at">width =</span> ___) <span class="sc">+</span></span>
<span id="cb131-3"><a href="beskrivande-statistik.html#cb131-3" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> ___ <span class="sc">-</span> ___, <span class="at">ymax =</span> ___ <span class="sc">+</span> ___),</span>
<span id="cb131-4"><a href="beskrivande-statistik.html#cb131-4" tabindex="-1"></a>                <span class="at">width =</span> ___) <span class="sc">+</span></span>
<span id="cb131-5"><a href="beskrivande-statistik.html#cb131-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">caption =</span> <span class="st">&quot;Felstapel anger medelvärde ± ett medelfel&quot;</span>)</span></code></pre></div>
</div>
<p>Ett annat alternativ för en graf ett lådagram per grupp. Här används den ursprungliga datan, snarare än beräknad beskrivande statistik.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-41" class="exercise"><strong>Uppgift 2.20  (Illustrera Darwin-datan) </strong></span>Fyll i koden nedan för att skapa ett lådagram för de två metoderna. Låt x-axeln ange planthöjden (<code>Utfall</code>) och y-axeln metoden (<code>Metod</code>). Även här kan man styra färger och bredd med <code>color</code>, <code>fill</code> och <code>width</code>.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="beskrivande-statistik.html#cb132-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_darwin, <span class="fu">aes</span>(<span class="at">x =</span> ___, <span class="at">y =</span> ___)) <span class="sc">+</span></span>
<span id="cb132-2"><a href="beskrivande-statistik.html#cb132-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">color =</span> <span class="st">&quot;purple&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;hotpink&quot;</span>, <span class="at">width =</span> <span class="fl">0.2</span>)</span></code></pre></div>
<p>Funktionen <code>quantile()</code> kan användas för att beräkna kvartiler. Notera att man första måste dela per grupp.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="beskrivande-statistik.html#cb133-1" tabindex="-1"></a>dat_darwin_kors <span class="ot">&lt;-</span> dat_darwin <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Metod <span class="sc">==</span> <span class="st">&quot;Korsbefruktade&quot;</span>)</span>
<span id="cb133-2"><a href="beskrivande-statistik.html#cb133-2" tabindex="-1"></a><span class="fu">quantile</span>(dat_darwin_kors<span class="sc">$</span>Utfall)</span>
<span id="cb133-3"><a href="beskrivande-statistik.html#cb133-3" tabindex="-1"></a></span>
<span id="cb133-4"><a href="beskrivande-statistik.html#cb133-4" tabindex="-1"></a>dat_darwin_själv <span class="ot">&lt;-</span> dat_darwin <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Metod <span class="sc">==</span> <span class="st">&quot;Självbefruktade&quot;</span>)</span>
<span id="cb133-5"><a href="beskrivande-statistik.html#cb133-5" tabindex="-1"></a><span class="fu">quantile</span>(dat_darwin_själv<span class="sc">$</span>Utfall)</span></code></pre></div>
<p>Vad är kopplingen mellan kvantilerna och lådagrammet?</p>
</div>
</div>
<div id="bonus.-tredimensionella-grafer-med-plotly" class="section level2 hasAnchor" number="2.9">
<h2><span class="header-section-number">2.9</span> Bonus. Tredimensionella grafer med <code>plotly</code><a href="beskrivande-statistik.html#bonus.-tredimensionella-grafer-med-plotly" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Förra gången använde vi paketet <code>plotly</code> för att göra en interaktiv graf. Paketet har också funktioner för 3d-grafer. Börja med att ladda paketet.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="beskrivande-statistik.html#cb134-1" tabindex="-1"></a><span class="fu">library</span>(plotly)</span></code></pre></div>
<p>Vi börjar med ett enkelt exempel på en 3d-graf med lite skapad data.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="beskrivande-statistik.html#cb135-1" tabindex="-1"></a>dat_ex <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Var1 =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">Var2 =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">Var3 =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>), <span class="at">Type =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>))</span>
<span id="cb135-2"><a href="beskrivande-statistik.html#cb135-2" tabindex="-1"></a>dat_ex</span>
<span id="cb135-3"><a href="beskrivande-statistik.html#cb135-3" tabindex="-1"></a></span>
<span id="cb135-4"><a href="beskrivande-statistik.html#cb135-4" tabindex="-1"></a><span class="fu">plot_ly</span>(dat_ex, <span class="at">x =</span> <span class="sc">~</span>Var1, <span class="at">y =</span> <span class="sc">~</span>Var2, <span class="at">z =</span> <span class="sc">~</span>Var3, <span class="at">color =</span> <span class="sc">~</span>Type) <span class="sc">%&gt;%</span> </span>
<span id="cb135-5"><a href="beskrivande-statistik.html#cb135-5" tabindex="-1"></a>  <span class="fu">add_markers</span>()</span></code></pre></div>
<p>Om grafen inte kommer upp direkt kan det fungera att trycka på den lilla ikonen med ett fönster och en pil i <em>Viewer</em>-fliken. Grafen ska då öppnas i en webbläsare.</p>
<p>Syntaxen till <code>plot_ly()</code> är inte helt olik <code>ggplot()</code>. Först anges datan, därefter argument för x- y-, och z-koordinater. Notera tilde-tecknet <code>~</code> före variabelnamnen. Eventuell färg sätts med <code>color</code>. Efter det lägger man till punkter (här <em>markers</em>) med en pipe in i <code>add_markers()</code>. Vi vill göra en liknande graf med gapminder-datan, men får börja med att filtrera på ett visst år.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-42" class="exercise"><strong>Uppgift 2.21  (Filtrera för år) </strong></span>Vad måste läggas till i funktionen nedan för att filtrera för data där året är 2007?</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="beskrivande-statistik.html#cb136-1" tabindex="-1"></a>dat_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb136-2"><a href="beskrivande-statistik.html#cb136-2" tabindex="-1"></a>  <span class="fu">___</span>(year <span class="sc">==</span> ___)</span></code></pre></div>
</div>
<p>Vi kan nu konstruera en 3d-graf med datan.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-43" class="exercise"><strong>Uppgift 2.22  (Gapminder i 3d) </strong></span>Vad måste läggas till i funktionen nedan för en 3d-graf med befolkningsmängd (<code>pop</code>) på x-axeln, livslängd (<code>lifeExp</code>) på y-axeln, bnp per capita (<code>gdpPercap</code>) på z-axeln, och färg efter kontinent (<code>continent</code>)? För att kunna identifiera specifika länder kan man också sätta argumentet <code>text</code>.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="beskrivande-statistik.html#cb137-1" tabindex="-1"></a><span class="fu">plot_ly</span>(___, <span class="at">x =</span> <span class="sc">~</span>___, <span class="at">y =</span> <span class="sc">~</span>___, <span class="at">z =</span> <span class="sc">~</span>___, <span class="at">color =</span> <span class="sc">~</span>___, <span class="at">text =</span> <span class="sc">~</span>country) <span class="sc">%&gt;%</span> </span>
<span id="cb137-2"><a href="beskrivande-statistik.html#cb137-2" tabindex="-1"></a>  <span class="fu">add_markers</span>()</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-44" class="exercise"><strong>Uppgift 2.23  (Log-transformationer) </strong></span>Inom statistiken är det vanligt att transformera variabler för att ta bort extremeffekter och visa på specifika dataegenskaper. En vanlig transform är att <em>logaritmera</em> ett värde, vilket innebär att man istället för att använda det ursprungliga värdet använder exponenten i någon bas (ofta basen tio). Ta till exempel värdet 10000, dess tio-logaritm är 4, eftersom 10 upphöjt i 4 är 10000. Logaritmer är vanliga vid data med extremvärden.</p>
<p>Grafen i uppgiften ovan präglas mycket av skillnader i bnp och befolkningsstorlek. Testa att tio-logaritmera variablerna och se om det blir en mer eller mindre överskådlig graf. Logaritmen kan göras genom att byta den ursprungliga variabeln mot en variabel transformerad med <code>log10()</code>. Fyll i stycket nedan.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="beskrivande-statistik.html#cb138-1" tabindex="-1"></a><span class="fu">plot_ly</span>(___, <span class="at">x =</span> <span class="sc">~</span><span class="fu">log10</span>(___), <span class="at">y =</span> <span class="sc">~</span><span class="fu">log10</span>(___), <span class="at">z =</span> <span class="sc">~</span>___, <span class="at">color =</span> <span class="sc">~</span>___, <span class="at">text =</span> <span class="sc">~</span>country) <span class="sc">%&gt;%</span> </span>
<span id="cb138-2"><a href="beskrivande-statistik.html#cb138-2" tabindex="-1"></a>  <span class="fu">add_markers</span>()</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-45" class="exercise"><strong>Uppgift 2.24  (Följa ett land) </strong></span>Likt en ggplot kan man lägga till graf-element. Här använder man dock en pipe för lägga till ett nytt element. Fyll i kodstycket nedan. Vad, om något, har lagts till i grafen?</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="beskrivande-statistik.html#cb139-1" tabindex="-1"></a><span class="fu">plot_ly</span>(___, <span class="at">x =</span> <span class="sc">~</span><span class="fu">log10</span>(___), <span class="at">y =</span> <span class="sc">~</span><span class="fu">log10</span>(___), <span class="at">z =</span> <span class="sc">~</span>___, <span class="at">color =</span> <span class="sc">~</span>___, <span class="at">text =</span> <span class="sc">~</span>country) <span class="sc">%&gt;%</span> </span>
<span id="cb139-2"><a href="beskrivande-statistik.html#cb139-2" tabindex="-1"></a>  <span class="fu">add_markers</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb139-3"><a href="beskrivande-statistik.html#cb139-3" tabindex="-1"></a>  <span class="fu">add_lines</span>(<span class="at">data =</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Costa Rica&quot;</span>))</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-46" class="exercise"><strong>Uppgift 2.25  (Spotify 3d) </strong></span>Som avslutning återvänder vi till spotify-datan från datorövning 1. Fyll i stycket nedan för att skapa en graf med tempo, dansbarhet och valens (<code>tempo</code>, <code>danceability</code>, <code>valence</code>) på axlarna, storlek efter energi (<code>energy</code>) och text efter spårnamn (<code>track_name</code>). Filtrera på valfri artist. Använd <code>unique(dat_spot$artist_name)</code> för att se tillgängliga artister.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="beskrivande-statistik.html#cb140-1" tabindex="-1"></a>dat_spot <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/adamflr/ST0060/main/Data/Spotify_data.csv&quot;</span>)</span>
<span id="cb140-2"><a href="beskrivande-statistik.html#cb140-2" tabindex="-1"></a>dat_small <span class="ot">&lt;-</span> dat_spot <span class="sc">%&gt;%</span> <span class="fu">filter</span>(artist_name <span class="sc">==</span> <span class="st">&quot;Weyes Blood&quot;</span>)</span>
<span id="cb140-3"><a href="beskrivande-statistik.html#cb140-3" tabindex="-1"></a></span>
<span id="cb140-4"><a href="beskrivande-statistik.html#cb140-4" tabindex="-1"></a><span class="fu">plot_ly</span>(dat_small, <span class="at">x =</span> <span class="sc">~</span>___, <span class="at">y =</span> <span class="sc">~</span>___, <span class="at">z =</span> <span class="sc">~</span>___, <span class="at">size =</span> <span class="sc">~</span>___, <span class="at">text =</span> <span class="sc">~</span>___) <span class="sc">%&gt;%</span> </span>
<span id="cb140-5"><a href="beskrivande-statistik.html#cb140-5" tabindex="-1"></a>  <span class="fu">add_markers</span>()</span></code></pre></div>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="datahantering-och-grafer.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="slumpvariabler.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-anvisningar.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
