<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Beskrivande statistik | R-anvisningar till Grundläggande statistik</title>
  <meta name="description" content="2 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  
  
  



<meta name="date" content="2024-10-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="datahantering-och-grafer.html"/>
<link rel="next" href="ett-stickprov-av-normalfördelad-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R-anvisningar</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduktion</a></li>
<li class="chapter" data-level="" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html"><i class="fa fa-check"></i>Installation av R och RStudio</a>
<ul>
<li class="chapter" data-level="0.1" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#inledning"><i class="fa fa-check"></i><b>0.1</b> Inledning</a></li>
<li class="chapter" data-level="0.2" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#installation-av-r"><i class="fa fa-check"></i><b>0.2</b> Installation av R</a></li>
<li class="chapter" data-level="0.3" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#installation-av-rstudio"><i class="fa fa-check"></i><b>0.3</b> Installation av RStudio</a></li>
<li class="chapter" data-level="0.4" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#gränssnittet-i-rstudio"><i class="fa fa-check"></i><b>0.4</b> Gränssnittet i RStudio</a></li>
<li class="chapter" data-level="0.5" data-path="installation-av-r-och-rstudio.html"><a href="installation-av-r-och-rstudio.html#paket-i-r"><i class="fa fa-check"></i><b>0.5</b> Paket i R</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html"><i class="fa fa-check"></i><b>1</b> Datahantering och grafer</a>
<ul>
<li class="chapter" data-level="1.1" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#uppstart-och-orientering"><i class="fa fa-check"></i><b>1.1</b> Uppstart och orientering</a></li>
<li class="chapter" data-level="1.2" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#packages-från-cran"><i class="fa fa-check"></i><b>1.2</b> <em>Packages</em> från CRAN</a></li>
<li class="chapter" data-level="1.3" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#objekt-och-funktioner"><i class="fa fa-check"></i><b>1.3</b> Objekt och funktioner</a></li>
<li class="chapter" data-level="1.4" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#sekvenser-av-funktioner"><i class="fa fa-check"></i><b>1.4</b> Sekvenser av funktioner</a></li>
<li class="chapter" data-level="1.5" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#datainskrivning"><i class="fa fa-check"></i><b>1.5</b> Datainskrivning</a></li>
<li class="chapter" data-level="1.6" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#urval-ur-en-tabell-med-select-och-filter"><i class="fa fa-check"></i><b>1.6</b> Urval ur en tabell med <code>select</code> och <code>filter</code></a></li>
<li class="chapter" data-level="1.7" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#grafer-med-ggplot2"><i class="fa fa-check"></i><b>1.7</b> Grafer med <code>ggplot2</code></a></li>
<li class="chapter" data-level="1.8" data-path="datahantering-och-grafer.html"><a href="datahantering-och-grafer.html#ai-uppgift-i"><i class="fa fa-check"></i><b>1.8</b> AI-uppgift I</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html"><i class="fa fa-check"></i><b>2</b> Beskrivande statistik</a>
<ul>
<li class="chapter" data-level="2.1" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#repetition-från-datorövning-1"><i class="fa fa-check"></i><b>2.1</b> Repetition från datorövning 1</a></li>
<li class="chapter" data-level="2.2" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#import-av-data-från-en-excelfil"><i class="fa fa-check"></i><b>2.2</b> Import av data från en Excelfil</a></li>
<li class="chapter" data-level="2.3" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#ändra-och-skapa-nya-kolumner-med-mutate"><i class="fa fa-check"></i><b>2.3</b> Ändra och skapa nya kolumner med <code>mutate</code></a></li>
<li class="chapter" data-level="2.4" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#sammanfattande-lägesmått"><i class="fa fa-check"></i><b>2.4</b> Sammanfattande lägesmått</a></li>
<li class="chapter" data-level="2.5" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#sammanfattande-spridningsmått"><i class="fa fa-check"></i><b>2.5</b> Sammanfattande spridningsmått</a></li>
<li class="chapter" data-level="2.6" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#ordna-upp-beskrivande-statistik-och-exportera"><i class="fa fa-check"></i><b>2.6</b> Ordna upp beskrivande statistik och exportera</a></li>
<li class="chapter" data-level="2.7" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#kumulativt-medelvärde"><i class="fa fa-check"></i><b>2.7</b> Kumulativt medelvärde</a></li>
<li class="chapter" data-level="2.8" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#tredimensionella-grafer-med-plotly"><i class="fa fa-check"></i><b>2.8</b> Tredimensionella grafer med <code>plotly</code></a></li>
<li class="chapter" data-level="2.9" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#ai-uppgift-ii"><i class="fa fa-check"></i><b>2.9</b> AI-uppgift II</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html"><i class="fa fa-check"></i><b>3</b> Ett stickprov av normalfördelad data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#repetition-från-datorövning-2"><i class="fa fa-check"></i><b>3.1</b> Repetition från datorövning 2</a></li>
<li class="chapter" data-level="3.2" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#test-av-medelvärde-för-normalfördelad-data"><i class="fa fa-check"></i><b>3.2</b> Test av medelvärde för normalfördelad data</a></li>
<li class="chapter" data-level="3.3" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#konfidensintervall-för-normalfördelad-data"><i class="fa fa-check"></i><b>3.3</b> Konfidensintervall för normalfördelad data</a></li>
<li class="chapter" data-level="3.4" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#normalfördelad-data-och-centrala-gränsvärdesatsen"><i class="fa fa-check"></i><b>3.4</b> Normalfördelad data och centrala gränsvärdesatsen</a></li>
<li class="chapter" data-level="3.5" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#centrala-gränsvärdesatsen"><i class="fa fa-check"></i><b>3.5</b> Centrala gränsvärdesatsen</a></li>
<li class="chapter" data-level="3.6" data-path="ett-stickprov-av-normalfördelad-data.html"><a href="ett-stickprov-av-normalfördelad-data.html#bonus.-simuleringar-för-t-test-och-konfidensintervall"><i class="fa fa-check"></i><b>3.6</b> Bonus. Simuleringar för t-test och konfidensintervall</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html"><i class="fa fa-check"></i><b>4</b> Ett stickprov av icke-normalfördelad data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#repetition-av-datorövning-3"><i class="fa fa-check"></i><b>4.1</b> Repetition av datorövning 3</a></li>
<li class="chapter" data-level="4.2" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#proportioner-från-binär-data"><i class="fa fa-check"></i><b>4.2</b> Proportioner från binär data</a></li>
<li class="chapter" data-level="4.3" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#konfidensintervall-för-proportioner"><i class="fa fa-check"></i><b>4.3</b> Konfidensintervall för proportioner</a></li>
<li class="chapter" data-level="4.4" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#chi-två-test-för-goodness-of-fit"><i class="fa fa-check"></i><b>4.4</b> Chi-två-test för goodness-of-fit</a></li>
<li class="chapter" data-level="4.5" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#chi-två-test-när-någon-parameter-skattas-från-datan"><i class="fa fa-check"></i><b>4.5</b> Chi-två-test när någon parameter skattas från datan</a></li>
<li class="chapter" data-level="4.6" data-path="ett-stickprov-av-icke-normalfördelad-data.html"><a href="ett-stickprov-av-icke-normalfördelad-data.html#bonus.-interaktiva-kartor-med-leaflet"><i class="fa fa-check"></i><b>4.6</b> Bonus. Interaktiva kartor med leaflet</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html"><i class="fa fa-check"></i><b>5</b> Test för två stickprov</a>
<ul>
<li class="chapter" data-level="5.1" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#repetition-av-datorövning-4"><i class="fa fa-check"></i><b>5.1</b> Repetition av datorövning 4</a></li>
<li class="chapter" data-level="5.2" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#två-stickprov-och-normalfördelad-data"><i class="fa fa-check"></i><b>5.2</b> Två stickprov och normalfördelad data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#t-test-för-två-matchade-stickprov"><i class="fa fa-check"></i><b>5.2.1</b> t-test för två matchade stickprov</a></li>
<li class="chapter" data-level="5.2.2" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#t-test-för-två-oberoende-stickprov"><i class="fa fa-check"></i><b>5.2.2</b> t-test för två oberoende stickprov</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#z-test-och-konfidensintervall-för-två-proportioner"><i class="fa fa-check"></i><b>5.3</b> z-test och konfidensintervall för två proportioner</a></li>
<li class="chapter" data-level="5.4" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#chi-två-test-för-korstabeller"><i class="fa fa-check"></i><b>5.4</b> Chi-två-test för korstabeller</a></li>
<li class="chapter" data-level="5.5" data-path="test-för-två-stickprov.html"><a href="test-för-två-stickprov.html#bonus.-bilder-i-r"><i class="fa fa-check"></i><b>5.5</b> Bonus. Bilder i R</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="variansanalys.html"><a href="variansanalys.html"><i class="fa fa-check"></i><b>6</b> Variansanalys</a>
<ul>
<li class="chapter" data-level="6.1" data-path="variansanalys.html"><a href="variansanalys.html#repetition-av-datorövning-5"><i class="fa fa-check"></i><b>6.1</b> Repetition av datorövning 5</a></li>
<li class="chapter" data-level="6.2" data-path="variansanalys.html"><a href="variansanalys.html#allmänt"><i class="fa fa-check"></i><b>6.2</b> Allmänt</a></li>
<li class="chapter" data-level="6.3" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-en-faktor"><i class="fa fa-check"></i><b>6.3</b> Variansanalys. En faktor</a></li>
<li class="chapter" data-level="6.4" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-en-faktor-med-block"><i class="fa fa-check"></i><b>6.4</b> Variansanalys. En faktor med block</a></li>
<li class="chapter" data-level="6.5" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-två-faktorer-med-block"><i class="fa fa-check"></i><b>6.5</b> Variansanalys. Två faktorer med block</a></li>
<li class="chapter" data-level="6.6" data-path="variansanalys.html"><a href="variansanalys.html#modellantaganden-och-residualer"><i class="fa fa-check"></i><b>6.6</b> Modellantaganden och residualer</a></li>
<li class="chapter" data-level="6.7" data-path="variansanalys.html"><a href="variansanalys.html#bonus.-statistik-för-ekologi"><i class="fa fa-check"></i><b>6.7</b> Bonus. Statistik för ekologi</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html"><i class="fa fa-check"></i><b>7</b> Regression och korrelation</a>
<ul>
<li class="chapter" data-level="7.1" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#repetition-av-datorövning-6"><i class="fa fa-check"></i><b>7.1</b> Repetition av datorövning 6</a></li>
<li class="chapter" data-level="7.2" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#regression"><i class="fa fa-check"></i><b>7.2</b> Regression</a></li>
<li class="chapter" data-level="7.3" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#korrelation"><i class="fa fa-check"></i><b>7.3</b> Korrelation</a></li>
<li class="chapter" data-level="7.4" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#bonus.-skrapa-data-från-webbsidor"><i class="fa fa-check"></i><b>7.4</b> Bonus. Skrapa data från webbsidor</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R-anvisningar till <em>Grundläggande statistik</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="beskrivande-statistik" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Beskrivande statistik<a href="beskrivande-statistik.html#beskrivande-statistik" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Datorövning 2 handlar om beräkning av beskrivande statistik i R. Efter övningen ska vi kunna</p>
<ul>
<li>Importera data från en excelfil,</li>
<li>Beräkna lämpliga lägesmått för en variabel,</li>
<li>Beräkna lämpliga spridningsmått för en variabel,</li>
<li>Konstruera grafer som jämför två eller flera gruppers läge och spridning.</li>
</ul>
<div id="repetition-från-datorövning-1" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Repetition från datorövning 1<a href="beskrivande-statistik.html#repetition-från-datorövning-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>När man arbetar i R är det klokt att använda ett avancerat gränssnitt som RStudio och att skriva sin kod i ett separat skript. I RStudio kan man starta ett nytt skript genom <em>Ctrl + Shift + N</em>.</p>
<p>Mycket funktionalitet i R ligger i tilläggspaket (<em>Packages</em>). Paket måste installeras första gången de används och laddas varje session de används, t.ex.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="beskrivande-statistik.html#cb63-1" tabindex="-1"></a><span class="co"># install.packages(&quot;tidyverse&quot;) # Installera tidyverse</span></span>
<span id="cb63-2"><a href="beskrivande-statistik.html#cb63-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)              <span class="co"># Ladda ett paket</span></span></code></pre></div>
<p>Objekt skapas med <em>assign</em>-pilen <code>&lt;-</code>. Det är ett sätt att importera data till R. Det är dock vanligare importera från en extern fil. Mer om det senare.</p>
<p>Vi arbetar nästan alltid med data på tabellformat där variablerna är kolumner och observationerna rader. I gapminder-datan ges raderna av ett land för ett visst år.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="beskrivande-statistik.html#cb64-1" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb64-2"><a href="beskrivande-statistik.html#cb64-2" tabindex="-1"></a>gapminder                       <span class="co"># Skriv ut objektet gapminder</span></span></code></pre></div>
<p>Funktioner agerar på objekt och ger något utfall. Här nedan beräknas medelvärdet av livslängd med funktionen <code>mean()</code>. Dollartecknet används för att ange en specifik kolumn i dataobjektet. Funktioner styrs av möjliga argument - här används <code>na.rm</code> för att ange att saknade värden inte ska tas med i beräkningen</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="beskrivande-statistik.html#cb65-1" tabindex="-1"></a><span class="fu">mean</span>(gapminder<span class="sc">$</span>lifeExp, <span class="at">na.rm =</span> T) <span class="co"># Beräkna medel av lifeExp</span></span></code></pre></div>
<pre><code>## [1] 59.47444</code></pre>
<p>Funktionerna <code>filter()</code> och <code>select()</code> kan användas för att välja kolumner och rader. Funktioner kan länkas samman med en pipe <code>%&gt;%</code> för att skapa sekvenser av funktioner. Man kan tänka på pipen som <em>och sen</em>.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="beskrivande-statistik.html#cb67-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb67-2"><a href="beskrivande-statistik.html#cb67-2" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Norway&quot;</span>, year <span class="sc">&gt;</span> <span class="dv">1972</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-3"><a href="beskrivande-statistik.html#cb67-3" tabindex="-1"></a>  <span class="fu">select</span>(country, lifeExp)</span></code></pre></div>
<p>Slutligen tittade vi på grafer med ggplot2-paketet. En ggplot byggs upp med tre grundelar: data, geometrier (grafens objekt och former), och <em>aesthetics</em> (utseende och placering av geometrierna). I ett enkelt spridningsdiagram är data två numeriska variabler, geometrierna är punkter, och punkternas placering ges av en x-koordinat och en y-koordinat. Ytterligare <em>aesthetics</em> kan vara punkternas färger (<code>color</code>) och storlek (<code>size</code>).</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="beskrivande-statistik.html#cb68-1" tabindex="-1"></a>dat_small <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>)</span>
<span id="cb68-2"><a href="beskrivande-statistik.html#cb68-2" tabindex="-1"></a><span class="fu">ggplot</span>(dat_small, <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, </span>
<span id="cb68-3"><a href="beskrivande-statistik.html#cb68-3" tabindex="-1"></a>                      <span class="at">size =</span> pop, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb68-4"><a href="beskrivande-statistik.html#cb68-4" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
</div>
<div id="import-av-data-från-en-excelfil" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Import av data från en Excelfil<a href="beskrivande-statistik.html#import-av-data-från-en-excelfil" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Inom vetenskapen är Excel det vanligaste filformatet för mindre datamängder. Till den här delen ska vi återigen arbeta med data från <em>Gapminder</em>.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-23" class="exercise"><strong>Uppgift 2.1  (Excelfil från Canvas) </strong></span>Hitta excelfilen <em>Gapminder.xlsx</em> på Canvas och ladda ner den. Hitta mappen som filen laddats ned till.</p>
</div>
<p>I R kan man läsa in data från en Excel-fil med funktionen <code>read_excel()</code> från paketet <code>readxl</code>. Som argument till funktionen sätts filens sökväg - dess placering på hårddisken. Stycket nedan importerar från en excelfil som ligger på hårddisken <em>C:</em> i mappen <em>Downloads</em>, under <em>User_name</em>, under <em>Users</em>.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="beskrivande-statistik.html#cb69-1" tabindex="-1"></a><span class="fu">library</span>(readxl)  <span class="co"># Ladda readxl</span></span></code></pre></div>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="beskrivande-statistik.html#cb70-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;C:/Users/Name/Downloads/Gapminder.xlsx&quot;</span>)</span>
<span id="cb70-2"><a href="beskrivande-statistik.html#cb70-2" tabindex="-1"></a><span class="co"># Läs in från en lokal excelfil</span></span>
<span id="cb70-3"><a href="beskrivande-statistik.html#cb70-3" tabindex="-1"></a>gapminder</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-24" class="exercise"><strong>Uppgift 2.2  (Importera från excelfil) </strong></span>Var ligger den nedladdade filen <em>Gapminder.xlsx</em>? Gör lämplig ändring i koden ovan för att läsa in data från den filen. Notera att R använder högerlutande snedstreck <code>/</code>, så om en kopierad sökväg har vänster-snedstreck måste de ändras. Kontrollera att datan blivit korrekt inläst genom att köra objektnamnet <code>gapminder</code>.</p>
</div>
<p>En R-session har alltid en grundmapp, ett <em>Working directory</em>. Man kan se vilken mapp det är genom att köra</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="beskrivande-statistik.html#cb71-1" tabindex="-1"></a><span class="fu">getwd</span>() <span class="co"># Ange working directory</span></span></code></pre></div>
<p>En filsökväg kan anges antingen som en fullständig sökväg, som ovan, eller relativt <em>working directory</em>. Om man till exempel har en fil <em>Gapminder.xlsx</em> som ligger i en mapp <em>Data</em> som i sin tur ligger i <em>working directory</em>, kan man importera data från filen med</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="beskrivande-statistik.html#cb72-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;Data/Gapminder.xlsx&quot;</span>)</span>
<span id="cb72-2"><a href="beskrivande-statistik.html#cb72-2" tabindex="-1"></a><span class="co"># Läs in från en lokal excelfil (relativt wd)</span></span>
<span id="cb72-3"><a href="beskrivande-statistik.html#cb72-3" tabindex="-1"></a>gapminder </span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-25" class="exercise"><strong>Uppgift 2.3  (Working directory) </strong></span>Identifiera <em>working directory</em> för din nuvarande Rs-session genom att köra <code>getwd()</code>.</p>
</div>
<p>RStudio har också en inbyggd funktionalitet för att importera data. Man kan hitta den genom att gå till <em>Environment</em>-fliken och sedan <em>Import Dataset</em>. Det kan vara en bra hjälp, i synnerhet om man vill sätta datatyp för någon specifik kolumn.</p>
<p>Om du inte har tillgång till Canvas kan Gapminder-datan alternativt hämtas från paketet Gapminder.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="beskrivande-statistik.html#cb73-1" tabindex="-1"></a><span class="co"># install.packages(&quot;gapminder&quot;)</span></span>
<span id="cb73-2"><a href="beskrivande-statistik.html#cb73-2" tabindex="-1"></a><span class="fu">library</span>(gapminder)             </span>
<span id="cb73-3"><a href="beskrivande-statistik.html#cb73-3" tabindex="-1"></a>gapminder                      </span></code></pre></div>
</div>
<div id="ändra-och-skapa-nya-kolumner-med-mutate" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Ändra och skapa nya kolumner med <code>mutate</code><a href="beskrivande-statistik.html#ändra-och-skapa-nya-kolumner-med-mutate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Variabler kan omräknas och nya variabler kan skapas med <code>mutate</code>-funktionen. I gapminder-datan finns bnp per capita. Om man vill ha nationell BNP kan man skapa en ny kolumn och beräkna den som bnp per capita gånger populationen.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="beskrivande-statistik.html#cb74-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>             <span class="co"># Ta datan, och sen</span></span>
<span id="cb74-2"><a href="beskrivande-statistik.html#cb74-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp =</span> gdpPercap <span class="sc">*</span> pop)        <span class="co"># Beräkna bnp</span></span></code></pre></div>
<p>Den inledande delen med <code>gapminder &lt;-</code> gör så att utfallet av beräkningen sparas i objektet <code>gapminder</code>.
Vi kan skriva ut objektet och se resultatet av beräkningen:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="beskrivande-statistik.html#cb75-1" tabindex="-1"></a>gapminder</span></code></pre></div>
<p>Om man vill skapa en kolumn med mellanrum i namnet måste man skriva namnet inom <em>backticks</em> ` för att ange att namnet ska tolkas som en enhet. Jag rekommenderar att undvika mellanrum i kolumnnamn och istället använda stora bokstäver eller understreck för ett nytt ord (<code>NationalGDP</code> eller <code>National_GDP</code>).</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="beskrivande-statistik.html#cb76-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="beskrivande-statistik.html#cb76-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">National GDP</span><span class="st">`</span> <span class="ot">=</span> gdpPercap <span class="sc">*</span> pop)</span>
<span id="cb76-3"><a href="beskrivande-statistik.html#cb76-3" tabindex="-1"></a>gapminder</span></code></pre></div>
</div>
<div id="sammanfattande-lägesmått" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Sammanfattande lägesmått<a href="beskrivande-statistik.html#sammanfattande-lägesmått" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Den importerade datan anger medellivslängd, populationsstorlek och bnp per capita per land och år. Vi kan börja med att producera en bubbelgraf över datan - en av de presentationer Gapminder ofta använder. En bubbelgraf är ett spridningsdiagram där punktens storlek beror på en tredje variabel.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="beskrivande-statistik.html#cb77-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, </span>
<span id="cb77-2"><a href="beskrivande-statistik.html#cb77-2" tabindex="-1"></a>                      <span class="at">size =</span> pop, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb77-3"><a href="beskrivande-statistik.html#cb77-3" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb77-4"><a href="beskrivande-statistik.html#cb77-4" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> year)</span></code></pre></div>
<p>En interaktiv version kan vara bra om man vill identifiera någon specifik punkt.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="beskrivande-statistik.html#cb78-1" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">size =</span> pop, </span>
<span id="cb78-2"><a href="beskrivande-statistik.html#cb78-2" tabindex="-1"></a>                           <span class="at">color =</span> continent, <span class="at">text =</span> country)) <span class="sc">+</span></span>
<span id="cb78-3"><a href="beskrivande-statistik.html#cb78-3" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb78-4"><a href="beskrivande-statistik.html#cb78-4" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> year)</span>
<span id="cb78-5"><a href="beskrivande-statistik.html#cb78-5" tabindex="-1"></a></span>
<span id="cb78-6"><a href="beskrivande-statistik.html#cb78-6" tabindex="-1"></a><span class="co"># install.packages(&quot;plotly&quot;)  # Kör om ej installerat tidigare</span></span>
<span id="cb78-7"><a href="beskrivande-statistik.html#cb78-7" tabindex="-1"></a><span class="fu">library</span>(plotly)               <span class="co"># Ladda paketet plotly</span></span>
<span id="cb78-8"><a href="beskrivande-statistik.html#cb78-8" tabindex="-1"></a><span class="fu">ggplotly</span>(g)                   <span class="co"># Interaktiv graf g</span></span></code></pre></div>
<p>Under föreläsningen såg vi exempel på två lägesmått: medelvärdet (egentligen det <em>aritmetiska</em> medelvärdet) och medianen. De har bägge enkla funktioner i R: <code>mean()</code> respektive <code>median()</code>. Vi plockar ut en variabel ur datan och beräknar bägge.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="beskrivande-statistik.html#cb79-1" tabindex="-1"></a>gapminder<span class="sc">$</span>gdpPercap         <span class="co"># Vektorn med data</span></span></code></pre></div>
<pre><code>##    [1]    779.4453    820.8530    853.1007    836.1971    739.9811    786.1134
##    [7]    978.0114    852.3959    649.3414    635.3414    726.7341    974.5803
##   [13]   1601.0561   1942.2842   2312.8890   2760.1969   3313.4222   3533.0039
##   [19]   3630.8807   3738.9327   2497.4379   3193.0546   4604.2117   5937.0295
##   [25]   2449.0082   3013.9760   2550.8169   3246.9918   4182.6638   4910.4168
##   [31]   5745.1602   5681.3585   5023.2166   4797.2951   5288.0404   6223.3675
##   [37]   3520.6103   3827.9405   4269.2767   5522.7764   5473.2880   3008.6474
##   [43]   2756.9537   2430.2083   2627.8457   2277.1409   2773.2873   4797.2313
##   [49]   5911.3151   6856.8562   7133.1660   8052.9530   9443.0385  10079.0267
##   [55]   8997.8974   9139.6714   9308.4187  10967.2820   8797.6407  12779.3796
##   [61]  10039.5956  10949.6496  12217.2269  14526.1246  16788.6295  18334.1975
##   [67]  19477.0093  21888.8890  23424.7668  26997.9366  30687.7547  34435.3674
##   [73]   6137.0765   8842.5980  10750.7211  12834.6024  16661.6256  19749.4223
##   [79]  21597.0836  23687.8261  27042.0187  29095.9207  32417.6077  36126.4927
##   [85]   9867.0848  11635.7995  12753.2751  14804.6727  18268.6584  19340.1020
##   [91]  19211.1473  18524.0241  19035.5792  20292.0168  23403.5593  29796.0483
##   [97]    684.2442    661.6375    686.3416    721.1861    630.2336    659.8772
##  [103]    676.9819    751.9794    837.8102    972.7700   1136.3904   1391.2538
##  [109]   8343.1051   9714.9606  10991.2068  13149.0412  16672.1436  19117.9745
##  [115]  20979.8459  22525.5631  25575.5707  27561.1966  30485.8838  33692.6051
##  [121]   1062.7522    959.6011    949.4991   1035.8314   1085.7969   1029.1613
##  [127]   1277.8976   1225.8560   1191.2077   1232.9753   1372.8779   1441.2849
##  [133]   2677.3263   2127.6863   2180.9725   2586.8861   2980.3313   3548.0978
##  [139]   3156.5105   2753.6915   2961.6997   3326.1432   3413.2627   3822.1371
##  [145]    973.5332   1353.9892   1709.6837   2172.3524   2860.1698   3528.4813
##  [151]   4126.6132   4314.1148   2546.7814   4766.3559   6018.9752   7446.2988
##  [157]    851.2411    918.2325    983.6540   1214.7093   2263.6111   3214.8578
##  [163]   4551.1421   6205.8839   7954.1116   8647.1423  11003.6051  12569.8518
##  [169]   2108.9444   2487.3660   3336.5858   3429.8644   4985.7115   6660.1187
##  [175]   7030.8359   7807.0958   6950.2830   7957.9808   8131.2128   9065.8008
##  [181]   2444.2866   3008.6707   4254.3378   5577.0028   6597.4944   7612.2404
##  [187]   8224.1916   8239.8548   6302.6234   5970.3888   7696.7777  10680.7928
##  [193]    543.2552    617.1835    722.5120    794.8266    854.7360    743.3870
##  [199]    807.1986    912.0631    931.7528    946.2950   1037.6452   1217.0330
##  [205]    339.2965    379.5646    355.2032    412.9775    464.0995    556.1033
##  [211]    559.6032    621.8188    631.6999    463.1151    446.4035    430.0707
##  [217]    368.4693    434.0383    496.9136    523.4323    421.6240    524.9722
##  [223]    624.4755    683.8956    682.3032    734.2852    896.2260   1713.7787
##  [229]   1172.6677   1313.0481   1399.6074   1508.4531   1684.1465   1783.4329
##  [235]   2367.9833   2602.6642   1793.1633   1694.3375   1934.0114   2042.0952
##  [241]  11367.1611  12489.9501  13462.4855  16076.5880  18970.5709  22090.8831
##  [247]  22898.7921  26626.5150  26342.8843  28954.9259  33328.9651  36319.2350
##  [253]   1071.3107   1190.8443   1193.0688   1136.0566   1070.0133   1109.3743
##  [259]    956.7530    844.8764    747.9055    740.5063    738.6906    706.0165
##  [265]   1178.6659   1308.4956   1389.8176   1196.8106   1104.1040   1133.9850
##  [271]    797.9081    952.3861   1058.0643   1004.9614   1156.1819   1704.0637
##  [277]   3939.9788   4315.6227   4519.0943   5106.6543   5494.0244   4756.7638
##  [283]   5095.6657   5547.0638   7596.1260  10118.0532  10778.7838  13171.6388
##  [289]    400.4486    575.9870    487.6740    612.7057    676.9001    741.2375
##  [295]    962.4214   1378.9040   1655.7842   2289.2341   3119.2809   4959.1149
##  [301]   2144.1151   2323.8056   2492.3511   2678.7298   3264.6600   3815.8079
##  [307]   4397.5757   4903.2191   5444.6486   6117.3617   5755.2600   7006.5804
##  [313]   1102.9909   1211.1485   1406.6483   1876.0296   1937.5777   1172.6030
##  [319]   1267.1001   1315.9808   1246.9074   1173.6182   1075.8116    986.1479
##  [325]    780.5423    905.8602    896.3146    861.5932    904.8961    795.7573
##  [331]    673.7478    672.7748    457.7192    312.1884    241.1659    277.5519
##  [337]   2125.6214   2315.0566   2464.7832   2677.9396   3213.1527   3259.1790
##  [343]   4879.5075   4201.1949   4016.2395   3484.1644   3484.0620   3632.5578
##  [349]   2627.0095   2990.0108   3460.9370   4161.7278   5118.1469   5926.8770
##  [355]   5262.7348   5629.9153   6160.4163   6677.0453   7723.4472   9645.0614
##  [361]   1388.5947   1500.8959   1728.8694   2052.0505   2378.2011   2517.7365
##  [367]   2602.7102   2156.9561   1648.0738   1786.2654   1648.8008   1544.7501
##  [373]   3119.2365   4338.2316   5477.8900   6960.2979   9164.0901  11305.3852
##  [379]  13221.8218  13822.5839   8447.7949   9875.6045  11628.3890  14619.2227
##  [385]   5586.5388   6092.1744   5180.7559   5690.2680   5305.4453   6380.4950
##  [391]   7316.9181   7532.9248   5592.8440   5431.9904   6340.6467   8948.1029
##  [397]   6876.1403   8256.3439  10136.8671  11399.4449  13108.4536  14800.1606
##  [403]  15377.2285  16310.4434  14297.0212  16048.5142  17596.2102  22833.3085
##  [409]   9692.3852  11099.6593  13583.3135  15937.2112  18866.2072  20422.9015
##  [415]  21688.0405  25116.1758  26406.7399  29804.3457  32166.5001  35278.4187
##  [421]   2669.5295   2864.9691   3020.9893   3020.0505   3694.2124   3081.7610
##  [427]   2879.4681   2880.1026   2377.1562   1895.0170   1908.2609   2082.4816
##  [433]   1397.7171   1544.4030   1662.1374   1653.7230   2189.8745   2681.9889
##  [439]   2861.0924   2899.8422   3044.2142   3614.1013   4563.8082   6025.3748
##  [445]   3522.1107   3780.5467   4086.1141   4579.0742   5280.9947   6679.6233
##  [451]   7213.7913   6481.7770   7103.7026   7429.4559   5773.0445   6873.2623
##  [457]   1418.8224   1458.9153   1693.3359   1814.8807   2024.0081   2785.4936
##  [463]   3503.7296   3885.4607   3794.7552   4173.1818   4754.6044   5581.1810
##  [469]   3048.3029   3421.5232   3776.8036   4358.5954   4520.2460   5138.9224
##  [475]   4098.3442   4140.4421   4444.2317   5154.8255   5351.5687   5728.3535
##  [481]    375.6431    426.0964    582.8420    915.5960    672.4123    958.5668
##  [487]    927.8253    966.8968   1132.0550   2814.4808   7703.4959  12154.0897
##  [493]    328.9406    344.1619    380.9958    468.7950    514.3242    505.7538
##  [499]    524.8758    521.1341    582.8585    913.4708    765.3500    641.3695
##  [505]    362.1463    378.9042    419.4564    516.1186    566.2439    556.8084
##  [511]    577.8607    573.7413    421.3535    515.8894    530.0535    690.8056
##  [517]   6424.5191   7545.4154   9371.8426  10921.6363  14358.8759  15605.4228
##  [523]  18533.1576  21141.0122  20647.1650  23723.9502  28204.5906  33207.0844
##  [529]   7029.8093   8662.8349  10560.4855  12999.9177  16107.1917  18292.6351
##  [535]  20293.8975  22066.4421  24703.7961  25889.7849  28926.0323  30470.0167
##  [541]   4293.4765   4976.1981   6631.4592   8358.7620  11401.9484  21745.5733
##  [547]  15113.3619  11864.4084  13522.1575  14722.8419  12521.7139  13206.4845
##  [553]    485.2307    520.9267    599.6503    734.7829    756.0868    884.7553
##  [559]    835.8096    611.6589    665.6244    653.7302    660.5856    752.7497
##  [565]   7144.1144  10187.8267  12902.4629  14745.6256  18016.1803  20512.9212
##  [571]  22031.5327  24639.1857  26505.3032  27788.8842  30035.8020  32170.3744
##  [577]    911.2989   1043.5615   1190.0411   1125.6972   1178.2237    993.2240
##  [583]    876.0326    847.0061    925.0602   1005.2458   1111.9846   1327.6089
##  [589]   3530.6901   4916.2999   6017.1907   8513.0970  12724.8296  14195.5243
##  [595]  15268.4209  16120.5284  17541.4963  18747.6981  22514.2548  27538.4119
##  [601]   2428.2378   2617.1560   2750.3644   3242.5311   4031.4083   4879.9927
##  [607]   4820.4948   4246.4860   4439.4508   4684.3138   4858.3475   5186.0500
##  [613]    510.1965    576.2670    686.3737    708.7595    741.6662    874.6859
##  [619]    857.2504    805.5725    794.3484    869.4498    945.5836    942.6542
##  [625]    299.8503    431.7905    522.0344    715.5806    820.2246    764.7260
##  [631]    838.1240    736.4154    745.5399    796.6645    575.7047    579.2317
##  [637]   1840.3669   1726.8879   1796.5890   1452.0577   1654.4569   1874.2989
##  [643]   2011.1595   1823.0160   1456.3095   1341.7269   1270.3649   1201.6372
##  [649]   2194.9262   2220.4877   2291.1568   2538.2694   2529.8423   3203.2081
##  [655]   3121.7608   3023.0967   3081.6946   3160.4549   3099.7287   3548.3308
##  [661]   3054.4212   3629.0765   4692.6483   6197.9628   8315.9281  11186.1413
##  [667]  14560.5305  20038.4727  24757.6030  28377.6322  30209.0152  39724.9787
##  [673]   5263.6738   6040.1800   7550.3599   9326.6447  10168.6561  11674.8374
##  [679]  12545.9907  12986.4800  10535.6285  11712.7768  14843.9356  18008.9444
##  [685]   7267.6884   9244.0014  10350.1591  13319.8957  15798.0636  19654.9625
##  [691]  23269.6075  26923.2063  25144.3920  28061.0997  31163.2020  36180.7892
##  [697]    546.5657    590.0620    658.3472    700.7706    724.0325    813.3373
##  [703]    855.7235    976.5127   1164.4068   1458.8174   1746.7695   2452.2104
##  [709]    749.6817    858.9003    849.2898    762.4318   1111.1079   1382.7021
##  [715]   1516.8730   1748.3570   2383.1409   3119.3356   2873.9129   3540.6516
##  [721]   3035.3260   3290.2576   4187.3298   5906.7318   9613.8186  11888.5951
##  [727]   7608.3346   6642.8814   7235.6532   8263.5903   9240.7620  11605.7145
##  [733]   4129.7661   6229.3336   8341.7378   8931.4598   9576.0376  14688.2351
##  [739]  14517.9071  11643.5727   3745.6407   3076.2398   4390.7173   4471.0619
##  [745]   5210.2803   5599.0779   6631.5973   7655.5690   9530.7729  11150.9811
##  [751]  12618.3214  13872.8665  17558.8155  24521.9471  34077.0494  40675.9964
##  [757]   4086.5221   5385.2785   7105.6307   8393.7414  12786.9322  13306.6192
##  [763]  15367.0292  17122.4799  18051.5225  20896.6092  21905.5951  25523.2771
##  [769]   4931.4042   6248.6562   8243.5823  10022.4013  12269.2738  14255.9847
##  [775]  16537.4835  19207.2348  22013.6449  24675.0245  27968.0982  28569.7197
##  [781]   2898.5309   4756.5258   5246.1075   6124.7035   7433.8893   6650.1956
##  [787]   6068.0513   6351.2375   7404.9237   7121.9247   6994.7749   7320.8803
##  [793]   3216.9563   4317.6944   6576.6495   9847.7886  14778.7864  16610.3770
##  [799]  19384.1057  22375.9419  26824.8951  28816.5850  28604.5919  31656.0681
##  [805]   1546.9078   1886.0806   2348.0092   2741.7963   2110.8563   2852.3516
##  [811]   4161.4160   4448.6799   3431.5936   3645.3796   3844.9172   4519.4612
##  [817]    853.5409    944.4383    896.9664   1056.7365   1222.3600   1267.6132
##  [823]   1348.2258   1361.9369   1341.9217   1360.4850   1287.5147   1463.2493
##  [829]   1088.2778   1571.1347   1621.6936   2143.5406   3701.6215   4106.3012
##  [835]   4106.5253   4106.4923   3726.0635   1690.7568   1646.7582   1593.0655
##  [841]   1030.5922   1487.5935   1536.3444   2029.2281   3030.8767   4657.2210
##  [847]   5622.9425   8533.0888  12104.2787  15993.5280  19233.9882  23348.1397
##  [853] 108382.3529 113523.1329  95458.1118  80894.8833 109347.8670  59265.4771
##  [859]  31354.0357  28118.4300  34932.9196  40300.6200  35110.1057  47306.9898
##  [865]   4834.8041   6089.7869   5714.5606   6006.9830   7486.3843   8659.6968
##  [871]   7640.5195   5377.0913   6890.8069   8754.9639   9313.9388  10461.0587
##  [877]    298.8462    335.9971    411.8006    498.6390    496.5816    745.3695
##  [883]    797.2631    773.9932    977.4863   1186.1480   1275.1846   1569.3314
##  [889]    575.5730    620.9700    634.1952    713.6036    803.0055    640.3224
##  [895]    572.1996    506.1139    636.6229    609.1740    531.4824    414.5073
##  [901]   2387.5481   3448.2844   6757.0308  18772.7517  21011.4972  21951.2118
##  [907]  17364.2754  11770.5898   9640.1385   9467.4461   9534.6775  12057.4993
##  [913]   1443.0117   1589.2027   1643.3871   1634.0473   1748.5630   1544.2286
##  [919]   1302.8787   1155.4419   1040.6762    986.2959    894.6371   1044.7701
##  [925]    369.1651    416.3698    427.9011    495.5148    584.6220    663.2237
##  [931]    632.8039    635.5174    563.2000    692.2758    665.4231    759.3499
##  [937]   1831.1329   1810.0670   2036.8849   2277.7424   2849.0948   3827.9216
##  [943]   4920.3560   5249.8027   7277.9128  10132.9096  10206.9779  12451.6558
##  [949]    452.3370    490.3822    496.1743    545.0099    581.3689    686.3953
##  [955]    618.0141    684.1716    739.0144    790.2580    951.4098   1042.5816
##  [961]    743.1159    846.1203   1055.8960   1421.1452   1586.8518   1497.4922
##  [967]   1481.1502   1421.6036   1361.3698   1483.1361   1579.0195   1803.1515
##  [973]   1967.9557   2034.0380   2529.0675   2475.3876   2575.4842   3710.9830
##  [979]   3688.0377   4783.5869   6058.2538   7425.7053   9021.8159  10956.9911
##  [985]   3478.1255   4131.5466   4581.6094   5754.7339   6809.4067   7674.9291
##  [991]   9611.1475   8688.1560   9472.3843   9767.2975  10742.4405  11977.5750
##  [997]    786.5669    912.6626   1056.3540   1226.0411   1421.7420   1647.5117
## [1003]   2000.6031   2338.0083   1785.4020   1902.2521   2140.7393   3095.7723
## [1009]   2647.5856   3682.2599   4649.5938   5907.8509   7778.4140   9595.9299
## [1015]  11222.5876  11732.5102   7003.3390   6465.6133   6557.1943   9253.8961
## [1021]   1688.2036   1642.0023   1566.3535   1711.0448   1930.1950   2370.6200
## [1027]   2702.6204   2755.0470   2948.0473   2982.1019   3258.4956   3820.1752
## [1033]    468.5260    495.5868    556.6864    566.6692    724.9178    502.3197
## [1039]    462.2114    389.8762    410.8968    472.3461    633.6179    823.6856
## [1045]    331.0000    350.0000    388.0000    349.0000    357.0000    371.0000
## [1051]    424.0000    385.0000    347.0000    415.0000    611.0000    944.0000
## [1057]   2423.7804   2621.4481   3173.2156   3793.6948   3746.0809   3876.4860
## [1063]   4191.1005   3693.7313   3804.5380   3899.5243   4072.3248   4811.0604
## [1069]    545.8657    597.9364    652.3969    676.4422    674.7881    694.1124
## [1075]    718.3731    775.6325    897.7404   1010.8921   1057.2063   1091.3598
## [1081]   8941.5719  11276.1934  12790.8496  15363.2514  18794.7457  21209.0592
## [1087]  21399.4605  23651.3236  26790.9496  30246.1306  33724.7578  36797.9333
## [1093]  10556.5757  12247.3953  13175.6780  14463.9189  16046.0373  16233.7177
## [1099]  17632.4104  19007.1913  18363.3249  21050.4138  23189.8014  25185.0091
## [1105]   3112.3639   3457.4159   3634.3644   4643.3935   4688.5933   5486.3711
## [1111]   3470.3382   2955.9844   2170.1517   2253.0230   2474.5488   2749.3210
## [1117]    761.8794    835.5234    997.7661   1054.3849    954.2092    808.8971
## [1123]    909.7221    668.3000    581.1827    580.3052    601.0745    619.6769
## [1129]   1077.2819   1100.5926   1150.9275   1014.5141   1698.3888   1981.9518
## [1135]   1576.9738   1385.0296   1619.8482   1624.9413   1615.2864   2013.9773
## [1141]  10095.4217  11653.9730  13450.4015  16361.8765  18965.0555  23311.3494
## [1147]  26298.6353  31540.9748  33965.6611  41283.1643  44683.9753  49357.1902
## [1153]   1828.2303   2242.7466   2924.6381   4720.9427  10618.0385  11848.3439
## [1159]  12954.7910  18115.2231  18616.7069  19702.0558  19774.8369  22316.1929
## [1165]    684.5971    747.0835    803.3427    942.4083   1049.9390   1175.9212
## [1171]   1443.4298   1704.6866   1971.8295   2049.3505   2092.7124   2605.9476
## [1177]   2480.3803   2961.8009   3536.5403   4421.0091   5364.2497   5351.9121
## [1183]   7009.6016   7034.7792   6618.7431   7113.6923   7356.0319   9809.1856
## [1189]   1952.3087   2046.1547   2148.0271   2299.3763   2523.3380   3248.3733
## [1195]   4258.5036   3998.8757   4196.4111   4247.4003   3783.6742   4172.8385
## [1201]   3758.5234   4245.2567   4957.0380   5788.0933   5937.8273   6281.2909
## [1207]   6434.5018   6360.9434   4446.3809   5838.3477   5909.0201   7408.9056
## [1213]   1272.8810   1547.9448   1649.5522   1814.1274   1989.3741   2373.2043
## [1219]   2603.2738   2189.6350   2279.3240   2536.5349   2650.9211   3190.4810
## [1225]   4029.3297   4734.2530   5338.7521   6557.1528   8006.5070   9508.1415
## [1231]   8451.5310   9082.3512   7738.8812  10159.5837  12002.2391  15389.9247
## [1237]   3068.3199   3774.5717   4727.9549   6361.5180   9022.2474  10172.4857
## [1243]  11753.8429  13039.3088  16207.2666  17641.0316  19970.9079  20509.6478
## [1249]   3081.9598   3907.1562   5108.3446   6929.2777   9123.0417   9770.5249
## [1255]  10330.9891  12281.3419  14641.5871  16999.4333  18855.6062  19328.7090
## [1261]   2718.8853   2769.4518   3173.7233   4021.1757   5047.6586   4319.8041
## [1267]   5267.2194   5303.3775   6101.2558   6071.9414   6316.1652   7670.1226
## [1273]   3144.6132   3943.3702   4734.9976   6470.8665   8011.4144   9356.3972
## [1279]   9605.3141   9696.2733   6598.4099   7346.5476   7885.3601  10808.4756
## [1285]    493.3239    540.2894    597.4731    510.9637    590.5807    670.0806
## [1291]    881.5706    847.9912    737.0686    589.9445    785.6538    863.0885
## [1297]    879.5836    860.7369   1071.5511   1384.8406   1532.9853   1737.5617
## [1303]   1890.2181   1516.5255   1428.7778   1339.0760   1353.0924   1598.4351
## [1309]   6459.5548   8157.5912  11626.4197  16903.0489  24837.4287  34167.7626
## [1315]  33693.1753  21198.2614  24841.6178  20586.6902  19014.5412  21654.8319
## [1321]   1450.3570   1567.6530   1654.9887   1612.4046   1597.7121   1561.7691
## [1327]   1518.4800   1441.7207   1367.8994   1392.3683   1519.6353   1712.4721
## [1333]   3581.4594   4981.0909   6289.6292   7991.7071  10522.0675  12980.6696
## [1339]  15181.0927  15870.8785   9325.0682   7914.3203   7236.0753   9786.5347
## [1345]    879.7877   1004.4844   1116.6399   1206.0435   1353.7598   1348.2852
## [1351]   1465.0108   1294.4478   1068.6963    574.6482    699.4897    862.5408
## [1357]   2315.1382   2843.1044   3674.7356   4977.4185   8597.7562  11210.0895
## [1363]  15169.1611  18861.5308  24769.8912  33519.4766  36023.1054  47143.1796
## [1369]   5074.6591   6093.2630   7481.1076   8412.9024   9674.1676  10922.6640
## [1375]  11348.5459  12037.2676   9498.4677  12126.2306  13638.7784  18678.3144
## [1381]   4215.0417   5862.2766   7402.3034   9405.4894  12383.4862  15277.0302
## [1387]  17866.7218  18678.5349  14214.7168  17161.1073  20660.0194  25768.2576
## [1393]   1135.7498   1258.1474   1369.4883   1284.7332   1254.5761   1450.9925
## [1399]   1176.8070   1093.2450    926.9603    930.5964    882.0818    926.1411
## [1405]   4725.2955   5487.1042   5768.7297   7114.4780   7765.9626   8028.6514
## [1411]   8568.2662   7825.8234   7225.0693   7479.1882   7710.9464   9269.6578
## [1417]   3834.0347   4564.8024   5693.8439   7993.5123  10638.7513  13236.9212
## [1423]  13926.1700  15764.9831  18603.0645  20445.2990  24835.4717  28821.0637
## [1429]   1083.5320   1072.5466   1074.4720   1135.5143   1213.3955   1348.7757
## [1435]   1648.0798   1876.7668   2153.7392   2664.4773   3015.3788   3970.0954
## [1441]   1615.9911   1770.3371   1959.5938   1687.9976   1659.6528   2202.9884
## [1447]   1895.5441   1507.8192   1492.1970   1632.2108   1993.3983   2602.3950
## [1453]   1148.3766   1244.7084   1856.1821   2613.1017   3364.8366   3781.4106
## [1459]   3895.3840   3984.8398   3553.0224   3876.7685   4128.1169   4513.4806
## [1465]   8527.8447   9911.8782  12329.4419  15258.2970  17832.0246  18855.7252
## [1471]  20667.3812  23586.9293  23880.0168  25266.5950  29341.6309  33859.7484
## [1477]  14734.2327  17909.4897  20431.0927  22966.1443  27195.1130  26982.2905
## [1483]  28397.7151  30281.7046  31871.5303  32135.3230  34480.9577  37506.4191
## [1489]   1643.4854   2117.2349   2193.0371   1881.9236   2571.4230   3195.4846
## [1495]   3761.8377   3116.7743   3340.5428   4014.2390   4090.9253   4184.5481
## [1501]   1206.9479   1507.8613   1822.8790   2643.8587   4062.5239   5596.5198
## [1507]   7426.3548  11054.5618  15215.6579  20206.8210  23235.4233  28718.2768
## [1513]    716.6501    698.5356    722.0038    848.2187    915.9851    962.4923
## [1519]    874.2426    831.8221    825.6825    789.1862    899.0742   1107.4822
## [1525]    757.7974    793.5774   1002.1992   1295.4607   1524.3589   1961.2246
## [1531]   2393.2198   2982.6538   4616.8965   5852.6255   5913.1875   7458.3963
## [1537]    859.8087    925.9083   1067.5348   1477.5968   1649.6602   1532.7770
## [1543]   1344.5780   1202.2014   1034.2989    982.2869    886.2206    882.9699
## [1549]   3023.2719   4100.3934   4997.5240   5621.3685   6619.5514   7899.5542
## [1555]   9119.5286   7388.5978   7370.9909   8792.5731  11460.6002  18008.5092
## [1561]   1468.4756   1395.2325   1660.3032   1932.3602   2753.2860   3120.8768
## [1567]   3560.2332   3810.4193   4332.7202   4876.7986   5722.8957   7092.9230
## [1573]   1969.1010   2218.7543   2322.8699   2826.3564   3450.6964   4269.1223
## [1579]   4241.3563   5089.0437   5678.3483   6601.4299   6508.0857   8458.2764
## [1585]    734.7535    774.3711    767.2717    908.9185    950.7359    843.7331
## [1591]    682.2662    617.7244    644.1708    816.5591    927.7210   1056.3801
## [1597]   9979.5085  11283.1779  12477.1771  14142.8509  15895.1164  17428.7485
## [1603]  18232.4245  21664.7877  22705.0925  26074.5314  29478.9992  33203.2613
## [1609]  13990.4821  14847.1271  16173.1459  19530.3656  21806.0359  24072.6321
## [1615]  25009.5591  29884.3504  32003.9322  35767.4330  39097.0995  42951.6531
## [1621]   5716.7667   6150.7730   5603.3577   5444.6196   5703.4089   6504.3397
## [1627]   6920.2231   7452.3990   8137.0048   9230.2407   7727.0020  10611.4630
## [1633]   7689.7998   9802.4665   8422.9742   9541.4742  10505.2597  13143.9510
## [1639]  11152.4101   9883.5846  10733.9263  10165.4952   8605.0478  11415.8057
## [1645]    605.0665    676.2854    772.0492    637.1233    699.5016    713.5371
## [1651]    707.2358    820.7994    989.0231   1385.8968   1764.4567   2441.5764
## [1657]   1515.5923   1827.0677   2198.9563   2649.7150   3133.4093   3682.8315
## [1663]   4336.0321   5107.1974   6017.6548   7110.6676   4515.4876   3025.3498
## [1669]    781.7176    804.8305    825.6232    862.4421   1265.0470   1829.7652
## [1675]   1977.5570   1971.7415   1879.4967   2117.4845   2234.8208   2280.7699
## [1681]   1147.3888   1311.9568   1452.7258   1777.0773   1773.4983   1588.6883
## [1687]   1408.6786   1213.3151   1210.8846   1071.3538   1071.6139   1271.2116
## [1693]    406.8841    518.7643    527.2722    569.7951    799.3622    685.5877
## [1699]    788.8550    706.1573    693.4208    792.4500    672.0386    469.7093</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="beskrivande-statistik.html#cb81-1" tabindex="-1"></a><span class="fu">mean</span>(gapminder<span class="sc">$</span>gdpPercap)   <span class="co"># Beräkna medelvärdet</span></span></code></pre></div>
<pre><code>## [1] 7215.327</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="beskrivande-statistik.html#cb83-1" tabindex="-1"></a><span class="fu">median</span>(gapminder<span class="sc">$</span>gdpPercap) <span class="co"># Beräkna medianen</span></span></code></pre></div>
<pre><code>## [1] 3531.847</code></pre>
<p>Samma sak kan göras med en pipe <code>%&gt;%</code> och <code>summarise()</code>.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="beskrivande-statistik.html#cb85-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="beskrivande-statistik.html#cb85-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap),</span>
<span id="cb85-3"><a href="beskrivande-statistik.html#cb85-3" tabindex="-1"></a>            <span class="at">Median =</span> <span class="fu">median</span>(gdpPercap))</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-26" class="exercise"><strong>Uppgift 2.4  (Lägesmått av livslängd) </strong></span>Gör lämpliga ändringar i exemplet ovan för att beräkna lägesmått för medellivslängd (<code>lifeExp</code>).</p>
</div>
<p>Den andra lösningen, med en pipe och <code>summarise()</code>, kan enkelt utvecklas med ett <code>group_by()</code>-steg för att beräkna medel och median per någon grupp, t.ex. per år.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="beskrivande-statistik.html#cb86-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span>                           <span class="co"># Ta datan, och sen</span></span>
<span id="cb86-2"><a href="beskrivande-statistik.html#cb86-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span>                    <span class="co"># gruppera efter år, och</span></span>
<span id="cb86-3"><a href="beskrivande-statistik.html#cb86-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap),     <span class="co"># beräkna medelvärde och</span></span>
<span id="cb86-4"><a href="beskrivande-statistik.html#cb86-4" tabindex="-1"></a>            <span class="at">Median =</span> <span class="fu">median</span>(gdpPercap)) <span class="co"># medianen av gdpPercap</span></span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-27" class="exercise"><strong>Uppgift 2.5  (Lägesmått per kontinent) </strong></span>Gör lämpliga ändringar i exemplet ovan för att beräkna lägesmått per kontinent. Vad måste läggas till för att också beräkna maximum och minimum per kontinent (funktionerna <code>max()</code> och <code>min()</code>)?</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-28" class="exercise"><strong>Uppgift 2.6  (Upprepade mätningar) </strong></span>Finns det några problem med att beräkna medelvärde per kontinent på den här datan?</p>
</div>
<p>I vetenskapliga publikationer redovisas medelvärden ofta med ett stapeldiagram. Som exempel ges staplar för medelvärdet av bnp per kontinent för 2007.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="beskrivande-statistik.html#cb87-1" tabindex="-1"></a>dat_gdp_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>       <span class="co"># Ta datan, och sen</span></span>
<span id="cb87-2"><a href="beskrivande-statistik.html#cb87-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>          <span class="co"># filtrera för 2007, och sen</span></span>
<span id="cb87-3"><a href="beskrivande-statistik.html#cb87-3" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span>           <span class="co"># gruppera kontinenter, och</span></span>
<span id="cb87-4"><a href="beskrivande-statistik.html#cb87-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap)) <span class="co"># summera med medelvärdet</span></span>
<span id="cb87-5"><a href="beskrivande-statistik.html#cb87-5" tabindex="-1"></a></span>
<span id="cb87-6"><a href="beskrivande-statistik.html#cb87-6" tabindex="-1"></a><span class="fu">ggplot</span>(dat_gdp_2007, <span class="fu">aes</span>(continent, Mean)) <span class="sc">+</span></span>
<span id="cb87-7"><a href="beskrivande-statistik.html#cb87-7" tabindex="-1"></a>  <span class="fu">geom_col</span>()                  <span class="co"># Illustrera med kolumner (columns)</span></span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-29" class="exercise"><strong>Uppgift 2.7  (Graf för livslängd) </strong></span>Gör om stapeldiagrammet. Denna gång med livslängd (<code>lifeExp</code>) istället för bnp per capita (<code>gdpPercap</code>).</p>
</div>
</div>
<div id="sammanfattande-spridningsmått" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Sammanfattande spridningsmått<a href="beskrivande-statistik.html#sammanfattande-spridningsmått" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Under föreläsningarna såg vi några mått på spridning: varians, standardavvikelse och kvartilavstånd (IQR, <em>inter-quartile range</em>). De har alla motsvarande funktioner i R (<code>var()</code>, <code>sd()</code>, och <code>IQR()</code>) som kan användas på samma sätt som funktionerna för lägesmått.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="beskrivande-statistik.html#cb88-1" tabindex="-1"></a>gdpPercap <span class="ot">&lt;-</span> gapminder<span class="sc">$</span>gdpPercap <span class="co"># Skapa en vektor gdpPercap</span></span>
<span id="cb88-2"><a href="beskrivande-statistik.html#cb88-2" tabindex="-1"></a></span>
<span id="cb88-3"><a href="beskrivande-statistik.html#cb88-3" tabindex="-1"></a><span class="fu">var</span>(gdpPercap)                   <span class="co"># Beräkna varians</span></span>
<span id="cb88-4"><a href="beskrivande-statistik.html#cb88-4" tabindex="-1"></a><span class="fu">sd</span>(gdpPercap)                    <span class="co"># Beräkna standardavvikelse</span></span>
<span id="cb88-5"><a href="beskrivande-statistik.html#cb88-5" tabindex="-1"></a><span class="fu">IQR</span>(gdpPercap)                   <span class="co"># Beräkna kvartilavstånd</span></span></code></pre></div>
<p>Alternativt med en pipe och <code>summarise()</code>.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="beskrivande-statistik.html#cb89-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span>                       <span class="co"># Ta datan, och</span></span>
<span id="cb89-2"><a href="beskrivande-statistik.html#cb89-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Var =</span> <span class="fu">var</span>(gdpPercap),   <span class="co"># beräkna varians,</span></span>
<span id="cb89-3"><a href="beskrivande-statistik.html#cb89-3" tabindex="-1"></a>            <span class="at">Sd =</span> <span class="fu">sd</span>(gdpPercap),     <span class="co"># standardavvikelse,</span></span>
<span id="cb89-4"><a href="beskrivande-statistik.html#cb89-4" tabindex="-1"></a>            <span class="at">IQR =</span> <span class="fu">IQR</span>(gdpPercap))   <span class="co"># och kvartilavstånd</span></span></code></pre></div>
<p>Lösningen med pipe och <code>summarise()</code> kan som tidigare utvecklas med <code>group_by()</code>.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="beskrivande-statistik.html#cb90-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb90-2"><a href="beskrivande-statistik.html#cb90-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb90-3"><a href="beskrivande-statistik.html#cb90-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Varians =</span> <span class="fu">var</span>(gdpPercap),</span>
<span id="cb90-4"><a href="beskrivande-statistik.html#cb90-4" tabindex="-1"></a>            <span class="at">Standardavvikelse =</span> <span class="fu">sd</span>(gdpPercap),</span>
<span id="cb90-5"><a href="beskrivande-statistik.html#cb90-5" tabindex="-1"></a>            Kvartilavstånd <span class="ot">=</span> <span class="fu">IQR</span>(gdpPercap))</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-30" class="exercise"><strong>Uppgift 2.8  (Graf för livslängd) </strong></span>Gör lämpliga ändringar i det sista exempel för att istället beräkna spridningsmått för livslängd.</p>
</div>
<p>Vi avslutar med tre vanliga illustrationer av vetenskaplig data - ett linjediagram med felstaplar, ett stapeldiagram med felstaplar, och ett lådagram. För linjediagrammet beräknar vi medelvärdet och spridningsmått för bnp över år och kontinent. Som spridningsmått använder vi standard error (sv. <em>medelfel</em>), vilket beräknas som standardavvikelse delat på roten ur antalet observationer. Funktionen <code>n()</code> ger antalet observationer per kontinent och år.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="beskrivande-statistik.html#cb91-1" tabindex="-1"></a>dat_year_continent <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb91-2"><a href="beskrivande-statistik.html#cb91-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year, continent) <span class="sc">%&gt;%</span></span>
<span id="cb91-3"><a href="beskrivande-statistik.html#cb91-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(gdpPercap),</span>
<span id="cb91-4"><a href="beskrivande-statistik.html#cb91-4" tabindex="-1"></a>            <span class="at">SE =</span> <span class="fu">sd</span>(gdpPercap) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">n</span>()))</span>
<span id="cb91-5"><a href="beskrivande-statistik.html#cb91-5" tabindex="-1"></a>dat_year_continent</span></code></pre></div>
<p>Med <code>ggplot2</code> kan vi bygga ett linjediagram med <code>geom_line()</code> och lägga till felstaplar med <code>geom_errorbar()</code>. Den senare behöver <code>aes()</code>-argument för <code>ymin</code> och <code>ymax</code> - nedre och övre del av felstapeln. Vi sätter dem till medelvärdet minus respektive plus ett medelfel.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="beskrivande-statistik.html#cb92-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_year_continent, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> Mean, </span>
<span id="cb92-2"><a href="beskrivande-statistik.html#cb92-2" tabindex="-1"></a>                               <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb92-3"><a href="beskrivande-statistik.html#cb92-3" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb92-4"><a href="beskrivande-statistik.html#cb92-4" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SE, <span class="at">ymax =</span> Mean <span class="sc">+</span> SE))</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-31" class="exercise"><strong>Uppgift 2.9  (Bredd) </strong></span>Felstaplarna från <code>geom_errorbar()</code> har väldigt breda ändar. Använd hjälpsidan för geomet <code>?geom_errorbar</code>, i synnerhet exemplen längst ned, och se om det går att ändra bredden.</p>
</div>
<p>En graf med staplar och felstaplar kan konstrueras på ett liknande sätt. Följande exempel visar staplar över livslängd per kontinent. Felstapeln ges av standardavvikelsen.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="beskrivande-statistik.html#cb93-1" tabindex="-1"></a>dat_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>          <span class="co"># Ta datan, och sen</span></span>
<span id="cb93-2"><a href="beskrivande-statistik.html#cb93-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>        <span class="co"># filtrera på år, och sen</span></span>
<span id="cb93-3"><a href="beskrivande-statistik.html#cb93-3" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span>         <span class="co"># gruppera efter kontinent,</span></span>
<span id="cb93-4"><a href="beskrivande-statistik.html#cb93-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(lifeExp), <span class="co"># summera med medelvärde,</span></span>
<span id="cb93-5"><a href="beskrivande-statistik.html#cb93-5" tabindex="-1"></a>            <span class="at">SD =</span> <span class="fu">sd</span>(lifeExp))     <span class="co"># och standardavvikelse</span></span>
<span id="cb93-6"><a href="beskrivande-statistik.html#cb93-6" tabindex="-1"></a>dat_2007</span></code></pre></div>
<p>Vi bygger en ggplot med <code>geom_col()</code> och <code>geom_errorbar()</code>. Felstapels konstruktion kan anges i en notis med funktionen <code>labs()</code>.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="beskrivande-statistik.html#cb94-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_2007, <span class="fu">aes</span>(continent, Mean, <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb94-2"><a href="beskrivande-statistik.html#cb94-2" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span>                                            </span>
<span id="cb94-3"><a href="beskrivande-statistik.html#cb94-3" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SD, <span class="at">ymax =</span> Mean <span class="sc">+</span> SD)) <span class="sc">+</span></span>
<span id="cb94-4"><a href="beskrivande-statistik.html#cb94-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Average life expectancy by continent, 2007&quot;</span>,</span>
<span id="cb94-5"><a href="beskrivande-statistik.html#cb94-5" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Errorbars given by mean +/- standard deviation.</span></span>
<span id="cb94-6"><a href="beskrivande-statistik.html#cb94-6" tabindex="-1"></a><span class="st">       Source: Gapminder&quot;</span>)</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-32" class="exercise"><strong>Uppgift 2.10  (Staplar för 1982) </strong></span>Gör lämpliga ändringar i exempel ovan för att konstruera ett stapeldiagram med felstaplar för året 1982 och variabeln medellivslängd.</p>
</div>
<p>Ett lådagram anger fördelningen av en variabel genom att illustrera minimum, maximum och kvartiler. Kvartiler är mått som delar en datamängd i fyra lika stora delar (så att en fjärdedel ligger under första kvartilen, en fjärdedel mellan första och andra kvartil, och så vidare). Med <code>ggplot2</code> kan vi bygga ett lådagram med <code>geom_boxplot()</code>. Exempel ger en låda per år och kontinent.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="beskrivande-statistik.html#cb95-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(year, lifeExp, <span class="at">fill =</span> continent, </span>
<span id="cb95-2"><a href="beskrivande-statistik.html#cb95-2" tabindex="-1"></a>                      <span class="at">group =</span> year)) <span class="sc">+</span></span>
<span id="cb95-3"><a href="beskrivande-statistik.html#cb95-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span>                                                     </span>
<span id="cb95-4"><a href="beskrivande-statistik.html#cb95-4" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> continent)                                              </span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-33" class="exercise"><strong>Uppgift 2.11  (Group-argumentet) </strong></span>I lådagrammet används argumentet <code>group</code>. Vad gör det? Vad händer om man tar bort det?</p>
</div>
</div>
<div id="ordna-upp-beskrivande-statistik-och-exportera" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Ordna upp beskrivande statistik och exportera<a href="beskrivande-statistik.html#ordna-upp-beskrivande-statistik-och-exportera" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Efter att ha beräknat någon beskrivande statistik kan det vara bra att titta på hur resultaten kan snyggas upp och exporteras i något lämpligt format. Ta den tabell med medelvärden vi producerade i ett tidigare exempel.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="beskrivande-statistik.html#cb96-1" tabindex="-1"></a>dat_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span>          <span class="co"># Ta datan, och sen</span></span>
<span id="cb96-2"><a href="beskrivande-statistik.html#cb96-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span>        <span class="co"># filtrera på år, och sen</span></span>
<span id="cb96-3"><a href="beskrivande-statistik.html#cb96-3" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span>         <span class="co"># gruppera efter kontinent,</span></span>
<span id="cb96-4"><a href="beskrivande-statistik.html#cb96-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(lifeExp), <span class="co"># summera med medelvärde,</span></span>
<span id="cb96-5"><a href="beskrivande-statistik.html#cb96-5" tabindex="-1"></a>            <span class="at">SD =</span> <span class="fu">sd</span>(lifeExp))     <span class="co"># och standardavvikelse</span></span>
<span id="cb96-6"><a href="beskrivande-statistik.html#cb96-6" tabindex="-1"></a>dat_2007</span></code></pre></div>
<p>Objekt kan exporteras från R på liknande som det importeras - med särskilda exportfunktioner (<em>write</em>-funktioner) beroende på filtyp. För att exportera till en csv-fil man man använda <code>write_csv()</code>. Ingående argument är det objekt man vill exportera och den fil man vill exportera till. R ger ingen varning om man skriver över en existerande fil, så var lite försiktiga här.</p>
<p>Precis som vid import använder R <em>working directory</em> om inget annat anges. Följande exporterar objektet <code>dat_2007</code> till en csv-fil <em>Exporterad data från R.csv</em> i <em>working directory</em>.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="beskrivande-statistik.html#cb97-1" tabindex="-1"></a><span class="fu">getwd</span>()                          <span class="co"># Se nuvarande working directory</span></span>
<span id="cb97-2"><a href="beskrivande-statistik.html#cb97-2" tabindex="-1"></a><span class="fu">write_csv</span>(dat_2007, <span class="st">&quot;Exporterad data från R.csv&quot;</span>) <span class="co"># Exportera data</span></span></code></pre></div>
<p>Därifrån skulle man kunna öppna filen i något kalkylprogram, snygga till layouten, och sedan klippa in i ett textdokument.</p>
</div>
<div id="kumulativt-medelvärde" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Kumulativt medelvärde<a href="beskrivande-statistik.html#kumulativt-medelvärde" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Om man har data som av någon anledning samlas in i sekvens kan det vara intressant att beräkna och illustrera den med ett <em>kumulativt medelvärde</em>. En serie med kumulativa medelvärden beräknas genom att för varje nytt värde ta medelvärden av de värden man hittills samlat in - vid tio värden tar man medelvärdet av de tio, vid elva värden medelvärdet av de elva, och så vidare.</p>
<p>Med de tärningsvärden vi hade innan kan vi beräkna ett kumulativt medelvärde genom att först beräkna summan med <code>cumsum()</code> och sedan dela på antalet kast. För att förenkla beräkningen av antalen tar vi fram sekvensen med antal kast i ett <code>mutate()</code>-steg.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="beskrivande-statistik.html#cb98-1" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Utfall =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb98-2"><a href="beskrivande-statistik.html#cb98-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Kast =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>())                           </span>
<span id="cb98-3"><a href="beskrivande-statistik.html#cb98-3" tabindex="-1"></a>dat_dice</span>
<span id="cb98-4"><a href="beskrivande-statistik.html#cb98-4" tabindex="-1"></a></span>
<span id="cb98-5"><a href="beskrivande-statistik.html#cb98-5" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> dat_dice <span class="sc">%&gt;%</span></span>
<span id="cb98-6"><a href="beskrivande-statistik.html#cb98-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">kumulativ_summa =</span> <span class="fu">cumsum</span>(Utfall),  </span>
<span id="cb98-7"><a href="beskrivande-statistik.html#cb98-7" tabindex="-1"></a>         kumulativt_medelvärde <span class="ot">=</span> kumulativ_summa <span class="sc">/</span> Kast)</span>
<span id="cb98-8"><a href="beskrivande-statistik.html#cb98-8" tabindex="-1"></a>dat_dice</span></code></pre></div>
<div class="exercise">
<p><span id="exr:unlabeled-div-34" class="exercise"><strong>Uppgift 2.12  (Kumulativt medelvärde) </strong></span>Vad ska läggas till för att stycket nedan ska ge en linjegraf över medelvärdet?</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="beskrivande-statistik.html#cb99-1" tabindex="-1"></a><span class="fu">ggplot</span>(dat_dice, <span class="fu">aes</span>(<span class="at">x =</span> Kast, <span class="at">y =</span> ___)) <span class="sc">+</span></span>
<span id="cb99-2"><a href="beskrivande-statistik.html#cb99-2" tabindex="-1"></a>  <span class="fu">___</span>()</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-35" class="exercise"><strong>Uppgift 2.13  (Fler tärningskast) </strong></span>Kasta din tärning ytterligare några gånger, gärna på en mjuk yta. Fyll i dina utfall och gör grafen från föregående uppgift. Kan man se en tendens för medelvärdet att minska i varians vid fler kast? Svänger kurvan in mot något specifikt värde?</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="beskrivande-statistik.html#cb100-1" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Utfall =</span> <span class="fu">c</span>(___)) <span class="sc">%&gt;%</span> </span>
<span id="cb100-2"><a href="beskrivande-statistik.html#cb100-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Kast =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>(),                                 </span>
<span id="cb100-3"><a href="beskrivande-statistik.html#cb100-3" tabindex="-1"></a>         <span class="at">kumulativ_summa =</span> <span class="fu">cumsum</span>(Utfall),           </span>
<span id="cb100-4"><a href="beskrivande-statistik.html#cb100-4" tabindex="-1"></a>         kumulativt_medelvärde <span class="ot">=</span> <span class="st">`</span><span class="at">Kumulativ summa</span><span class="st">`</span> <span class="sc">/</span> Kast)</span>
<span id="cb100-5"><a href="beskrivande-statistik.html#cb100-5" tabindex="-1"></a>dat_dice</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-36" class="exercise"><strong>Uppgift 2.14  (Kumulativ frekvens) </strong></span>Om man vill titta på andelen gånger ett visst utfall inträffat talar man om <em>kumulativ frekvens</em> snarare än <em>kumulativt medelvärde</em>. Använd stycket nedan för att titta på andelen gånger utfallet varit en etta (ett <em>positivt</em> utfall, i begreppets kliniska mening). Om ett inte är ett möjligt utfall på din tärning, ändra ettan till något mer lämpligt.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="beskrivande-statistik.html#cb101-1" tabindex="-1"></a>dat_dice <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Utfall =</span> <span class="fu">c</span>(___)) <span class="sc">%&gt;%</span> </span>
<span id="cb101-2"><a href="beskrivande-statistik.html#cb101-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Kast =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>(),</span>
<span id="cb101-3"><a href="beskrivande-statistik.html#cb101-3" tabindex="-1"></a>         <span class="at">positivt_utfall =</span> Utfall <span class="sc">==</span> <span class="dv">1</span>,              </span>
<span id="cb101-4"><a href="beskrivande-statistik.html#cb101-4" tabindex="-1"></a>         <span class="at">kumulativt_antal =</span> <span class="fu">cumsum</span>(positivt_utfall),</span>
<span id="cb101-5"><a href="beskrivande-statistik.html#cb101-5" tabindex="-1"></a>         <span class="at">kumulativ_frekvens =</span> kumulativt_antal <span class="sc">/</span> Kast)</span>
<span id="cb101-6"><a href="beskrivande-statistik.html#cb101-6" tabindex="-1"></a>dat_dice</span>
<span id="cb101-7"><a href="beskrivande-statistik.html#cb101-7" tabindex="-1"></a></span>
<span id="cb101-8"><a href="beskrivande-statistik.html#cb101-8" tabindex="-1"></a><span class="fu">ggplot</span>(dat_dice, <span class="fu">aes</span>(<span class="at">x =</span> Kast, <span class="at">y =</span> kumulativ_frekvens)) <span class="sc">+</span></span>
<span id="cb101-9"><a href="beskrivande-statistik.html#cb101-9" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
</div>
</div>
<div id="tredimensionella-grafer-med-plotly" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Tredimensionella grafer med <code>plotly</code><a href="beskrivande-statistik.html#tredimensionella-grafer-med-plotly" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>De två avslutande avsnitten är mindre viktiga och kan läsas i mån av tid.</p>
<p>Paketet <code>plotly</code> kan användas för att göra interaktiva graf och grafer med tre dimensioner. Börja med att ladda paketet.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="beskrivande-statistik.html#cb102-1" tabindex="-1"></a><span class="fu">library</span>(plotly)</span></code></pre></div>
<p>Vi börjar med ett enkelt exempel på en 3d-graf med lite skapad data.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="beskrivande-statistik.html#cb103-1" tabindex="-1"></a>dat_ex <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Var1 =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">Var2 =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb103-2"><a href="beskrivande-statistik.html#cb103-2" tabindex="-1"></a>                     <span class="at">Var3 =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>), <span class="at">Type =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>))</span>
<span id="cb103-3"><a href="beskrivande-statistik.html#cb103-3" tabindex="-1"></a>dat_ex</span>
<span id="cb103-4"><a href="beskrivande-statistik.html#cb103-4" tabindex="-1"></a></span>
<span id="cb103-5"><a href="beskrivande-statistik.html#cb103-5" tabindex="-1"></a><span class="fu">plot_ly</span>(dat_ex, <span class="at">x =</span> <span class="sc">~</span>Var1, <span class="at">y =</span> <span class="sc">~</span>Var2, </span>
<span id="cb103-6"><a href="beskrivande-statistik.html#cb103-6" tabindex="-1"></a>        <span class="at">z =</span> <span class="sc">~</span>Var3, <span class="at">color =</span> <span class="sc">~</span>Type) <span class="sc">%&gt;%</span></span>
<span id="cb103-7"><a href="beskrivande-statistik.html#cb103-7" tabindex="-1"></a>  <span class="fu">add_markers</span>()</span></code></pre></div>
<p>Om grafen inte kommer upp direkt kan det fungera att trycka på den lilla ikonen med ett fönster och en pil i <em>Viewer</em>-fliken. Grafen ska då öppnas i en webbläsare.</p>
<p>Syntaxen till <code>plot_ly()</code> är inte helt olik <code>ggplot()</code>. Först anges datan, därefter argument för x- y-, och z-koordinater. Notera tilde-tecknet <code>~</code> före variabelnamnen. Eventuell färg sätts med <code>color</code>. Efter det lägger man till punkter (här <em>markers</em>) med en pipe in i <code>add_markers()</code>. Vi vill göra en liknande graf med gapminder-datan, men får börja med att filtrera på ett visst år.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-37" class="exercise"><strong>Uppgift 2.15  (Filtrera för år) </strong></span>Vad måste läggas till i funktionen nedan för att filtrera för data där året är 2007?</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="beskrivande-statistik.html#cb104-1" tabindex="-1"></a>dat_2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb104-2"><a href="beskrivande-statistik.html#cb104-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> ___)</span></code></pre></div>
</div>
<p>Vi kan nu konstruera en 3d-graf med datan.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-38" class="exercise"><strong>Uppgift 2.16  (Gapminder i 3d) </strong></span>Vad måste läggas till i funktionen nedan för en 3d-graf med befolkningsmängd (<code>pop</code>) på x-axeln, livslängd (<code>lifeExp</code>) på y-axeln, bnp per capita (<code>gdpPercap</code>) på z-axeln, och färg efter kontinent (<code>continent</code>)? För att kunna identifiera specifika länder kan man också sätta argumentet <code>text</code>.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="beskrivande-statistik.html#cb105-1" tabindex="-1"></a><span class="fu">plot_ly</span>(data_2007, <span class="at">x =</span> <span class="sc">~</span>pop, <span class="at">y =</span> <span class="sc">~</span>___, <span class="at">z =</span> <span class="sc">~</span>___, </span>
<span id="cb105-2"><a href="beskrivande-statistik.html#cb105-2" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>continent, <span class="at">text =</span> <span class="sc">~</span>country) <span class="sc">%&gt;%</span> </span>
<span id="cb105-3"><a href="beskrivande-statistik.html#cb105-3" tabindex="-1"></a>  <span class="fu">add_markers</span>()</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-39" class="exercise"><strong>Uppgift 2.17  (Log-transformationer) </strong></span>Inom statistiken är det vanligt att transformera variabler för att ta bort extremeffekter och visa på specifika dataegenskaper. En vanlig transform är att <em>logaritmera</em> ett värde, vilket innebär att man istället för att använda det ursprungliga värdet använder exponenten i någon bas (ofta basen tio). Ta till exempel värdet 10000, dess tio-logaritm är 4, eftersom 10 upphöjt i 4 är 10000. Logaritmer är vanliga vid data med extremvärden.</p>
<p>Grafen i uppgiften ovan präglas mycket av skillnader i bnp och befolkningsstorlek. Testa att tio-logaritmera variablerna och se om det blir en mer eller mindre överskådlig graf. Logaritmen kan göras genom att byta den ursprungliga variabeln mot en variabel transformerad med <code>log10()</code>. Fyll i stycket nedan.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="beskrivande-statistik.html#cb106-1" tabindex="-1"></a><span class="fu">plot_ly</span>(dat_2007, <span class="at">x =</span> <span class="sc">~</span><span class="fu">log10</span>(pop), <span class="at">y =</span> <span class="sc">~</span><span class="fu">log10</span>(___), </span>
<span id="cb106-2"><a href="beskrivande-statistik.html#cb106-2" tabindex="-1"></a>        <span class="at">z =</span> <span class="sc">~</span>___, <span class="at">color =</span> <span class="sc">~</span>___, <span class="at">text =</span> <span class="sc">~</span>country) <span class="sc">%&gt;%</span> </span>
<span id="cb106-3"><a href="beskrivande-statistik.html#cb106-3" tabindex="-1"></a>  <span class="fu">add_markers</span>()</span></code></pre></div>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-40" class="exercise"><strong>Uppgift 2.18  (Följa ett land) </strong></span>Likt en ggplot kan man lägga till graf-element. Här använder man dock en pipe för lägga till ett nytt element. Fyll i kodstycket nedan. Vad, om något, har lagts till i grafen?</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="beskrivande-statistik.html#cb107-1" tabindex="-1"></a><span class="fu">plot_ly</span>(dat_2007, <span class="at">x =</span> <span class="sc">~</span><span class="fu">log10</span>(pop), <span class="at">y =</span> <span class="sc">~</span><span class="fu">log10</span>(___), </span>
<span id="cb107-2"><a href="beskrivande-statistik.html#cb107-2" tabindex="-1"></a>        <span class="at">z =</span> <span class="sc">~</span>___, <span class="at">color =</span> <span class="sc">~</span>continent, <span class="at">text =</span> <span class="sc">~</span>country) <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="beskrivande-statistik.html#cb107-3" tabindex="-1"></a>  <span class="fu">add_markers</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb107-4"><a href="beskrivande-statistik.html#cb107-4" tabindex="-1"></a>  <span class="fu">add_lines</span>(<span class="at">data =</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Costa Rica&quot;</span>))</span></code></pre></div>
</div>
</div>
<div id="ai-uppgift-ii" class="section level2 hasAnchor" number="2.9">
<h2><span class="header-section-number">2.9</span> AI-uppgift II<a href="beskrivande-statistik.html#ai-uppgift-ii" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="exercise">
<p><span id="exr:unlabeled-div-41" class="exercise"><strong>Uppgift 2.19  (Standardavvikelse från gapminder-datan) </strong></span>Använd en chatbot (såsom Microsofts co-pilot eller OpenAIs ChatGPT) för att få kod som beräknar standardavvikelsen av medellivslängd från gapminder-datan. Fråga också om tolkning av standardavvikelsen och om det finns några specifika tolkningsproblem för just den här gapminder-datan.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-42" class="exercise"><strong>Uppgift 2.20  (3d-graf återigen) </strong></span>Använd en chatbot (såsom Microsofts co-pilot eller OpenAIs ChatGPT) för att få kod som skapar en 3d-graf lik den vi skapade ovan. Se om det går att utveckla grafen ytterligare, t.ex. med en linje som går ner till grafen <em>botten</em>, eller linjer som kopplar samma länder till kontinentens medelvärde.</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="datahantering-och-grafer.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ett-stickprov-av-normalfördelad-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-anvisningar.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
